var Pr=Object.defineProperty;var Ba=(e,r,t)=>r in e?Pr(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var Ie=(e,r)=>{for(var t in r)Pr(e,t,{get:r[t],enumerable:!0})};var xr=(e,r,t)=>(Ba(e,typeof r!="symbol"?r+"":r,t),t);var wr=Symbol("Comlink.proxy"),Ga=Symbol("Comlink.endpoint"),Qa=Symbol("Comlink.releaseProxy"),Ht=Symbol("Comlink.thrown"),_r=e=>typeof e=="object"&&e!==null||typeof e=="function",Ka={canHandle:e=>_r(e)&&e[wr],serialize(e){let{port1:r,port2:t}=new MessageChannel;return At(e,r),[t,[t]]},deserialize(e){return e.start(),Za(e)}},Ya={canHandle:e=>_r(e)&&Ht in e,serialize({value:e}){let r;return e instanceof Error?r={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:r={isError:!1,value:e},[r,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},Ir=new Map([["proxy",Ka],["throw",Ya]]);function At(e,r=self){r.addEventListener("message",function t(n){if(!n||!n.data)return;let{id:a,type:s,path:i}=Object.assign({path:[]},n.data),o=(n.data.argumentList||[]).map(De),A;try{let d=i.slice(0,-1).reduce((l,u)=>l[u],e),j=i.reduce((l,u)=>l[u],e);switch(s){case"GET":A=j;break;case"SET":d[i.slice(-1)[0]]=De(n.data.value),A=!0;break;case"APPLY":A=j.apply(d,o);break;case"CONSTRUCT":{let l=new j(...o);A=Wt(l)}break;case"ENDPOINT":{let{port1:l,port2:u}=new MessageChannel;At(e,u),A=es(l,[l])}break;case"RELEASE":A=void 0;break;default:return}}catch(d){A={value:d,[Ht]:0}}Promise.resolve(A).catch(d=>({value:d,[Ht]:0})).then(d=>{let[j,l]=Bt(d);r.postMessage(Object.assign(Object.assign({},j),{id:a}),l),s==="RELEASE"&&(r.removeEventListener("message",t),Sr(r))})}),r.start&&r.start()}function za(e){return e.constructor.name==="MessagePort"}function Sr(e){za(e)&&e.close()}function Za(e,r){return Xt(e,[],r)}function ot(e){if(e)throw new Error("Proxy has been released and is not useable")}function Xt(e,r=[],t=function(){}){let n=!1,a=new Proxy(t,{get(s,i){if(ot(n),i===Qa)return()=>Se(e,{type:"RELEASE",path:r.map(o=>o.toString())}).then(()=>{Sr(e),n=!0});if(i==="then"){if(r.length===0)return{then:()=>a};let o=Se(e,{type:"GET",path:r.map(A=>A.toString())}).then(De);return o.then.bind(o)}return Xt(e,[...r,i])},set(s,i,o){ot(n);let[A,d]=Bt(o);return Se(e,{type:"SET",path:[...r,i].map(j=>j.toString()),value:A},d).then(De)},apply(s,i,o){ot(n);let A=r[r.length-1];if(A===Ga)return Se(e,{type:"ENDPOINT"}).then(De);if(A==="bind")return Xt(e,r.slice(0,-1));let[d,j]=Tr(o);return Se(e,{type:"APPLY",path:r.map(l=>l.toString()),argumentList:d},j).then(De)},construct(s,i){ot(n);let[o,A]=Tr(i);return Se(e,{type:"CONSTRUCT",path:r.map(d=>d.toString()),argumentList:o},A).then(De)}});return a}function Ja(e){return Array.prototype.concat.apply([],e)}function Tr(e){let r=e.map(Bt);return[r.map(t=>t[0]),Ja(r.map(t=>t[1]))]}var Rr=new WeakMap;function es(e,r){return Rr.set(e,r),e}function Wt(e){return Object.assign(e,{[wr]:!0})}function Bt(e){for(let[r,t]of Ir)if(t.canHandle(e)){let[n,a]=t.serialize(e);return[{type:"HANDLER",name:r,value:n},a]}return[{type:"RAW",value:e},Rr.get(e)||[]]}function De(e){switch(e.type){case"HANDLER":return Ir.get(e.name).deserialize(e.value);case"RAW":return e.value}}function Se(e,r,t){return new Promise(n=>{let a=ts();e.addEventListener("message",function s(i){!i.data||!i.data.id||i.data.id!==a||(e.removeEventListener("message",s),n(i.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:a},r),t)})}function ts(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var Z={};Ie(Z,{ARRAY_TYPE:()=>K,EPSILON:()=>V,RANDOM:()=>pe,equals:()=>is,setMatrixArrayType:()=>ns,toRadian:()=>ss});var V=1e-6,K=typeof Float32Array<"u"?Float32Array:Array,pe=Math.random;function ns(e){K=e}var as=Math.PI/180;function ss(e){return e*as}function is(e,r){return Math.abs(e-r)<=V*Math.max(1,Math.abs(e),Math.abs(r))}Math.hypot||(Math.hypot=function(){for(var e=0,r=arguments.length;r--;)e+=arguments[r]*arguments[r];return Math.sqrt(e)});var Y={};Ie(Y,{add:()=>Ts,adjoint:()=>hs,clone:()=>cs,copy:()=>ds,create:()=>os,determinant:()=>ms,equals:()=>Ss,exactEquals:()=>Is,frob:()=>xs,fromMat2d:()=>$s,fromMat4:()=>As,fromQuat:()=>Ms,fromRotation:()=>vs,fromScaling:()=>Ds,fromTranslation:()=>ys,fromValues:()=>js,identity:()=>us,invert:()=>ps,mul:()=>Rs,multiply:()=>Fr,multiplyScalar:()=>ws,multiplyScalarAndAdd:()=>_s,normalFromMat4:()=>ks,projection:()=>Os,rotate:()=>Es,scale:()=>bs,set:()=>ls,str:()=>Ps,sub:()=>Fs,subtract:()=>Cr,translate:()=>gs,transpose:()=>fs});function os(){var e=new K(9);return K!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function As(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[4],e[4]=r[5],e[5]=r[6],e[6]=r[8],e[7]=r[9],e[8]=r[10],e}function cs(e){var r=new K(9);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function ds(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e}function js(e,r,t,n,a,s,i,o,A){var d=new K(9);return d[0]=e,d[1]=r,d[2]=t,d[3]=n,d[4]=a,d[5]=s,d[6]=i,d[7]=o,d[8]=A,d}function ls(e,r,t,n,a,s,i,o,A,d){return e[0]=r,e[1]=t,e[2]=n,e[3]=a,e[4]=s,e[5]=i,e[6]=o,e[7]=A,e[8]=d,e}function us(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function fs(e,r){if(e===r){var t=r[1],n=r[2],a=r[5];e[1]=r[3],e[2]=r[6],e[3]=t,e[5]=r[7],e[6]=n,e[7]=a}else e[0]=r[0],e[1]=r[3],e[2]=r[6],e[3]=r[1],e[4]=r[4],e[5]=r[7],e[6]=r[2],e[7]=r[5],e[8]=r[8];return e}function ps(e,r){var t=r[0],n=r[1],a=r[2],s=r[3],i=r[4],o=r[5],A=r[6],d=r[7],j=r[8],l=j*i-o*d,u=-j*s+o*A,f=d*s-i*A,p=t*l+n*u+a*f;return p?(p=1/p,e[0]=l*p,e[1]=(-j*n+a*d)*p,e[2]=(o*n-a*i)*p,e[3]=u*p,e[4]=(j*t-a*A)*p,e[5]=(-o*t+a*s)*p,e[6]=f*p,e[7]=(-d*t+n*A)*p,e[8]=(i*t-n*s)*p,e):null}function hs(e,r){var t=r[0],n=r[1],a=r[2],s=r[3],i=r[4],o=r[5],A=r[6],d=r[7],j=r[8];return e[0]=i*j-o*d,e[1]=a*d-n*j,e[2]=n*o-a*i,e[3]=o*A-s*j,e[4]=t*j-a*A,e[5]=a*s-t*o,e[6]=s*d-i*A,e[7]=n*A-t*d,e[8]=t*i-n*s,e}function ms(e){var r=e[0],t=e[1],n=e[2],a=e[3],s=e[4],i=e[5],o=e[6],A=e[7],d=e[8];return r*(d*s-i*A)+t*(-d*a+i*o)+n*(A*a-s*o)}function Fr(e,r,t){var n=r[0],a=r[1],s=r[2],i=r[3],o=r[4],A=r[5],d=r[6],j=r[7],l=r[8],u=t[0],f=t[1],p=t[2],h=t[3],g=t[4],b=t[5],v=t[6],$=t[7],D=t[8];return e[0]=u*n+f*i+p*d,e[1]=u*a+f*o+p*j,e[2]=u*s+f*A+p*l,e[3]=h*n+g*i+b*d,e[4]=h*a+g*o+b*j,e[5]=h*s+g*A+b*l,e[6]=v*n+$*i+D*d,e[7]=v*a+$*o+D*j,e[8]=v*s+$*A+D*l,e}function gs(e,r,t){var n=r[0],a=r[1],s=r[2],i=r[3],o=r[4],A=r[5],d=r[6],j=r[7],l=r[8],u=t[0],f=t[1];return e[0]=n,e[1]=a,e[2]=s,e[3]=i,e[4]=o,e[5]=A,e[6]=u*n+f*i+d,e[7]=u*a+f*o+j,e[8]=u*s+f*A+l,e}function Es(e,r,t){var n=r[0],a=r[1],s=r[2],i=r[3],o=r[4],A=r[5],d=r[6],j=r[7],l=r[8],u=Math.sin(t),f=Math.cos(t);return e[0]=f*n+u*i,e[1]=f*a+u*o,e[2]=f*s+u*A,e[3]=f*i-u*n,e[4]=f*o-u*a,e[5]=f*A-u*s,e[6]=d,e[7]=j,e[8]=l,e}function bs(e,r,t){var n=t[0],a=t[1];return e[0]=n*r[0],e[1]=n*r[1],e[2]=n*r[2],e[3]=a*r[3],e[4]=a*r[4],e[5]=a*r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e}function ys(e,r){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=r[0],e[7]=r[1],e[8]=1,e}function vs(e,r){var t=Math.sin(r),n=Math.cos(r);return e[0]=n,e[1]=t,e[2]=0,e[3]=-t,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Ds(e,r){return e[0]=r[0],e[1]=0,e[2]=0,e[3]=0,e[4]=r[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function $s(e,r){return e[0]=r[0],e[1]=r[1],e[2]=0,e[3]=r[2],e[4]=r[3],e[5]=0,e[6]=r[4],e[7]=r[5],e[8]=1,e}function Ms(e,r){var t=r[0],n=r[1],a=r[2],s=r[3],i=t+t,o=n+n,A=a+a,d=t*i,j=n*i,l=n*o,u=a*i,f=a*o,p=a*A,h=s*i,g=s*o,b=s*A;return e[0]=1-l-p,e[3]=j-b,e[6]=u+g,e[1]=j+b,e[4]=1-d-p,e[7]=f-h,e[2]=u-g,e[5]=f+h,e[8]=1-d-l,e}function ks(e,r){var t=r[0],n=r[1],a=r[2],s=r[3],i=r[4],o=r[5],A=r[6],d=r[7],j=r[8],l=r[9],u=r[10],f=r[11],p=r[12],h=r[13],g=r[14],b=r[15],v=t*o-n*i,$=t*A-a*i,D=t*d-s*i,k=n*A-a*o,O=n*d-s*o,_=a*d-s*A,I=j*h-l*p,P=j*g-u*p,w=j*b-f*p,F=l*g-u*h,C=l*b-f*h,q=u*b-f*g,R=v*q-$*C+D*F+k*w-O*P+_*I;return R?(R=1/R,e[0]=(o*q-A*C+d*F)*R,e[1]=(A*w-i*q-d*P)*R,e[2]=(i*C-o*w+d*I)*R,e[3]=(a*C-n*q-s*F)*R,e[4]=(t*q-a*w+s*P)*R,e[5]=(n*w-t*C-s*I)*R,e[6]=(h*_-g*O+b*k)*R,e[7]=(g*D-p*_-b*$)*R,e[8]=(p*O-h*D+b*v)*R,e):null}function Os(e,r,t){return e[0]=2/r,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/t,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Ps(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function xs(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function Ts(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e[2]=r[2]+t[2],e[3]=r[3]+t[3],e[4]=r[4]+t[4],e[5]=r[5]+t[5],e[6]=r[6]+t[6],e[7]=r[7]+t[7],e[8]=r[8]+t[8],e}function Cr(e,r,t){return e[0]=r[0]-t[0],e[1]=r[1]-t[1],e[2]=r[2]-t[2],e[3]=r[3]-t[3],e[4]=r[4]-t[4],e[5]=r[5]-t[5],e[6]=r[6]-t[6],e[7]=r[7]-t[7],e[8]=r[8]-t[8],e}function ws(e,r,t){return e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t,e[3]=r[3]*t,e[4]=r[4]*t,e[5]=r[5]*t,e[6]=r[6]*t,e[7]=r[7]*t,e[8]=r[8]*t,e}function _s(e,r,t,n){return e[0]=r[0]+t[0]*n,e[1]=r[1]+t[1]*n,e[2]=r[2]+t[2]*n,e[3]=r[3]+t[3]*n,e[4]=r[4]+t[4]*n,e[5]=r[5]+t[5]*n,e[6]=r[6]+t[6]*n,e[7]=r[7]+t[7]*n,e[8]=r[8]+t[8]*n,e}function Is(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]&&e[4]===r[4]&&e[5]===r[5]&&e[6]===r[6]&&e[7]===r[7]&&e[8]===r[8]}function Ss(e,r){var t=e[0],n=e[1],a=e[2],s=e[3],i=e[4],o=e[5],A=e[6],d=e[7],j=e[8],l=r[0],u=r[1],f=r[2],p=r[3],h=r[4],g=r[5],b=r[6],v=r[7],$=r[8];return Math.abs(t-l)<=V*Math.max(1,Math.abs(t),Math.abs(l))&&Math.abs(n-u)<=V*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-f)<=V*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(s-p)<=V*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(i-h)<=V*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(o-g)<=V*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(A-b)<=V*Math.max(1,Math.abs(A),Math.abs(b))&&Math.abs(d-v)<=V*Math.max(1,Math.abs(d),Math.abs(v))&&Math.abs(j-$)<=V*Math.max(1,Math.abs(j),Math.abs($))}var Rs=Fr,Fs=Cr;var S={};Ie(S,{add:()=>bi,adjoint:()=>Xs,clone:()=>qs,copy:()=>Ns,create:()=>Cs,determinant:()=>Ws,equals:()=>$i,exactEquals:()=>Di,frob:()=>Ei,fromQuat:()=>ci,fromQuat2:()=>ai,fromRotation:()=>ei,fromRotationTranslation:()=>Ur,fromRotationTranslationScale:()=>oi,fromRotationTranslationScaleOrigin:()=>Ai,fromScaling:()=>Js,fromTranslation:()=>Zs,fromValues:()=>Us,fromXRotation:()=>ti,fromYRotation:()=>ri,fromZRotation:()=>ni,frustum:()=>di,getRotation:()=>ii,getScaling:()=>Lr,getTranslation:()=>si,identity:()=>qr,invert:()=>Hs,lookAt:()=>hi,mul:()=>Mi,multiply:()=>Nr,multiplyScalar:()=>yi,multiplyScalarAndAdd:()=>vi,ortho:()=>fi,orthoNO:()=>Hr,orthoZO:()=>pi,perspective:()=>ji,perspectiveFromFieldOfView:()=>ui,perspectiveNO:()=>Vr,perspectiveZO:()=>li,rotate:()=>Qs,rotateX:()=>Ks,rotateY:()=>Ys,rotateZ:()=>zs,scale:()=>Gs,set:()=>Ls,str:()=>gi,sub:()=>ki,subtract:()=>Xr,targetTo:()=>mi,translate:()=>Bs,transpose:()=>Vs});function Cs(){var e=new K(16);return K!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function qs(e){var r=new K(16);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function Ns(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function Us(e,r,t,n,a,s,i,o,A,d,j,l,u,f,p,h){var g=new K(16);return g[0]=e,g[1]=r,g[2]=t,g[3]=n,g[4]=a,g[5]=s,g[6]=i,g[7]=o,g[8]=A,g[9]=d,g[10]=j,g[11]=l,g[12]=u,g[13]=f,g[14]=p,g[15]=h,g}function Ls(e,r,t,n,a,s,i,o,A,d,j,l,u,f,p,h,g){return e[0]=r,e[1]=t,e[2]=n,e[3]=a,e[4]=s,e[5]=i,e[6]=o,e[7]=A,e[8]=d,e[9]=j,e[10]=l,e[11]=u,e[12]=f,e[13]=p,e[14]=h,e[15]=g,e}function qr(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Vs(e,r){if(e===r){var t=r[1],n=r[2],a=r[3],s=r[6],i=r[7],o=r[11];e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=t,e[6]=r[9],e[7]=r[13],e[8]=n,e[9]=s,e[11]=r[14],e[12]=a,e[13]=i,e[14]=o}else e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=r[1],e[5]=r[5],e[6]=r[9],e[7]=r[13],e[8]=r[2],e[9]=r[6],e[10]=r[10],e[11]=r[14],e[12]=r[3],e[13]=r[7],e[14]=r[11],e[15]=r[15];return e}function Hs(e,r){var t=r[0],n=r[1],a=r[2],s=r[3],i=r[4],o=r[5],A=r[6],d=r[7],j=r[8],l=r[9],u=r[10],f=r[11],p=r[12],h=r[13],g=r[14],b=r[15],v=t*o-n*i,$=t*A-a*i,D=t*d-s*i,k=n*A-a*o,O=n*d-s*o,_=a*d-s*A,I=j*h-l*p,P=j*g-u*p,w=j*b-f*p,F=l*g-u*h,C=l*b-f*h,q=u*b-f*g,R=v*q-$*C+D*F+k*w-O*P+_*I;return R?(R=1/R,e[0]=(o*q-A*C+d*F)*R,e[1]=(a*C-n*q-s*F)*R,e[2]=(h*_-g*O+b*k)*R,e[3]=(u*O-l*_-f*k)*R,e[4]=(A*w-i*q-d*P)*R,e[5]=(t*q-a*w+s*P)*R,e[6]=(g*D-p*_-b*$)*R,e[7]=(j*_-u*D+f*$)*R,e[8]=(i*C-o*w+d*I)*R,e[9]=(n*w-t*C-s*I)*R,e[10]=(p*O-h*D+b*v)*R,e[11]=(l*D-j*O-f*v)*R,e[12]=(o*P-i*F-A*I)*R,e[13]=(t*F-n*P+a*I)*R,e[14]=(h*$-p*k-g*v)*R,e[15]=(j*k-l*$+u*v)*R,e):null}function Xs(e,r){var t=r[0],n=r[1],a=r[2],s=r[3],i=r[4],o=r[5],A=r[6],d=r[7],j=r[8],l=r[9],u=r[10],f=r[11],p=r[12],h=r[13],g=r[14],b=r[15];return e[0]=o*(u*b-f*g)-l*(A*b-d*g)+h*(A*f-d*u),e[1]=-(n*(u*b-f*g)-l*(a*b-s*g)+h*(a*f-s*u)),e[2]=n*(A*b-d*g)-o*(a*b-s*g)+h*(a*d-s*A),e[3]=-(n*(A*f-d*u)-o*(a*f-s*u)+l*(a*d-s*A)),e[4]=-(i*(u*b-f*g)-j*(A*b-d*g)+p*(A*f-d*u)),e[5]=t*(u*b-f*g)-j*(a*b-s*g)+p*(a*f-s*u),e[6]=-(t*(A*b-d*g)-i*(a*b-s*g)+p*(a*d-s*A)),e[7]=t*(A*f-d*u)-i*(a*f-s*u)+j*(a*d-s*A),e[8]=i*(l*b-f*h)-j*(o*b-d*h)+p*(o*f-d*l),e[9]=-(t*(l*b-f*h)-j*(n*b-s*h)+p*(n*f-s*l)),e[10]=t*(o*b-d*h)-i*(n*b-s*h)+p*(n*d-s*o),e[11]=-(t*(o*f-d*l)-i*(n*f-s*l)+j*(n*d-s*o)),e[12]=-(i*(l*g-u*h)-j*(o*g-A*h)+p*(o*u-A*l)),e[13]=t*(l*g-u*h)-j*(n*g-a*h)+p*(n*u-a*l),e[14]=-(t*(o*g-A*h)-i*(n*g-a*h)+p*(n*A-a*o)),e[15]=t*(o*u-A*l)-i*(n*u-a*l)+j*(n*A-a*o),e}function Ws(e){var r=e[0],t=e[1],n=e[2],a=e[3],s=e[4],i=e[5],o=e[6],A=e[7],d=e[8],j=e[9],l=e[10],u=e[11],f=e[12],p=e[13],h=e[14],g=e[15],b=r*i-t*s,v=r*o-n*s,$=r*A-a*s,D=t*o-n*i,k=t*A-a*i,O=n*A-a*o,_=d*p-j*f,I=d*h-l*f,P=d*g-u*f,w=j*h-l*p,F=j*g-u*p,C=l*g-u*h;return b*C-v*F+$*w+D*P-k*I+O*_}function Nr(e,r,t){var n=r[0],a=r[1],s=r[2],i=r[3],o=r[4],A=r[5],d=r[6],j=r[7],l=r[8],u=r[9],f=r[10],p=r[11],h=r[12],g=r[13],b=r[14],v=r[15],$=t[0],D=t[1],k=t[2],O=t[3];return e[0]=$*n+D*o+k*l+O*h,e[1]=$*a+D*A+k*u+O*g,e[2]=$*s+D*d+k*f+O*b,e[3]=$*i+D*j+k*p+O*v,$=t[4],D=t[5],k=t[6],O=t[7],e[4]=$*n+D*o+k*l+O*h,e[5]=$*a+D*A+k*u+O*g,e[6]=$*s+D*d+k*f+O*b,e[7]=$*i+D*j+k*p+O*v,$=t[8],D=t[9],k=t[10],O=t[11],e[8]=$*n+D*o+k*l+O*h,e[9]=$*a+D*A+k*u+O*g,e[10]=$*s+D*d+k*f+O*b,e[11]=$*i+D*j+k*p+O*v,$=t[12],D=t[13],k=t[14],O=t[15],e[12]=$*n+D*o+k*l+O*h,e[13]=$*a+D*A+k*u+O*g,e[14]=$*s+D*d+k*f+O*b,e[15]=$*i+D*j+k*p+O*v,e}function Bs(e,r,t){var n=t[0],a=t[1],s=t[2],i,o,A,d,j,l,u,f,p,h,g,b;return r===e?(e[12]=r[0]*n+r[4]*a+r[8]*s+r[12],e[13]=r[1]*n+r[5]*a+r[9]*s+r[13],e[14]=r[2]*n+r[6]*a+r[10]*s+r[14],e[15]=r[3]*n+r[7]*a+r[11]*s+r[15]):(i=r[0],o=r[1],A=r[2],d=r[3],j=r[4],l=r[5],u=r[6],f=r[7],p=r[8],h=r[9],g=r[10],b=r[11],e[0]=i,e[1]=o,e[2]=A,e[3]=d,e[4]=j,e[5]=l,e[6]=u,e[7]=f,e[8]=p,e[9]=h,e[10]=g,e[11]=b,e[12]=i*n+j*a+p*s+r[12],e[13]=o*n+l*a+h*s+r[13],e[14]=A*n+u*a+g*s+r[14],e[15]=d*n+f*a+b*s+r[15]),e}function Gs(e,r,t){var n=t[0],a=t[1],s=t[2];return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e[3]=r[3]*n,e[4]=r[4]*a,e[5]=r[5]*a,e[6]=r[6]*a,e[7]=r[7]*a,e[8]=r[8]*s,e[9]=r[9]*s,e[10]=r[10]*s,e[11]=r[11]*s,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function Qs(e,r,t,n){var a=n[0],s=n[1],i=n[2],o=Math.hypot(a,s,i),A,d,j,l,u,f,p,h,g,b,v,$,D,k,O,_,I,P,w,F,C,q,R,G;return o<V?null:(o=1/o,a*=o,s*=o,i*=o,A=Math.sin(t),d=Math.cos(t),j=1-d,l=r[0],u=r[1],f=r[2],p=r[3],h=r[4],g=r[5],b=r[6],v=r[7],$=r[8],D=r[9],k=r[10],O=r[11],_=a*a*j+d,I=s*a*j+i*A,P=i*a*j-s*A,w=a*s*j-i*A,F=s*s*j+d,C=i*s*j+a*A,q=a*i*j+s*A,R=s*i*j-a*A,G=i*i*j+d,e[0]=l*_+h*I+$*P,e[1]=u*_+g*I+D*P,e[2]=f*_+b*I+k*P,e[3]=p*_+v*I+O*P,e[4]=l*w+h*F+$*C,e[5]=u*w+g*F+D*C,e[6]=f*w+b*F+k*C,e[7]=p*w+v*F+O*C,e[8]=l*q+h*R+$*G,e[9]=u*q+g*R+D*G,e[10]=f*q+b*R+k*G,e[11]=p*q+v*R+O*G,r!==e&&(e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e)}function Ks(e,r,t){var n=Math.sin(t),a=Math.cos(t),s=r[4],i=r[5],o=r[6],A=r[7],d=r[8],j=r[9],l=r[10],u=r[11];return r!==e&&(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[4]=s*a+d*n,e[5]=i*a+j*n,e[6]=o*a+l*n,e[7]=A*a+u*n,e[8]=d*a-s*n,e[9]=j*a-i*n,e[10]=l*a-o*n,e[11]=u*a-A*n,e}function Ys(e,r,t){var n=Math.sin(t),a=Math.cos(t),s=r[0],i=r[1],o=r[2],A=r[3],d=r[8],j=r[9],l=r[10],u=r[11];return r!==e&&(e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=s*a-d*n,e[1]=i*a-j*n,e[2]=o*a-l*n,e[3]=A*a-u*n,e[8]=s*n+d*a,e[9]=i*n+j*a,e[10]=o*n+l*a,e[11]=A*n+u*a,e}function zs(e,r,t){var n=Math.sin(t),a=Math.cos(t),s=r[0],i=r[1],o=r[2],A=r[3],d=r[4],j=r[5],l=r[6],u=r[7];return r!==e&&(e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=s*a+d*n,e[1]=i*a+j*n,e[2]=o*a+l*n,e[3]=A*a+u*n,e[4]=d*a-s*n,e[5]=j*a-i*n,e[6]=l*a-o*n,e[7]=u*a-A*n,e}function Zs(e,r){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Js(e,r){return e[0]=r[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=r[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ei(e,r,t){var n=t[0],a=t[1],s=t[2],i=Math.hypot(n,a,s),o,A,d;return i<V?null:(i=1/i,n*=i,a*=i,s*=i,o=Math.sin(r),A=Math.cos(r),d=1-A,e[0]=n*n*d+A,e[1]=a*n*d+s*o,e[2]=s*n*d-a*o,e[3]=0,e[4]=n*a*d-s*o,e[5]=a*a*d+A,e[6]=s*a*d+n*o,e[7]=0,e[8]=n*s*d+a*o,e[9]=a*s*d-n*o,e[10]=s*s*d+A,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function ti(e,r){var t=Math.sin(r),n=Math.cos(r);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=t,e[7]=0,e[8]=0,e[9]=-t,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ri(e,r){var t=Math.sin(r),n=Math.cos(r);return e[0]=n,e[1]=0,e[2]=-t,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=t,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ni(e,r){var t=Math.sin(r),n=Math.cos(r);return e[0]=n,e[1]=t,e[2]=0,e[3]=0,e[4]=-t,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ur(e,r,t){var n=r[0],a=r[1],s=r[2],i=r[3],o=n+n,A=a+a,d=s+s,j=n*o,l=n*A,u=n*d,f=a*A,p=a*d,h=s*d,g=i*o,b=i*A,v=i*d;return e[0]=1-(f+h),e[1]=l+v,e[2]=u-b,e[3]=0,e[4]=l-v,e[5]=1-(j+h),e[6]=p+g,e[7]=0,e[8]=u+b,e[9]=p-g,e[10]=1-(j+f),e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function ai(e,r){var t=new K(3),n=-r[0],a=-r[1],s=-r[2],i=r[3],o=r[4],A=r[5],d=r[6],j=r[7],l=n*n+a*a+s*s+i*i;return l>0?(t[0]=(o*i+j*n+A*s-d*a)*2/l,t[1]=(A*i+j*a+d*n-o*s)*2/l,t[2]=(d*i+j*s+o*a-A*n)*2/l):(t[0]=(o*i+j*n+A*s-d*a)*2,t[1]=(A*i+j*a+d*n-o*s)*2,t[2]=(d*i+j*s+o*a-A*n)*2),Ur(e,r,t),e}function si(e,r){return e[0]=r[12],e[1]=r[13],e[2]=r[14],e}function Lr(e,r){var t=r[0],n=r[1],a=r[2],s=r[4],i=r[5],o=r[6],A=r[8],d=r[9],j=r[10];return e[0]=Math.hypot(t,n,a),e[1]=Math.hypot(s,i,o),e[2]=Math.hypot(A,d,j),e}function ii(e,r){var t=new K(3);Lr(t,r);var n=1/t[0],a=1/t[1],s=1/t[2],i=r[0]*n,o=r[1]*a,A=r[2]*s,d=r[4]*n,j=r[5]*a,l=r[6]*s,u=r[8]*n,f=r[9]*a,p=r[10]*s,h=i+j+p,g=0;return h>0?(g=Math.sqrt(h+1)*2,e[3]=.25*g,e[0]=(l-f)/g,e[1]=(u-A)/g,e[2]=(o-d)/g):i>j&&i>p?(g=Math.sqrt(1+i-j-p)*2,e[3]=(l-f)/g,e[0]=.25*g,e[1]=(o+d)/g,e[2]=(u+A)/g):j>p?(g=Math.sqrt(1+j-i-p)*2,e[3]=(u-A)/g,e[0]=(o+d)/g,e[1]=.25*g,e[2]=(l+f)/g):(g=Math.sqrt(1+p-i-j)*2,e[3]=(o-d)/g,e[0]=(u+A)/g,e[1]=(l+f)/g,e[2]=.25*g),e}function oi(e,r,t,n){var a=r[0],s=r[1],i=r[2],o=r[3],A=a+a,d=s+s,j=i+i,l=a*A,u=a*d,f=a*j,p=s*d,h=s*j,g=i*j,b=o*A,v=o*d,$=o*j,D=n[0],k=n[1],O=n[2];return e[0]=(1-(p+g))*D,e[1]=(u+$)*D,e[2]=(f-v)*D,e[3]=0,e[4]=(u-$)*k,e[5]=(1-(l+g))*k,e[6]=(h+b)*k,e[7]=0,e[8]=(f+v)*O,e[9]=(h-b)*O,e[10]=(1-(l+p))*O,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Ai(e,r,t,n,a){var s=r[0],i=r[1],o=r[2],A=r[3],d=s+s,j=i+i,l=o+o,u=s*d,f=s*j,p=s*l,h=i*j,g=i*l,b=o*l,v=A*d,$=A*j,D=A*l,k=n[0],O=n[1],_=n[2],I=a[0],P=a[1],w=a[2],F=(1-(h+b))*k,C=(f+D)*k,q=(p-$)*k,R=(f-D)*O,G=(1-(u+b))*O,J=(g+v)*O,ue=(p+$)*_,ae=(g-v)*_,oe=(1-(u+h))*_;return e[0]=F,e[1]=C,e[2]=q,e[3]=0,e[4]=R,e[5]=G,e[6]=J,e[7]=0,e[8]=ue,e[9]=ae,e[10]=oe,e[11]=0,e[12]=t[0]+I-(F*I+R*P+ue*w),e[13]=t[1]+P-(C*I+G*P+ae*w),e[14]=t[2]+w-(q*I+J*P+oe*w),e[15]=1,e}function ci(e,r){var t=r[0],n=r[1],a=r[2],s=r[3],i=t+t,o=n+n,A=a+a,d=t*i,j=n*i,l=n*o,u=a*i,f=a*o,p=a*A,h=s*i,g=s*o,b=s*A;return e[0]=1-l-p,e[1]=j+b,e[2]=u-g,e[3]=0,e[4]=j-b,e[5]=1-d-p,e[6]=f+h,e[7]=0,e[8]=u+g,e[9]=f-h,e[10]=1-d-l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function di(e,r,t,n,a,s,i){var o=1/(t-r),A=1/(a-n),d=1/(s-i);return e[0]=s*2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s*2*A,e[6]=0,e[7]=0,e[8]=(t+r)*o,e[9]=(a+n)*A,e[10]=(i+s)*d,e[11]=-1,e[12]=0,e[13]=0,e[14]=i*s*2*d,e[15]=0,e}function Vr(e,r,t,n,a){var s=1/Math.tan(r/2),i;return e[0]=s/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,a!=null&&a!==1/0?(i=1/(n-a),e[10]=(a+n)*i,e[14]=2*a*n*i):(e[10]=-1,e[14]=-2*n),e}var ji=Vr;function li(e,r,t,n,a){var s=1/Math.tan(r/2),i;return e[0]=s/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,a!=null&&a!==1/0?(i=1/(n-a),e[10]=a*i,e[14]=a*n*i):(e[10]=-1,e[14]=-n),e}function ui(e,r,t,n){var a=Math.tan(r.upDegrees*Math.PI/180),s=Math.tan(r.downDegrees*Math.PI/180),i=Math.tan(r.leftDegrees*Math.PI/180),o=Math.tan(r.rightDegrees*Math.PI/180),A=2/(i+o),d=2/(a+s);return e[0]=A,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=d,e[6]=0,e[7]=0,e[8]=-((i-o)*A*.5),e[9]=(a-s)*d*.5,e[10]=n/(t-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*t/(t-n),e[15]=0,e}function Hr(e,r,t,n,a,s,i){var o=1/(r-t),A=1/(n-a),d=1/(s-i);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*A,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*d,e[11]=0,e[12]=(r+t)*o,e[13]=(a+n)*A,e[14]=(i+s)*d,e[15]=1,e}var fi=Hr;function pi(e,r,t,n,a,s,i){var o=1/(r-t),A=1/(n-a),d=1/(s-i);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*A,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=d,e[11]=0,e[12]=(r+t)*o,e[13]=(a+n)*A,e[14]=s*d,e[15]=1,e}function hi(e,r,t,n){var a,s,i,o,A,d,j,l,u,f,p=r[0],h=r[1],g=r[2],b=n[0],v=n[1],$=n[2],D=t[0],k=t[1],O=t[2];return Math.abs(p-D)<V&&Math.abs(h-k)<V&&Math.abs(g-O)<V?qr(e):(j=p-D,l=h-k,u=g-O,f=1/Math.hypot(j,l,u),j*=f,l*=f,u*=f,a=v*u-$*l,s=$*j-b*u,i=b*l-v*j,f=Math.hypot(a,s,i),f?(f=1/f,a*=f,s*=f,i*=f):(a=0,s=0,i=0),o=l*i-u*s,A=u*a-j*i,d=j*s-l*a,f=Math.hypot(o,A,d),f?(f=1/f,o*=f,A*=f,d*=f):(o=0,A=0,d=0),e[0]=a,e[1]=o,e[2]=j,e[3]=0,e[4]=s,e[5]=A,e[6]=l,e[7]=0,e[8]=i,e[9]=d,e[10]=u,e[11]=0,e[12]=-(a*p+s*h+i*g),e[13]=-(o*p+A*h+d*g),e[14]=-(j*p+l*h+u*g),e[15]=1,e)}function mi(e,r,t,n){var a=r[0],s=r[1],i=r[2],o=n[0],A=n[1],d=n[2],j=a-t[0],l=s-t[1],u=i-t[2],f=j*j+l*l+u*u;f>0&&(f=1/Math.sqrt(f),j*=f,l*=f,u*=f);var p=A*u-d*l,h=d*j-o*u,g=o*l-A*j;return f=p*p+h*h+g*g,f>0&&(f=1/Math.sqrt(f),p*=f,h*=f,g*=f),e[0]=p,e[1]=h,e[2]=g,e[3]=0,e[4]=l*g-u*h,e[5]=u*p-j*g,e[6]=j*h-l*p,e[7]=0,e[8]=j,e[9]=l,e[10]=u,e[11]=0,e[12]=a,e[13]=s,e[14]=i,e[15]=1,e}function gi(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Ei(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function bi(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e[2]=r[2]+t[2],e[3]=r[3]+t[3],e[4]=r[4]+t[4],e[5]=r[5]+t[5],e[6]=r[6]+t[6],e[7]=r[7]+t[7],e[8]=r[8]+t[8],e[9]=r[9]+t[9],e[10]=r[10]+t[10],e[11]=r[11]+t[11],e[12]=r[12]+t[12],e[13]=r[13]+t[13],e[14]=r[14]+t[14],e[15]=r[15]+t[15],e}function Xr(e,r,t){return e[0]=r[0]-t[0],e[1]=r[1]-t[1],e[2]=r[2]-t[2],e[3]=r[3]-t[3],e[4]=r[4]-t[4],e[5]=r[5]-t[5],e[6]=r[6]-t[6],e[7]=r[7]-t[7],e[8]=r[8]-t[8],e[9]=r[9]-t[9],e[10]=r[10]-t[10],e[11]=r[11]-t[11],e[12]=r[12]-t[12],e[13]=r[13]-t[13],e[14]=r[14]-t[14],e[15]=r[15]-t[15],e}function yi(e,r,t){return e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t,e[3]=r[3]*t,e[4]=r[4]*t,e[5]=r[5]*t,e[6]=r[6]*t,e[7]=r[7]*t,e[8]=r[8]*t,e[9]=r[9]*t,e[10]=r[10]*t,e[11]=r[11]*t,e[12]=r[12]*t,e[13]=r[13]*t,e[14]=r[14]*t,e[15]=r[15]*t,e}function vi(e,r,t,n){return e[0]=r[0]+t[0]*n,e[1]=r[1]+t[1]*n,e[2]=r[2]+t[2]*n,e[3]=r[3]+t[3]*n,e[4]=r[4]+t[4]*n,e[5]=r[5]+t[5]*n,e[6]=r[6]+t[6]*n,e[7]=r[7]+t[7]*n,e[8]=r[8]+t[8]*n,e[9]=r[9]+t[9]*n,e[10]=r[10]+t[10]*n,e[11]=r[11]+t[11]*n,e[12]=r[12]+t[12]*n,e[13]=r[13]+t[13]*n,e[14]=r[14]+t[14]*n,e[15]=r[15]+t[15]*n,e}function Di(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]&&e[4]===r[4]&&e[5]===r[5]&&e[6]===r[6]&&e[7]===r[7]&&e[8]===r[8]&&e[9]===r[9]&&e[10]===r[10]&&e[11]===r[11]&&e[12]===r[12]&&e[13]===r[13]&&e[14]===r[14]&&e[15]===r[15]}function $i(e,r){var t=e[0],n=e[1],a=e[2],s=e[3],i=e[4],o=e[5],A=e[6],d=e[7],j=e[8],l=e[9],u=e[10],f=e[11],p=e[12],h=e[13],g=e[14],b=e[15],v=r[0],$=r[1],D=r[2],k=r[3],O=r[4],_=r[5],I=r[6],P=r[7],w=r[8],F=r[9],C=r[10],q=r[11],R=r[12],G=r[13],J=r[14],ue=r[15];return Math.abs(t-v)<=V*Math.max(1,Math.abs(t),Math.abs(v))&&Math.abs(n-$)<=V*Math.max(1,Math.abs(n),Math.abs($))&&Math.abs(a-D)<=V*Math.max(1,Math.abs(a),Math.abs(D))&&Math.abs(s-k)<=V*Math.max(1,Math.abs(s),Math.abs(k))&&Math.abs(i-O)<=V*Math.max(1,Math.abs(i),Math.abs(O))&&Math.abs(o-_)<=V*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(A-I)<=V*Math.max(1,Math.abs(A),Math.abs(I))&&Math.abs(d-P)<=V*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(j-w)<=V*Math.max(1,Math.abs(j),Math.abs(w))&&Math.abs(l-F)<=V*Math.max(1,Math.abs(l),Math.abs(F))&&Math.abs(u-C)<=V*Math.max(1,Math.abs(u),Math.abs(C))&&Math.abs(f-q)<=V*Math.max(1,Math.abs(f),Math.abs(q))&&Math.abs(p-R)<=V*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(h-G)<=V*Math.max(1,Math.abs(h),Math.abs(G))&&Math.abs(g-J)<=V*Math.max(1,Math.abs(g),Math.abs(J))&&Math.abs(b-ue)<=V*Math.max(1,Math.abs(b),Math.abs(ue))}var Mi=Nr,ki=Xr;var c={};Ie(c,{add:()=>wi,angle:()=>Ji,bezier:()=>Wi,ceil:()=>_i,clone:()=>Oi,copy:()=>xi,create:()=>Wr,cross:()=>Vi,dist:()=>oo,distance:()=>Yr,div:()=>io,divide:()=>Kr,dot:()=>Jr,equals:()=>no,exactEquals:()=>ro,floor:()=>Ii,forEach:()=>lo,fromValues:()=>Pi,hermite:()=>Xi,inverse:()=>Ui,len:()=>co,length:()=>Br,lerp:()=>Hi,max:()=>Ri,min:()=>Si,mul:()=>so,multiply:()=>Qr,negate:()=>Ni,normalize:()=>Li,random:()=>Bi,rotateX:()=>Yi,rotateY:()=>zi,rotateZ:()=>Zi,round:()=>Fi,scale:()=>Ci,scaleAndAdd:()=>qi,set:()=>Ti,sqrDist:()=>Ao,sqrLen:()=>jo,squaredDistance:()=>zr,squaredLength:()=>Zr,str:()=>to,sub:()=>ao,subtract:()=>Gr,transformMat3:()=>Qi,transformMat4:()=>Gi,transformQuat:()=>Ki,zero:()=>eo});function Wr(){var e=new K(3);return K!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Oi(e){var r=new K(3);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}function Br(e){var r=e[0],t=e[1],n=e[2];return Math.hypot(r,t,n)}function Pi(e,r,t){var n=new K(3);return n[0]=e,n[1]=r,n[2]=t,n}function xi(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function Ti(e,r,t,n){return e[0]=r,e[1]=t,e[2]=n,e}function wi(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e[2]=r[2]+t[2],e}function Gr(e,r,t){return e[0]=r[0]-t[0],e[1]=r[1]-t[1],e[2]=r[2]-t[2],e}function Qr(e,r,t){return e[0]=r[0]*t[0],e[1]=r[1]*t[1],e[2]=r[2]*t[2],e}function Kr(e,r,t){return e[0]=r[0]/t[0],e[1]=r[1]/t[1],e[2]=r[2]/t[2],e}function _i(e,r){return e[0]=Math.ceil(r[0]),e[1]=Math.ceil(r[1]),e[2]=Math.ceil(r[2]),e}function Ii(e,r){return e[0]=Math.floor(r[0]),e[1]=Math.floor(r[1]),e[2]=Math.floor(r[2]),e}function Si(e,r,t){return e[0]=Math.min(r[0],t[0]),e[1]=Math.min(r[1],t[1]),e[2]=Math.min(r[2],t[2]),e}function Ri(e,r,t){return e[0]=Math.max(r[0],t[0]),e[1]=Math.max(r[1],t[1]),e[2]=Math.max(r[2],t[2]),e}function Fi(e,r){return e[0]=Math.round(r[0]),e[1]=Math.round(r[1]),e[2]=Math.round(r[2]),e}function Ci(e,r,t){return e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t,e}function qi(e,r,t,n){return e[0]=r[0]+t[0]*n,e[1]=r[1]+t[1]*n,e[2]=r[2]+t[2]*n,e}function Yr(e,r){var t=r[0]-e[0],n=r[1]-e[1],a=r[2]-e[2];return Math.hypot(t,n,a)}function zr(e,r){var t=r[0]-e[0],n=r[1]-e[1],a=r[2]-e[2];return t*t+n*n+a*a}function Zr(e){var r=e[0],t=e[1],n=e[2];return r*r+t*t+n*n}function Ni(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e}function Ui(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e}function Li(e,r){var t=r[0],n=r[1],a=r[2],s=t*t+n*n+a*a;return s>0&&(s=1/Math.sqrt(s)),e[0]=r[0]*s,e[1]=r[1]*s,e[2]=r[2]*s,e}function Jr(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}function Vi(e,r,t){var n=r[0],a=r[1],s=r[2],i=t[0],o=t[1],A=t[2];return e[0]=a*A-s*o,e[1]=s*i-n*A,e[2]=n*o-a*i,e}function Hi(e,r,t,n){var a=r[0],s=r[1],i=r[2];return e[0]=a+n*(t[0]-a),e[1]=s+n*(t[1]-s),e[2]=i+n*(t[2]-i),e}function Xi(e,r,t,n,a,s){var i=s*s,o=i*(2*s-3)+1,A=i*(s-2)+s,d=i*(s-1),j=i*(3-2*s);return e[0]=r[0]*o+t[0]*A+n[0]*d+a[0]*j,e[1]=r[1]*o+t[1]*A+n[1]*d+a[1]*j,e[2]=r[2]*o+t[2]*A+n[2]*d+a[2]*j,e}function Wi(e,r,t,n,a,s){var i=1-s,o=i*i,A=s*s,d=o*i,j=3*s*o,l=3*A*i,u=A*s;return e[0]=r[0]*d+t[0]*j+n[0]*l+a[0]*u,e[1]=r[1]*d+t[1]*j+n[1]*l+a[1]*u,e[2]=r[2]*d+t[2]*j+n[2]*l+a[2]*u,e}function Bi(e,r){r=r||1;var t=pe()*2*Math.PI,n=pe()*2-1,a=Math.sqrt(1-n*n)*r;return e[0]=Math.cos(t)*a,e[1]=Math.sin(t)*a,e[2]=n*r,e}function Gi(e,r,t){var n=r[0],a=r[1],s=r[2],i=t[3]*n+t[7]*a+t[11]*s+t[15];return i=i||1,e[0]=(t[0]*n+t[4]*a+t[8]*s+t[12])/i,e[1]=(t[1]*n+t[5]*a+t[9]*s+t[13])/i,e[2]=(t[2]*n+t[6]*a+t[10]*s+t[14])/i,e}function Qi(e,r,t){var n=r[0],a=r[1],s=r[2];return e[0]=n*t[0]+a*t[3]+s*t[6],e[1]=n*t[1]+a*t[4]+s*t[7],e[2]=n*t[2]+a*t[5]+s*t[8],e}function Ki(e,r,t){var n=t[0],a=t[1],s=t[2],i=t[3],o=r[0],A=r[1],d=r[2],j=a*d-s*A,l=s*o-n*d,u=n*A-a*o,f=a*u-s*l,p=s*j-n*u,h=n*l-a*j,g=i*2;return j*=g,l*=g,u*=g,f*=2,p*=2,h*=2,e[0]=o+j+f,e[1]=A+l+p,e[2]=d+u+h,e}function Yi(e,r,t,n){var a=[],s=[];return a[0]=r[0]-t[0],a[1]=r[1]-t[1],a[2]=r[2]-t[2],s[0]=a[0],s[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),s[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),e[0]=s[0]+t[0],e[1]=s[1]+t[1],e[2]=s[2]+t[2],e}function zi(e,r,t,n){var a=[],s=[];return a[0]=r[0]-t[0],a[1]=r[1]-t[1],a[2]=r[2]-t[2],s[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),s[1]=a[1],s[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),e[0]=s[0]+t[0],e[1]=s[1]+t[1],e[2]=s[2]+t[2],e}function Zi(e,r,t,n){var a=[],s=[];return a[0]=r[0]-t[0],a[1]=r[1]-t[1],a[2]=r[2]-t[2],s[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),s[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),s[2]=a[2],e[0]=s[0]+t[0],e[1]=s[1]+t[1],e[2]=s[2]+t[2],e}function Ji(e,r){var t=e[0],n=e[1],a=e[2],s=r[0],i=r[1],o=r[2],A=Math.sqrt(t*t+n*n+a*a),d=Math.sqrt(s*s+i*i+o*o),j=A*d,l=j&&Jr(e,r)/j;return Math.acos(Math.min(Math.max(l,-1),1))}function eo(e){return e[0]=0,e[1]=0,e[2]=0,e}function to(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function ro(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]}function no(e,r){var t=e[0],n=e[1],a=e[2],s=r[0],i=r[1],o=r[2];return Math.abs(t-s)<=V*Math.max(1,Math.abs(t),Math.abs(s))&&Math.abs(n-i)<=V*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(a-o)<=V*Math.max(1,Math.abs(a),Math.abs(o))}var ao=Gr,so=Qr,io=Kr,oo=Yr,Ao=zr,co=Br,jo=Zr,lo=function(){var e=Wr();return function(r,t,n,a,s,i){var o,A;for(t||(t=3),n||(n=0),a?A=Math.min(a*t+n,r.length):A=r.length,o=n;o<A;o+=t)e[0]=r[o],e[1]=r[o+1],e[2]=r[o+2],s(e,e,i),r[o]=e[0],r[o+1]=e[1],r[o+2]=e[2];return r}}();var Re={};Ie(Re,{add:()=>mo,ceil:()=>go,clone:()=>uo,copy:()=>po,create:()=>en,cross:()=>xo,dist:()=>Lo,distance:()=>an,div:()=>Uo,divide:()=>nn,dot:()=>Po,equals:()=>Co,exactEquals:()=>Fo,floor:()=>Eo,forEach:()=>Wo,fromValues:()=>fo,inverse:()=>ko,len:()=>Ho,length:()=>on,lerp:()=>To,max:()=>yo,min:()=>bo,mul:()=>No,multiply:()=>rn,negate:()=>Mo,normalize:()=>Oo,random:()=>wo,round:()=>vo,scale:()=>Do,scaleAndAdd:()=>$o,set:()=>ho,sqrDist:()=>Vo,sqrLen:()=>Xo,squaredDistance:()=>sn,squaredLength:()=>An,str:()=>Ro,sub:()=>qo,subtract:()=>tn,transformMat4:()=>_o,transformQuat:()=>Io,zero:()=>So});function en(){var e=new K(4);return K!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function uo(e){var r=new K(4);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}function fo(e,r,t,n){var a=new K(4);return a[0]=e,a[1]=r,a[2]=t,a[3]=n,a}function po(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function ho(e,r,t,n,a){return e[0]=r,e[1]=t,e[2]=n,e[3]=a,e}function mo(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e[2]=r[2]+t[2],e[3]=r[3]+t[3],e}function tn(e,r,t){return e[0]=r[0]-t[0],e[1]=r[1]-t[1],e[2]=r[2]-t[2],e[3]=r[3]-t[3],e}function rn(e,r,t){return e[0]=r[0]*t[0],e[1]=r[1]*t[1],e[2]=r[2]*t[2],e[3]=r[3]*t[3],e}function nn(e,r,t){return e[0]=r[0]/t[0],e[1]=r[1]/t[1],e[2]=r[2]/t[2],e[3]=r[3]/t[3],e}function go(e,r){return e[0]=Math.ceil(r[0]),e[1]=Math.ceil(r[1]),e[2]=Math.ceil(r[2]),e[3]=Math.ceil(r[3]),e}function Eo(e,r){return e[0]=Math.floor(r[0]),e[1]=Math.floor(r[1]),e[2]=Math.floor(r[2]),e[3]=Math.floor(r[3]),e}function bo(e,r,t){return e[0]=Math.min(r[0],t[0]),e[1]=Math.min(r[1],t[1]),e[2]=Math.min(r[2],t[2]),e[3]=Math.min(r[3],t[3]),e}function yo(e,r,t){return e[0]=Math.max(r[0],t[0]),e[1]=Math.max(r[1],t[1]),e[2]=Math.max(r[2],t[2]),e[3]=Math.max(r[3],t[3]),e}function vo(e,r){return e[0]=Math.round(r[0]),e[1]=Math.round(r[1]),e[2]=Math.round(r[2]),e[3]=Math.round(r[3]),e}function Do(e,r,t){return e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t,e[3]=r[3]*t,e}function $o(e,r,t,n){return e[0]=r[0]+t[0]*n,e[1]=r[1]+t[1]*n,e[2]=r[2]+t[2]*n,e[3]=r[3]+t[3]*n,e}function an(e,r){var t=r[0]-e[0],n=r[1]-e[1],a=r[2]-e[2],s=r[3]-e[3];return Math.hypot(t,n,a,s)}function sn(e,r){var t=r[0]-e[0],n=r[1]-e[1],a=r[2]-e[2],s=r[3]-e[3];return t*t+n*n+a*a+s*s}function on(e){var r=e[0],t=e[1],n=e[2],a=e[3];return Math.hypot(r,t,n,a)}function An(e){var r=e[0],t=e[1],n=e[2],a=e[3];return r*r+t*t+n*n+a*a}function Mo(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e[3]=-r[3],e}function ko(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e[3]=1/r[3],e}function Oo(e,r){var t=r[0],n=r[1],a=r[2],s=r[3],i=t*t+n*n+a*a+s*s;return i>0&&(i=1/Math.sqrt(i)),e[0]=t*i,e[1]=n*i,e[2]=a*i,e[3]=s*i,e}function Po(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3]}function xo(e,r,t,n){var a=t[0]*n[1]-t[1]*n[0],s=t[0]*n[2]-t[2]*n[0],i=t[0]*n[3]-t[3]*n[0],o=t[1]*n[2]-t[2]*n[1],A=t[1]*n[3]-t[3]*n[1],d=t[2]*n[3]-t[3]*n[2],j=r[0],l=r[1],u=r[2],f=r[3];return e[0]=l*d-u*A+f*o,e[1]=-(j*d)+u*i-f*s,e[2]=j*A-l*i+f*a,e[3]=-(j*o)+l*s-u*a,e}function To(e,r,t,n){var a=r[0],s=r[1],i=r[2],o=r[3];return e[0]=a+n*(t[0]-a),e[1]=s+n*(t[1]-s),e[2]=i+n*(t[2]-i),e[3]=o+n*(t[3]-o),e}function wo(e,r){r=r||1;var t,n,a,s,i,o;do t=pe()*2-1,n=pe()*2-1,i=t*t+n*n;while(i>=1);do a=pe()*2-1,s=pe()*2-1,o=a*a+s*s;while(o>=1);var A=Math.sqrt((1-i)/o);return e[0]=r*t,e[1]=r*n,e[2]=r*a*A,e[3]=r*s*A,e}function _o(e,r,t){var n=r[0],a=r[1],s=r[2],i=r[3];return e[0]=t[0]*n+t[4]*a+t[8]*s+t[12]*i,e[1]=t[1]*n+t[5]*a+t[9]*s+t[13]*i,e[2]=t[2]*n+t[6]*a+t[10]*s+t[14]*i,e[3]=t[3]*n+t[7]*a+t[11]*s+t[15]*i,e}function Io(e,r,t){var n=r[0],a=r[1],s=r[2],i=t[0],o=t[1],A=t[2],d=t[3],j=d*n+o*s-A*a,l=d*a+A*n-i*s,u=d*s+i*a-o*n,f=-i*n-o*a-A*s;return e[0]=j*d+f*-i+l*-A-u*-o,e[1]=l*d+f*-o+u*-i-j*-A,e[2]=u*d+f*-A+j*-o-l*-i,e[3]=r[3],e}function So(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function Ro(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function Fo(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]}function Co(e,r){var t=e[0],n=e[1],a=e[2],s=e[3],i=r[0],o=r[1],A=r[2],d=r[3];return Math.abs(t-i)<=V*Math.max(1,Math.abs(t),Math.abs(i))&&Math.abs(n-o)<=V*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-A)<=V*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(s-d)<=V*Math.max(1,Math.abs(s),Math.abs(d))}var qo=tn,No=rn,Uo=nn,Lo=an,Vo=sn,Ho=on,Xo=An,Wo=function(){var e=en();return function(r,t,n,a,s,i){var o,A;for(t||(t=4),n||(n=0),a?A=Math.min(a*t+n,r.length):A=r.length,o=n;o<A;o+=t)e[0]=r[o],e[1]=r[o+1],e[2]=r[o+2],e[3]=r[o+3],s(e,e,i),r[o]=e[0],r[o+1]=e[1],r[o+2]=e[2],r[o+3]=e[3];return r}}();var T={};Ie(T,{add:()=>Yo,angle:()=>hA,ceil:()=>zo,clone:()=>Bo,copy:()=>Qo,create:()=>cn,cross:()=>AA,dist:()=>MA,distance:()=>un,div:()=>$A,divide:()=>ln,dot:()=>oA,equals:()=>bA,exactEquals:()=>EA,floor:()=>Zo,forEach:()=>PA,fromValues:()=>Go,inverse:()=>sA,len:()=>yA,length:()=>pn,lerp:()=>cA,max:()=>eA,min:()=>Jo,mul:()=>DA,multiply:()=>jn,negate:()=>aA,normalize:()=>iA,random:()=>dA,rotate:()=>pA,round:()=>tA,scale:()=>rA,scaleAndAdd:()=>nA,set:()=>Ko,sqrDist:()=>kA,sqrLen:()=>OA,squaredDistance:()=>fn,squaredLength:()=>hn,str:()=>gA,sub:()=>vA,subtract:()=>dn,transformMat2:()=>jA,transformMat2d:()=>lA,transformMat3:()=>uA,transformMat4:()=>fA,zero:()=>mA});function cn(){var e=new K(2);return K!=Float32Array&&(e[0]=0,e[1]=0),e}function Bo(e){var r=new K(2);return r[0]=e[0],r[1]=e[1],r}function Go(e,r){var t=new K(2);return t[0]=e,t[1]=r,t}function Qo(e,r){return e[0]=r[0],e[1]=r[1],e}function Ko(e,r,t){return e[0]=r,e[1]=t,e}function Yo(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e}function dn(e,r,t){return e[0]=r[0]-t[0],e[1]=r[1]-t[1],e}function jn(e,r,t){return e[0]=r[0]*t[0],e[1]=r[1]*t[1],e}function ln(e,r,t){return e[0]=r[0]/t[0],e[1]=r[1]/t[1],e}function zo(e,r){return e[0]=Math.ceil(r[0]),e[1]=Math.ceil(r[1]),e}function Zo(e,r){return e[0]=Math.floor(r[0]),e[1]=Math.floor(r[1]),e}function Jo(e,r,t){return e[0]=Math.min(r[0],t[0]),e[1]=Math.min(r[1],t[1]),e}function eA(e,r,t){return e[0]=Math.max(r[0],t[0]),e[1]=Math.max(r[1],t[1]),e}function tA(e,r){return e[0]=Math.round(r[0]),e[1]=Math.round(r[1]),e}function rA(e,r,t){return e[0]=r[0]*t,e[1]=r[1]*t,e}function nA(e,r,t,n){return e[0]=r[0]+t[0]*n,e[1]=r[1]+t[1]*n,e}function un(e,r){var t=r[0]-e[0],n=r[1]-e[1];return Math.hypot(t,n)}function fn(e,r){var t=r[0]-e[0],n=r[1]-e[1];return t*t+n*n}function pn(e){var r=e[0],t=e[1];return Math.hypot(r,t)}function hn(e){var r=e[0],t=e[1];return r*r+t*t}function aA(e,r){return e[0]=-r[0],e[1]=-r[1],e}function sA(e,r){return e[0]=1/r[0],e[1]=1/r[1],e}function iA(e,r){var t=r[0],n=r[1],a=t*t+n*n;return a>0&&(a=1/Math.sqrt(a)),e[0]=r[0]*a,e[1]=r[1]*a,e}function oA(e,r){return e[0]*r[0]+e[1]*r[1]}function AA(e,r,t){var n=r[0]*t[1]-r[1]*t[0];return e[0]=e[1]=0,e[2]=n,e}function cA(e,r,t,n){var a=r[0],s=r[1];return e[0]=a+n*(t[0]-a),e[1]=s+n*(t[1]-s),e}function dA(e,r){r=r||1;var t=pe()*2*Math.PI;return e[0]=Math.cos(t)*r,e[1]=Math.sin(t)*r,e}function jA(e,r,t){var n=r[0],a=r[1];return e[0]=t[0]*n+t[2]*a,e[1]=t[1]*n+t[3]*a,e}function lA(e,r,t){var n=r[0],a=r[1];return e[0]=t[0]*n+t[2]*a+t[4],e[1]=t[1]*n+t[3]*a+t[5],e}function uA(e,r,t){var n=r[0],a=r[1];return e[0]=t[0]*n+t[3]*a+t[6],e[1]=t[1]*n+t[4]*a+t[7],e}function fA(e,r,t){var n=r[0],a=r[1];return e[0]=t[0]*n+t[4]*a+t[12],e[1]=t[1]*n+t[5]*a+t[13],e}function pA(e,r,t,n){var a=r[0]-t[0],s=r[1]-t[1],i=Math.sin(n),o=Math.cos(n);return e[0]=a*o-s*i+t[0],e[1]=a*i+s*o+t[1],e}function hA(e,r){var t=e[0],n=e[1],a=r[0],s=r[1],i=Math.sqrt(t*t+n*n)*Math.sqrt(a*a+s*s),o=i&&(t*a+n*s)/i;return Math.acos(Math.min(Math.max(o,-1),1))}function mA(e){return e[0]=0,e[1]=0,e}function gA(e){return"vec2("+e[0]+", "+e[1]+")"}function EA(e,r){return e[0]===r[0]&&e[1]===r[1]}function bA(e,r){var t=e[0],n=e[1],a=r[0],s=r[1];return Math.abs(t-a)<=V*Math.max(1,Math.abs(t),Math.abs(a))&&Math.abs(n-s)<=V*Math.max(1,Math.abs(n),Math.abs(s))}var yA=pn,vA=dn,DA=jn,$A=ln,MA=un,kA=fn,OA=hn,PA=function(){var e=cn();return function(r,t,n,a,s,i){var o,A;for(t||(t=2),n||(n=0),a?A=Math.min(a*t+n,r.length):A=r.length,o=n;o<A;o+=t)e[0]=r[o],e[1]=r[o+1],s(e,e,i),r[o]=e[0],r[o+1]=e[1];return r}}();var xA=function(){var e=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(t){t=t||{};var t=typeof t<"u"?t:{},n,a;t.ready=new Promise(function(E,y){n=E,a=y}),Object.getOwnPropertyDescriptor(t.ready,"_malloc")||(Object.defineProperty(t.ready,"_malloc",{configurable:!0,get:function(){m("You are getting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_malloc",{configurable:!0,set:function(){m("You are setting _malloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_free")||(Object.defineProperty(t.ready,"_free",{configurable:!0,get:function(){m("You are getting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_free",{configurable:!0,set:function(){m("You are setting _free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_emscripten_stack_get_end")||(Object.defineProperty(t.ready,"_emscripten_stack_get_end",{configurable:!0,get:function(){m("You are getting _emscripten_stack_get_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_emscripten_stack_get_end",{configurable:!0,set:function(){m("You are setting _emscripten_stack_get_end on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_emscripten_stack_get_free")||(Object.defineProperty(t.ready,"_emscripten_stack_get_free",{configurable:!0,get:function(){m("You are getting _emscripten_stack_get_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_emscripten_stack_get_free",{configurable:!0,set:function(){m("You are setting _emscripten_stack_get_free on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_emscripten_stack_init")||(Object.defineProperty(t.ready,"_emscripten_stack_init",{configurable:!0,get:function(){m("You are getting _emscripten_stack_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_emscripten_stack_init",{configurable:!0,set:function(){m("You are setting _emscripten_stack_init on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_stackSave")||(Object.defineProperty(t.ready,"_stackSave",{configurable:!0,get:function(){m("You are getting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_stackSave",{configurable:!0,set:function(){m("You are setting _stackSave on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_stackRestore")||(Object.defineProperty(t.ready,"_stackRestore",{configurable:!0,get:function(){m("You are getting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_stackRestore",{configurable:!0,set:function(){m("You are setting _stackRestore on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_stackAlloc")||(Object.defineProperty(t.ready,"_stackAlloc",{configurable:!0,get:function(){m("You are getting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_stackAlloc",{configurable:!0,set:function(){m("You are setting _stackAlloc on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"___wasm_call_ctors")||(Object.defineProperty(t.ready,"___wasm_call_ctors",{configurable:!0,get:function(){m("You are getting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"___wasm_call_ctors",{configurable:!0,set:function(){m("You are setting ___wasm_call_ctors on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_fflush")||(Object.defineProperty(t.ready,"_fflush",{configurable:!0,get:function(){m("You are getting _fflush on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_fflush",{configurable:!0,set:function(){m("You are setting _fflush on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"___errno_location")||(Object.defineProperty(t.ready,"___errno_location",{configurable:!0,get:function(){m("You are getting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"___errno_location",{configurable:!0,set:function(){m("You are setting ___errno_location on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_getNurbsCurve2D")||(Object.defineProperty(t.ready,"_getNurbsCurve2D",{configurable:!0,get:function(){m("You are getting _getNurbsCurve2D on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_getNurbsCurve2D",{configurable:!0,set:function(){m("You are setting _getNurbsCurve2D on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_getNurbsCurve2DWithWeights")||(Object.defineProperty(t.ready,"_getNurbsCurve2DWithWeights",{configurable:!0,get:function(){m("You are getting _getNurbsCurve2DWithWeights on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_getNurbsCurve2DWithWeights",{configurable:!0,set:function(){m("You are setting _getNurbsCurve2DWithWeights on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_evalNurbsCurve2D")||(Object.defineProperty(t.ready,"_evalNurbsCurve2D",{configurable:!0,get:function(){m("You are getting _evalNurbsCurve2D on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_evalNurbsCurve2D",{configurable:!0,set:function(){m("You are setting _evalNurbsCurve2D on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_evalNurbsCurve2DWithWeights")||(Object.defineProperty(t.ready,"_evalNurbsCurve2DWithWeights",{configurable:!0,get:function(){m("You are getting _evalNurbsCurve2DWithWeights on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_evalNurbsCurve2DWithWeights",{configurable:!0,set:function(){m("You are setting _evalNurbsCurve2DWithWeights on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_projectNurbsCurve2D")||(Object.defineProperty(t.ready,"_projectNurbsCurve2D",{configurable:!0,get:function(){m("You are getting _projectNurbsCurve2D on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_projectNurbsCurve2D",{configurable:!0,set:function(){m("You are setting _projectNurbsCurve2D on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_disposeNurbsCurve2D")||(Object.defineProperty(t.ready,"_disposeNurbsCurve2D",{configurable:!0,get:function(){m("You are getting _disposeNurbsCurve2D on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_disposeNurbsCurve2D",{configurable:!0,set:function(){m("You are setting _disposeNurbsCurve2D on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_disposeNurbsCurve2DWithWeights")||(Object.defineProperty(t.ready,"_disposeNurbsCurve2DWithWeights",{configurable:!0,get:function(){m("You are getting _disposeNurbsCurve2DWithWeights on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_disposeNurbsCurve2DWithWeights",{configurable:!0,set:function(){m("You are setting _disposeNurbsCurve2DWithWeights on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_getNurbsCurve3D")||(Object.defineProperty(t.ready,"_getNurbsCurve3D",{configurable:!0,get:function(){m("You are getting _getNurbsCurve3D on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_getNurbsCurve3D",{configurable:!0,set:function(){m("You are setting _getNurbsCurve3D on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_getNurbsCurve3DWithWeights")||(Object.defineProperty(t.ready,"_getNurbsCurve3DWithWeights",{configurable:!0,get:function(){m("You are getting _getNurbsCurve3DWithWeights on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_getNurbsCurve3DWithWeights",{configurable:!0,set:function(){m("You are setting _getNurbsCurve3DWithWeights on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_evalNurbsCurve3D")||(Object.defineProperty(t.ready,"_evalNurbsCurve3D",{configurable:!0,get:function(){m("You are getting _evalNurbsCurve3D on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_evalNurbsCurve3D",{configurable:!0,set:function(){m("You are setting _evalNurbsCurve3D on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_invertNurbsCurve3D")||(Object.defineProperty(t.ready,"_invertNurbsCurve3D",{configurable:!0,get:function(){m("You are getting _invertNurbsCurve3D on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_invertNurbsCurve3D",{configurable:!0,set:function(){m("You are setting _invertNurbsCurve3D on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_evalNurbsCurve3DWithWeights")||(Object.defineProperty(t.ready,"_evalNurbsCurve3DWithWeights",{configurable:!0,get:function(){m("You are getting _evalNurbsCurve3DWithWeights on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_evalNurbsCurve3DWithWeights",{configurable:!0,set:function(){m("You are setting _evalNurbsCurve3DWithWeights on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_evalNurbsCurve3dBulk")||(Object.defineProperty(t.ready,"_evalNurbsCurve3dBulk",{configurable:!0,get:function(){m("You are getting _evalNurbsCurve3dBulk on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_evalNurbsCurve3dBulk",{configurable:!0,set:function(){m("You are setting _evalNurbsCurve3dBulk on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_disposeNurbsCurve3D")||(Object.defineProperty(t.ready,"_disposeNurbsCurve3D",{configurable:!0,get:function(){m("You are getting _disposeNurbsCurve3D on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_disposeNurbsCurve3D",{configurable:!0,set:function(){m("You are setting _disposeNurbsCurve3D on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_disposeNurbsCurve3DWithWeights")||(Object.defineProperty(t.ready,"_disposeNurbsCurve3DWithWeights",{configurable:!0,get:function(){m("You are getting _disposeNurbsCurve3DWithWeights on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_disposeNurbsCurve3DWithWeights",{configurable:!0,set:function(){m("You are setting _disposeNurbsCurve3DWithWeights on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_getNurbsSurface")||(Object.defineProperty(t.ready,"_getNurbsSurface",{configurable:!0,get:function(){m("You are getting _getNurbsSurface on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_getNurbsSurface",{configurable:!0,set:function(){m("You are setting _getNurbsSurface on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_getNurbsSurfaceWithWeights")||(Object.defineProperty(t.ready,"_getNurbsSurfaceWithWeights",{configurable:!0,get:function(){m("You are getting _getNurbsSurfaceWithWeights on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_getNurbsSurfaceWithWeights",{configurable:!0,set:function(){m("You are setting _getNurbsSurfaceWithWeights on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_evalNurbsSurface")||(Object.defineProperty(t.ready,"_evalNurbsSurface",{configurable:!0,get:function(){m("You are getting _evalNurbsSurface on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_evalNurbsSurface",{configurable:!0,set:function(){m("You are setting _evalNurbsSurface on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_evalNurbsSurfaceBulk")||(Object.defineProperty(t.ready,"_evalNurbsSurfaceBulk",{configurable:!0,get:function(){m("You are getting _evalNurbsSurfaceBulk on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_evalNurbsSurfaceBulk",{configurable:!0,set:function(){m("You are setting _evalNurbsSurfaceBulk on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"_invertSurface")||(Object.defineProperty(t.ready,"_invertSurface",{configurable:!0,get:function(){m("You are getting _invertSurface on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"_invertSurface",{configurable:!0,set:function(){m("You are setting _invertSurface on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"__Z19disposeNurbsSurfacePN10novo_nurbs7SurfaceIdEE")||(Object.defineProperty(t.ready,"__Z19disposeNurbsSurfacePN10novo_nurbs7SurfaceIdEE",{configurable:!0,get:function(){m("You are getting __Z19disposeNurbsSurfacePN10novo_nurbs7SurfaceIdEE on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"__Z19disposeNurbsSurfacePN10novo_nurbs7SurfaceIdEE",{configurable:!0,set:function(){m("You are setting __Z19disposeNurbsSurfacePN10novo_nurbs7SurfaceIdEE on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"__Z30disposeNurbsSurfaceWithWeightsPN10novo_nurbs15RationalSurfaceIdEE")||(Object.defineProperty(t.ready,"__Z30disposeNurbsSurfaceWithWeightsPN10novo_nurbs15RationalSurfaceIdEE",{configurable:!0,get:function(){m("You are getting __Z30disposeNurbsSurfaceWithWeightsPN10novo_nurbs15RationalSurfaceIdEE on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"__Z30disposeNurbsSurfaceWithWeightsPN10novo_nurbs15RationalSurfaceIdEE",{configurable:!0,set:function(){m("You are setting __Z30disposeNurbsSurfaceWithWeightsPN10novo_nurbs15RationalSurfaceIdEE on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}})),Object.getOwnPropertyDescriptor(t.ready,"onRuntimeInitialized")||(Object.defineProperty(t.ready,"onRuntimeInitialized",{configurable:!0,get:function(){m("You are getting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}),Object.defineProperty(t.ready,"onRuntimeInitialized",{configurable:!0,set:function(){m("You are setting onRuntimeInitialized on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")}}));var s={},i;for(i in t)t.hasOwnProperty(i)&&(s[i]=t[i]);var o=[],A="./this.program",d=function(E,y){throw y},j=!1,l=!0,u=!1,f=!1;if(t.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");var p="";function h(E){return t.locateFile?t.locateFile(E,p):p+E}var g,b,v,$;if(j||l){if(l?p=self.location.href:typeof document<"u"&&document.currentScript&&(p=document.currentScript.src),e&&(p=e),p.indexOf("blob:")!==0?p=p.substr(0,p.lastIndexOf("/")+1):p="",!(typeof window=="object"||typeof importScripts=="function"))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");g=function(E){var y=new XMLHttpRequest;return y.open("GET",E,!1),y.send(null),y.responseText},l&&(v=function(E){var y=new XMLHttpRequest;return y.open("GET",E,!1),y.responseType="arraybuffer",y.send(null),new Uint8Array(y.response)}),b=function(E,y,M){var x=new XMLHttpRequest;x.open("GET",E,!0),x.responseType="arraybuffer",x.onload=function(){if(x.status==200||x.status==0&&x.response){y(x.response);return}M()},x.onerror=M,x.send(null)},$=function(E){document.title=E}}else throw new Error("environment detection error");var D=t.print||console.log.bind(console),k=t.printErr||console.warn.bind(console);for(i in s)s.hasOwnProperty(i)&&(t[i]=s[i]);s=null,t.arguments&&(o=t.arguments),Object.getOwnPropertyDescriptor(t,"arguments")||Object.defineProperty(t,"arguments",{configurable:!0,get:function(){m("Module.arguments has been replaced with plain arguments_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),t.thisProgram&&(A=t.thisProgram),Object.getOwnPropertyDescriptor(t,"thisProgram")||Object.defineProperty(t,"thisProgram",{configurable:!0,get:function(){m("Module.thisProgram has been replaced with plain thisProgram (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),t.quit&&(d=t.quit),Object.getOwnPropertyDescriptor(t,"quit")||Object.defineProperty(t,"quit",{configurable:!0,get:function(){m("Module.quit has been replaced with plain quit_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),U(typeof t.memoryInitializerPrefixURL>"u","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),U(typeof t.pthreadMainPrefixURL>"u","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),U(typeof t.cdInitializerPrefixURL>"u","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),U(typeof t.filePackagePrefixURL>"u","Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),U(typeof t.read>"u","Module.read option was removed (modify read_ in JS)"),U(typeof t.readAsync>"u","Module.readAsync option was removed (modify readAsync in JS)"),U(typeof t.readBinary>"u","Module.readBinary option was removed (modify readBinary in JS)"),U(typeof t.setWindowTitle>"u","Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),U(typeof t.TOTAL_MEMORY>"u","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),Object.getOwnPropertyDescriptor(t,"read")||Object.defineProperty(t,"read",{configurable:!0,get:function(){m("Module.read has been replaced with plain read_ (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(t,"readAsync")||Object.defineProperty(t,"readAsync",{configurable:!0,get:function(){m("Module.readAsync has been replaced with plain readAsync (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(t,"readBinary")||Object.defineProperty(t,"readBinary",{configurable:!0,get:function(){m("Module.readBinary has been replaced with plain readBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),Object.getOwnPropertyDescriptor(t,"setWindowTitle")||Object.defineProperty(t,"setWindowTitle",{configurable:!0,get:function(){m("Module.setWindowTitle has been replaced with plain setWindowTitle (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}});var O="IDBFS is no longer included by default; build with -lidbfs.js",_="PROXYFS is no longer included by default; build with -lproxyfs.js",I="WORKERFS is no longer included by default; build with -lworkerfs.js",P="NODEFS is no longer included by default; build with -lnodefs.js",w=16;function F(E,y){return y||(y=w),Math.ceil(E/y)*y}function C(E){switch(E){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(E[E.length-1]==="*")return 4;if(E[0]==="i"){var y=Number(E.substr(1));return U(y%8===0,"getNativeTypeSize invalid bits "+y+", type "+E),y/8}else return 0}}}function q(E){q.shown||(q.shown={}),q.shown[E]||(q.shown[E]=1,k(E))}function R(E,y){if(typeof WebAssembly.Function=="function"){for(var M={i:"i32",j:"i64",f:"f32",d:"f64"},x={parameters:[],results:y[0]=="v"?[]:[M[y[0]]]},L=1;L<y.length;++L)x.parameters.push(M[y[L]]);return new WebAssembly.Function(x,E)}var W=[1,0,1,96],B=y.slice(0,1),X=y.slice(1),ne={i:127,j:126,f:125,d:124};W.push(X.length);for(var L=0;L<X.length;++L)W.push(ne[X[L]]);B=="v"?W.push(0):W=W.concat([1,ne[B]]),W[1]=W.length-2;var Ae=new Uint8Array([0,97,115,109,1,0,0,0].concat(W,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),me=new WebAssembly.Module(Ae),it=new WebAssembly.Instance(me,{e:{f:E}}),We=it.exports.f;return We}var G=[],J;function ue(){if(G.length)return G.pop();try{fe.grow(1)}catch(E){throw E instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":E}return fe.length-1}function ae(E,y){if(!J){J=new WeakMap;for(var M=0;M<fe.length;M++){var x=fe.get(M);x&&J.set(x,M)}}if(J.has(E))return J.get(E);var L=ue();try{fe.set(L,E)}catch(B){if(!(B instanceof TypeError))throw B;U(typeof y<"u","Missing signature argument to addFunction: "+E);var W=R(E,y);fe.set(L,W)}return J.set(E,L),L}function oe(E){J.delete(fe.get(E)),G.push(E)}function et(E,y){return U(typeof E<"u"),ae(E,y)}var Pe=0,Ne=function(E){Pe=E},jr=function(){return Pe},be;t.wasmBinary&&(be=t.wasmBinary),Object.getOwnPropertyDescriptor(t,"wasmBinary")||Object.defineProperty(t,"wasmBinary",{configurable:!0,get:function(){m("Module.wasmBinary has been replaced with plain wasmBinary (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}});var Ue=t.noExitRuntime||!0;Object.getOwnPropertyDescriptor(t,"noExitRuntime")||Object.defineProperty(t,"noExitRuntime",{configurable:!0,get:function(){m("Module.noExitRuntime has been replaced with plain noExitRuntime (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),typeof WebAssembly!="object"&&m("no native wasm support detected");function tc(E,y,M,x){switch(M=M||"i8",M.charAt(M.length-1)==="*"&&(M="i32"),M){case"i1":se[E>>0]=y;break;case"i8":se[E>>0]=y;break;case"i16":xe[E>>1]=y;break;case"i32":ee[E>>2]=y;break;case"i64":qt=[y>>>0,(we=y,+Math.abs(we)>=1?we>0?(Math.min(+Math.floor(we/4294967296),4294967295)|0)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],ee[E>>2]=qt[0],ee[E+4>>2]=qt[1];break;case"float":It[E>>2]=y;break;case"double":St[E>>3]=y;break;default:m("invalid type for setValue: "+M)}}function rc(E,y,M){switch(y=y||"i8",y.charAt(y.length-1)==="*"&&(y="i32"),y){case"i1":return se[E>>0];case"i8":return se[E>>0];case"i16":return xe[E>>1];case"i32":return ee[E>>2];case"i64":return ee[E>>2];case"float":return It[E>>2];case"double":return St[E>>3];default:m("invalid type for getValue: "+y)}return null}var _t,Le=!1,lr;function U(E,y){E||m("Assertion failed: "+y)}function ra(E){var y=t["_"+E];return U(y,"Cannot call unknown function "+E+", make sure it is exported"),y}function na(E,y,M,x,L){var W={string:function(le){var _e=0;if(le!=null&&le!==0){var Or=(le.length<<2)+1;_e=at(Or),fr(le,_e,Or)}return _e},array:function(le){var _e=at(le.length);return ia(le,_e),_e}};function B(le){return y==="string"?tt(le):y==="boolean"?Boolean(le):le}var X=ra(E),ne=[],Ae=0;if(U(y!=="array",'Return type should not be "array".'),x)for(var me=0;me<x.length;me++){var it=W[M[me]];it?(Ae===0&&(Ae=Ua()),ne[me]=it(x[me])):ne[me]=x[me]}var We=X.apply(null,ne);return We=B(We),Ae!==0&&La(Ae),We}function nc(E,y,M,x){return function(){return na(E,y,M,arguments,x)}}var ac=0,aa=1;function sc(E,y){var M;return U(typeof y=="number","allocate no longer takes a type argument"),U(typeof E!="number","allocate no longer takes a number as arg0"),y==aa?M=at(E.length):M=Lt(E.length),E.subarray||E.slice?he.set(E,M):he.set(new Uint8Array(E),M),M}var ur=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function sa(E,y,M){for(var x=y+M,L=y;E[L]&&!(L>=x);)++L;if(L-y>16&&E.subarray&&ur)return ur.decode(E.subarray(y,L));for(var W="";y<L;){var B=E[y++];if(!(B&128)){W+=String.fromCharCode(B);continue}var X=E[y++]&63;if((B&224)==192){W+=String.fromCharCode((B&31)<<6|X);continue}var ne=E[y++]&63;if((B&240)==224?B=(B&15)<<12|X<<6|ne:((B&248)!=240&&q("Invalid UTF-8 leading byte 0x"+B.toString(16)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),B=(B&7)<<18|X<<12|ne<<6|E[y++]&63),B<65536)W+=String.fromCharCode(B);else{var Ae=B-65536;W+=String.fromCharCode(55296|Ae>>10,56320|Ae&1023)}}return W}function tt(E,y){return E?sa(he,E,y):""}function rt(E,y,M,x){if(!(x>0))return 0;for(var L=M,W=M+x-1,B=0;B<E.length;++B){var X=E.charCodeAt(B);if(X>=55296&&X<=57343){var ne=E.charCodeAt(++B);X=65536+((X&1023)<<10)|ne&1023}if(X<=127){if(M>=W)break;y[M++]=X}else if(X<=2047){if(M+1>=W)break;y[M++]=192|X>>6,y[M++]=128|X&63}else if(X<=65535){if(M+2>=W)break;y[M++]=224|X>>12,y[M++]=128|X>>6&63,y[M++]=128|X&63}else{if(M+3>=W)break;X>=2097152&&q("Invalid Unicode code point 0x"+X.toString(16)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x1FFFFF)."),y[M++]=240|X>>18,y[M++]=128|X>>12&63,y[M++]=128|X>>6&63,y[M++]=128|X&63}}return y[M]=0,M-L}function fr(E,y,M){return U(typeof M=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),rt(E,he,y,M)}function nt(E){for(var y=0,M=0;M<E.length;++M){var x=E.charCodeAt(M);x>=55296&&x<=57343&&(x=65536+((x&1023)<<10)|E.charCodeAt(++M)&1023),x<=127?++y:x<=2047?y+=2:x<=65535?y+=3:y+=4}return y}function ic(E){for(var y="";;){var M=he[E++>>0];if(!M)return y;y+=String.fromCharCode(M)}}function oc(E,y){return oa(E,y,!1)}var pr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function Ac(E,y){U(E%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");for(var M=E,x=M>>1,L=x+y/2;!(x>=L)&&hr[x];)++x;if(M=x<<1,M-E>32&&pr)return pr.decode(he.subarray(E,M));for(var W="",B=0;!(B>=y/2);++B){var X=xe[E+B*2>>1];if(X==0)break;W+=String.fromCharCode(X)}return W}function cc(E,y,M){if(U(y%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),U(typeof M=="number","stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),M===void 0&&(M=2147483647),M<2)return 0;M-=2;for(var x=y,L=M<E.length*2?M/2:E.length,W=0;W<L;++W){var B=E.charCodeAt(W);xe[y>>1]=B,y+=2}return xe[y>>1]=0,y-x}function dc(E){return E.length*2}function jc(E,y){U(E%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");for(var M=0,x="";!(M>=y/4);){var L=ee[E+M*4>>2];if(L==0)break;if(++M,L>=65536){var W=L-65536;x+=String.fromCharCode(55296|W>>10,56320|W&1023)}else x+=String.fromCharCode(L)}return x}function lc(E,y,M){if(U(y%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!"),U(typeof M=="number","stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),M===void 0&&(M=2147483647),M<4)return 0;for(var x=y,L=x+M-4,W=0;W<E.length;++W){var B=E.charCodeAt(W);if(B>=55296&&B<=57343){var X=E.charCodeAt(++W);B=65536+((B&1023)<<10)|X&1023}if(ee[y>>2]=B,y+=4,y+4>L)break}return ee[y>>2]=0,y-x}function uc(E){for(var y=0,M=0;M<E.length;++M){var x=E.charCodeAt(M);x>=55296&&x<=57343&&++M,y+=4}return y}function fc(E){var y=nt(E)+1,M=Lt(y);return M&&rt(E,se,M,y),M}function pc(E){var y=nt(E)+1,M=at(y);return rt(E,se,M,y),M}function hc(E,y,M){q("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!");var x,L;M&&(L=y+nt(E),x=se[L]),fr(E,y,1/0),M&&(se[L]=x)}function ia(E,y){U(E.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),se.set(E,y)}function oa(E,y,M){for(var x=0;x<E.length;++x)U(E.charCodeAt(x)===E.charCodeAt(x)&255),se[y++>>0]=E.charCodeAt(x);M||(se[y>>0]=0)}function mc(E,y){return E%y>0&&(E+=y-E%y),E}var gc,Aa,se,he,xe,hr,ee,Ve,It,St;function ca(E){Aa=E,t.HEAP8=se=new Int8Array(E),t.HEAP16=xe=new Int16Array(E),t.HEAP32=ee=new Int32Array(E),t.HEAPU8=he=new Uint8Array(E),t.HEAPU16=hr=new Uint16Array(E),t.HEAPU32=Ve=new Uint32Array(E),t.HEAPF32=It=new Float32Array(E),t.HEAPF64=St=new Float64Array(E)}var Rt=5242880;t.TOTAL_STACK&&U(Rt===t.TOTAL_STACK,"the stack size can no longer be determined at runtime");var Ft=t.INITIAL_MEMORY||16777216;Object.getOwnPropertyDescriptor(t,"INITIAL_MEMORY")||Object.defineProperty(t,"INITIAL_MEMORY",{configurable:!0,get:function(){m("Module.INITIAL_MEMORY has been replaced with plain INITIAL_MEMORY (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}}),U(Ft>=Rt,"INITIAL_MEMORY should be larger than TOTAL_STACK, was "+Ft+"! (TOTAL_STACK="+Rt+")"),U(typeof Int32Array<"u"&&typeof Float64Array<"u"&&Int32Array.prototype.subarray!==void 0&&Int32Array.prototype.set!==void 0,"JS engine does not provide full typed array support"),U(!t.wasmMemory,"Use of `wasmMemory` detected.  Use -s IMPORTED_MEMORY to define wasmMemory externally"),U(Ft==16777216,"Detected runtime INITIAL_MEMORY setting.  Use -s IMPORTED_MEMORY to define wasmMemory dynamically");var fe;function mr(){var E=Ut();U((E&3)==0),Ve[(E>>2)+1]=34821223,Ve[(E>>2)+2]=2310721022,ee[0]=1668509029}function He(){if(!Le){var E=Ut(),y=Ve[(E>>2)+1],M=Ve[(E>>2)+2];(y!=34821223||M!=2310721022)&&m("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x2135467, but received 0x"+M.toString(16)+" "+y.toString(16)),ee[0]!==1668509029&&m("Runtime error: The application has corrupted its heap memory area (address zero)!")}}(function(){var E=new Int16Array(1),y=new Int8Array(E.buffer);if(E[0]=25459,y[0]!==115||y[1]!==99)throw"Runtime error: expected the system to be little-endian! (Run with -s SUPPORT_BIG_ENDIAN=1 to bypass)"})();var gr=[],Er=[],da=[],Ec=[],br=[],Ct=!1,yr=!1;function ja(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)pa(t.preRun.shift());Nt(gr)}function la(){He(),U(!Ct),Ct=!0,Nt(Er)}function ua(){He(),yr=!0}function fa(){if(He(),t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)ma(t.postRun.shift());Nt(br)}function pa(E){gr.unshift(E)}function ha(E){Er.unshift(E)}function bc(E){da.unshift(E)}function yc(E){}function ma(E){br.unshift(E)}U(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),U(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),U(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),U(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var ye=0,ve=null,Xe=null,Te={};function vc(E){for(var y=E;;){if(!Te[E])return E;E=y+Math.random()}}function ga(E){ye++,t.monitorRunDependencies&&t.monitorRunDependencies(ye),E?(U(!Te[E]),Te[E]=1,ve===null&&typeof setInterval<"u"&&(ve=setInterval(function(){if(Le){clearInterval(ve),ve=null;return}var y=!1;for(var M in Te)y||(y=!0,k("still waiting on run dependencies:")),k("dependency: "+M);y&&k("(end of list)")},1e4))):k("warning: run dependency added without ID")}function Ea(E){if(ye--,t.monitorRunDependencies&&t.monitorRunDependencies(ye),E?(U(Te[E]),delete Te[E]):k("warning: run dependency removed without ID"),ye==0&&(ve!==null&&(clearInterval(ve),ve=null),Xe)){var y=Xe;Xe=null,y()}}t.preloadedImages={},t.preloadedAudios={};function m(E){t.onAbort&&t.onAbort(E),E+="",k(E),Le=!0,lr=1;var y="abort("+E+") at "+Pa();E=y;var M=new WebAssembly.RuntimeError(E);throw a(M),M}var je={error:function(){m("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with  -s FORCE_FILESYSTEM=1")},init:function(){je.error()},createDataFile:function(){je.error()},createPreloadedFile:function(){je.error()},createLazyFile:function(){je.error()},open:function(){je.error()},mkdev:function(){je.error()},registerDevice:function(){je.error()},analyzePath:function(){je.error()},loadFilesFromDB:function(){je.error()},ErrnoError:function(){je.error()}};t.FS_createDataFile=je.createDataFile,t.FS_createPreloadedFile=je.createPreloadedFile;var ba="data:application/octet-stream;base64,";function vr(E){return E.startsWith(ba)}function ya(E){return E.startsWith("file://")}function Q(E,y){return function(){var M=E,x=y;return y||(x=t.asm),U(Ct,"native function `"+M+"` called before runtime initialization"),U(!yr,"native function `"+M+"` called after runtime exit (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),x[E]||U(x[E],"exported native function `"+M+"` not found"),x[E].apply(null,arguments)}}var de;de="nurbs.wasm",vr(de)||(de=h(de));function Dr(E){try{if(E==de&&be)return new Uint8Array(be);if(v)return v(E);throw"both async and sync fetching of the wasm failed"}catch(y){m(y)}}function va(){return!be&&(j||l)&&typeof fetch=="function"?fetch(de,{credentials:"same-origin"}).then(function(E){if(!E.ok)throw"failed to load wasm binary file at '"+de+"'";return E.arrayBuffer()}).catch(function(){return Dr(de)}):Promise.resolve().then(function(){return Dr(de)})}function Da(){var E={env:Mr,wasi_snapshot_preview1:Mr};function y(X,ne){var Ae=X.exports;t.asm=Ae,_t=t.asm.memory,U(_t,"memory not found in wasm exports"),ca(_t.buffer),fe=t.asm.__indirect_function_table,U(fe,"table not found in wasm exports"),ha(t.asm.__wasm_call_ctors),Ea("wasm-instantiate")}ga("wasm-instantiate");var M=t;function x(X){U(t===M,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),M=null,y(X.instance)}function L(X){return va().then(function(ne){var Ae=WebAssembly.instantiate(ne,E);return Ae}).then(X,function(ne){k("failed to asynchronously prepare wasm: "+ne),ya(de)&&k("warning: Loading from a file URI ("+de+") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing"),m(ne)})}function W(){return!be&&typeof WebAssembly.instantiateStreaming=="function"&&!vr(de)&&typeof fetch=="function"?fetch(de,{credentials:"same-origin"}).then(function(X){var ne=WebAssembly.instantiateStreaming(X,E);return ne.then(x,function(Ae){return k("wasm streaming compile failed: "+Ae),k("falling back to ArrayBuffer instantiation"),L(x)})}):L(x)}if(t.instantiateWasm)try{var B=t.instantiateWasm(E,y);return B}catch(X){return k("Module.instantiateWasm callback failed with error: "+X),!1}return W().catch(a),{}}var we,qt,Dc={};function Nt(E){for(;E.length>0;){var y=E.shift();if(typeof y=="function"){y(t);continue}var M=y.func;typeof M=="number"?y.arg===void 0?fe.get(M)():fe.get(M)(y.arg):M(y.arg===void 0?null:y.arg)}}function $a(E){return q("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),E}function Ma(E){var y=/\b_Z[\w\d_]+/g;return E.replace(y,function(M){var x=$a(M);return M===x?M:x+" ["+M+"]"})}function ka(){var E=new Error;if(!E.stack){try{throw new Error}catch(y){E=y}if(!E.stack)return"(no stack trace available)"}return E.stack.toString()}var Oa=0;function $r(){return Ue||Oa>0}function Pa(){var E=ka();return t.extraStackTrace&&(E+=`
`+t.extraStackTrace()),Ma(E)}function xa(E,y,M,x){m("Assertion failed: "+tt(E)+", at: "+[y?tt(y):"unknown filename",M,x?tt(x):"unknown function"])}var ie={DESTRUCTOR_OFFSET:0,REFCOUNT_OFFSET:4,TYPE_OFFSET:8,CAUGHT_OFFSET:12,RETHROWN_OFFSET:13,SIZE:16};function Ta(E){return Lt(E+ie.SIZE)+ie.SIZE}function wa(E){this.excPtr=E,this.ptr=E-ie.SIZE,this.set_type=function(y){ee[this.ptr+ie.TYPE_OFFSET>>2]=y},this.get_type=function(){return ee[this.ptr+ie.TYPE_OFFSET>>2]},this.set_destructor=function(y){ee[this.ptr+ie.DESTRUCTOR_OFFSET>>2]=y},this.get_destructor=function(){return ee[this.ptr+ie.DESTRUCTOR_OFFSET>>2]},this.set_refcount=function(y){ee[this.ptr+ie.REFCOUNT_OFFSET>>2]=y},this.set_caught=function(y){y=y?1:0,se[this.ptr+ie.CAUGHT_OFFSET>>0]=y},this.get_caught=function(){return se[this.ptr+ie.CAUGHT_OFFSET>>0]!=0},this.set_rethrown=function(y){y=y?1:0,se[this.ptr+ie.RETHROWN_OFFSET>>0]=y},this.get_rethrown=function(){return se[this.ptr+ie.RETHROWN_OFFSET>>0]!=0},this.init=function(y,M){this.set_type(y),this.set_destructor(M),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var y=ee[this.ptr+ie.REFCOUNT_OFFSET>>2];ee[this.ptr+ie.REFCOUNT_OFFSET>>2]=y+1},this.release_ref=function(){var y=ee[this.ptr+ie.REFCOUNT_OFFSET>>2];return ee[this.ptr+ie.REFCOUNT_OFFSET>>2]=y-1,U(y>0),y===1}}var _a=0,Ia=0;function Sa(E,y,M){var x=new wa(E);throw x.init(y,M),_a=E,Ia++,E+" - Exception catching is disabled, this exception cannot be caught. Compile with -s NO_DISABLE_EXCEPTION_CATCHING or -s EXCEPTION_CATCHING_ALLOWED=[..] to catch."}function Ra(){m()}function Fa(E,y,M){he.copyWithin(E,y,y+M)}function Ca(E){m("Cannot enlarge memory arrays to size "+E+" bytes (OOM). Either (1) compile with  -s INITIAL_MEMORY=X  with X higher than the current value "+se.length+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function qa(E){var y=he.length;E=E>>>0,Ca(E)}var Na=!0;function $c(E,y,M){var x=M>0?M:nt(E)+1,L=new Array(x),W=rt(E,L,0,L.length);return y&&(L.length=W),L}function Mc(E){for(var y=[],M=0;M<E.length;M++){var x=E[M];x>255&&(Na&&U(!1,"Character code "+x+" ("+String.fromCharCode(x)+")  at offset "+M+" not in 0x00-0xFF."),x&=255),y.push(String.fromCharCode(x))}return y.join("")}var Mr={__assert_fail:xa,__cxa_allocate_exception:Ta,__cxa_throw:Sa,abort:Ra,emscripten_memcpy_big:Fa,emscripten_resize_heap:qa},kc=Da(),Oc=t.___wasm_call_ctors=Q("__wasm_call_ctors"),Pc=t._getNurbsCurve2D=Q("getNurbsCurve2D"),xc=t._getNurbsCurve2DWithWeights=Q("getNurbsCurve2DWithWeights"),Tc=t._evalNurbsCurve2D=Q("evalNurbsCurve2D"),wc=t._evalNurbsCurve2DWithWeights=Q("evalNurbsCurve2DWithWeights"),_c=t._projectNurbsCurve2D=Q("projectNurbsCurve2D"),Ic=t._disposeNurbsCurve2D=Q("disposeNurbsCurve2D"),Sc=t._disposeNurbsCurve2DWithWeights=Q("disposeNurbsCurve2DWithWeights"),Rc=t._getNurbsCurve3D=Q("getNurbsCurve3D"),Fc=t._getNurbsCurve3DWithWeights=Q("getNurbsCurve3DWithWeights"),Cc=t._evalNurbsCurve3D=Q("evalNurbsCurve3D"),qc=t._invertNurbsCurve3D=Q("invertNurbsCurve3D"),Nc=t._evalNurbsCurve3DWithWeights=Q("evalNurbsCurve3DWithWeights"),Uc=t._evalNurbsCurve3dBulk=Q("evalNurbsCurve3dBulk"),Lc=t._disposeNurbsCurve3D=Q("disposeNurbsCurve3D"),Vc=t._disposeNurbsCurve3DWithWeights=Q("disposeNurbsCurve3DWithWeights"),Hc=t._getNurbsSurface=Q("getNurbsSurface"),Xc=t._getNurbsSurfaceWithWeights=Q("getNurbsSurfaceWithWeights"),Wc=t._evalNurbsSurface=Q("evalNurbsSurface"),Bc=t._evalNurbsSurfaceBulk=Q("evalNurbsSurfaceBulk"),Gc=t._invertSurface=Q("invertSurface"),Qc=t.__Z19disposeNurbsSurfacePN10novo_nurbs7SurfaceIdEE=Q("_Z19disposeNurbsSurfacePN10novo_nurbs7SurfaceIdEE"),Kc=t.__Z30disposeNurbsSurfaceWithWeightsPN10novo_nurbs15RationalSurfaceIdEE=Q("_Z30disposeNurbsSurfaceWithWeightsPN10novo_nurbs15RationalSurfaceIdEE"),Yc=t.___errno_location=Q("__errno_location"),zc=t._fflush=Q("fflush"),Ua=t.stackSave=Q("stackSave"),La=t.stackRestore=Q("stackRestore"),at=t.stackAlloc=Q("stackAlloc"),kr=t._emscripten_stack_init=function(){return(kr=t._emscripten_stack_init=t.asm.emscripten_stack_init).apply(null,arguments)},Va=t._emscripten_stack_get_free=function(){return(Va=t._emscripten_stack_get_free=t.asm.emscripten_stack_get_free).apply(null,arguments)},Ut=t._emscripten_stack_get_end=function(){return(Ut=t._emscripten_stack_get_end=t.asm.emscripten_stack_get_end).apply(null,arguments)},Lt=t._malloc=Q("malloc"),Zc=t._free=Q("free");Object.getOwnPropertyDescriptor(t,"intArrayFromString")||(t.intArrayFromString=function(){m("'intArrayFromString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"intArrayToString")||(t.intArrayToString=function(){m("'intArrayToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ccall")||(t.ccall=function(){m("'ccall' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"cwrap")||(t.cwrap=function(){m("'cwrap' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setValue")||(t.setValue=function(){m("'setValue' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getValue")||(t.getValue=function(){m("'getValue' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"allocate")||(t.allocate=function(){m("'allocate' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UTF8ArrayToString")||(t.UTF8ArrayToString=function(){m("'UTF8ArrayToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UTF8ToString")||(t.UTF8ToString=function(){m("'UTF8ToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToUTF8Array")||(t.stringToUTF8Array=function(){m("'stringToUTF8Array' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToUTF8")||(t.stringToUTF8=function(){m("'stringToUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"lengthBytesUTF8")||(t.lengthBytesUTF8=function(){m("'lengthBytesUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackTrace")||(t.stackTrace=function(){m("'stackTrace' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnPreRun")||(t.addOnPreRun=function(){m("'addOnPreRun' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnInit")||(t.addOnInit=function(){m("'addOnInit' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnPreMain")||(t.addOnPreMain=function(){m("'addOnPreMain' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnExit")||(t.addOnExit=function(){m("'addOnExit' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnPostRun")||(t.addOnPostRun=function(){m("'addOnPostRun' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeStringToMemory")||(t.writeStringToMemory=function(){m("'writeStringToMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeArrayToMemory")||(t.writeArrayToMemory=function(){m("'writeArrayToMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeAsciiToMemory")||(t.writeAsciiToMemory=function(){m("'writeAsciiToMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addRunDependency")||(t.addRunDependency=function(){m("'addRunDependency' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"removeRunDependency")||(t.removeRunDependency=function(){m("'removeRunDependency' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createFolder")||(t.FS_createFolder=function(){m("'FS_createFolder' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"FS_createPath")||(t.FS_createPath=function(){m("'FS_createPath' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createDataFile")||(t.FS_createDataFile=function(){m("'FS_createDataFile' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createPreloadedFile")||(t.FS_createPreloadedFile=function(){m("'FS_createPreloadedFile' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createLazyFile")||(t.FS_createLazyFile=function(){m("'FS_createLazyFile' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createLink")||(t.FS_createLink=function(){m("'FS_createLink' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"FS_createDevice")||(t.FS_createDevice=function(){m("'FS_createDevice' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_unlink")||(t.FS_unlink=function(){m("'FS_unlink' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"getLEB")||(t.getLEB=function(){m("'getLEB' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getFunctionTables")||(t.getFunctionTables=function(){m("'getFunctionTables' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"alignFunctionTables")||(t.alignFunctionTables=function(){m("'alignFunctionTables' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerFunctions")||(t.registerFunctions=function(){m("'registerFunctions' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addFunction")||(t.addFunction=function(){m("'addFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"removeFunction")||(t.removeFunction=function(){m("'removeFunction' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getFuncWrapper")||(t.getFuncWrapper=function(){m("'getFuncWrapper' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"prettyPrint")||(t.prettyPrint=function(){m("'prettyPrint' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"dynCall")||(t.dynCall=function(){m("'dynCall' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getCompilerSetting")||(t.getCompilerSetting=function(){m("'getCompilerSetting' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"print")||(t.print=function(){m("'print' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"printErr")||(t.printErr=function(){m("'printErr' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getTempRet0")||(t.getTempRet0=function(){m("'getTempRet0' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setTempRet0")||(t.setTempRet0=function(){m("'setTempRet0' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"callMain")||(t.callMain=function(){m("'callMain' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"abort")||(t.abort=function(){m("'abort' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToNewUTF8")||(t.stringToNewUTF8=function(){m("'stringToNewUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setFileTime")||(t.setFileTime=function(){m("'setFileTime' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"abortOnCannotGrowMemory")||(t.abortOnCannotGrowMemory=function(){m("'abortOnCannotGrowMemory' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emscripten_realloc_buffer")||(t.emscripten_realloc_buffer=function(){m("'emscripten_realloc_buffer' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ENV")||(t.ENV=function(){m("'ENV' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ERRNO_CODES")||(t.ERRNO_CODES=function(){m("'ERRNO_CODES' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ERRNO_MESSAGES")||(t.ERRNO_MESSAGES=function(){m("'ERRNO_MESSAGES' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setErrNo")||(t.setErrNo=function(){m("'setErrNo' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"inetPton4")||(t.inetPton4=function(){m("'inetPton4' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"inetNtop4")||(t.inetNtop4=function(){m("'inetNtop4' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"inetPton6")||(t.inetPton6=function(){m("'inetPton6' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"inetNtop6")||(t.inetNtop6=function(){m("'inetNtop6' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"readSockaddr")||(t.readSockaddr=function(){m("'readSockaddr' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeSockaddr")||(t.writeSockaddr=function(){m("'writeSockaddr' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"DNS")||(t.DNS=function(){m("'DNS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getHostByName")||(t.getHostByName=function(){m("'getHostByName' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"GAI_ERRNO_MESSAGES")||(t.GAI_ERRNO_MESSAGES=function(){m("'GAI_ERRNO_MESSAGES' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"Protocols")||(t.Protocols=function(){m("'Protocols' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"Sockets")||(t.Sockets=function(){m("'Sockets' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getRandomDevice")||(t.getRandomDevice=function(){m("'getRandomDevice' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"traverseStack")||(t.traverseStack=function(){m("'traverseStack' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UNWIND_CACHE")||(t.UNWIND_CACHE=function(){m("'UNWIND_CACHE' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"withBuiltinMalloc")||(t.withBuiltinMalloc=function(){m("'withBuiltinMalloc' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"readAsmConstArgsArray")||(t.readAsmConstArgsArray=function(){m("'readAsmConstArgsArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"readAsmConstArgs")||(t.readAsmConstArgs=function(){m("'readAsmConstArgs' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"mainThreadEM_ASM")||(t.mainThreadEM_ASM=function(){m("'mainThreadEM_ASM' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"jstoi_q")||(t.jstoi_q=function(){m("'jstoi_q' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"jstoi_s")||(t.jstoi_s=function(){m("'jstoi_s' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getExecutableName")||(t.getExecutableName=function(){m("'getExecutableName' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"listenOnce")||(t.listenOnce=function(){m("'listenOnce' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"autoResumeAudioContext")||(t.autoResumeAudioContext=function(){m("'autoResumeAudioContext' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"dynCallLegacy")||(t.dynCallLegacy=function(){m("'dynCallLegacy' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getDynCaller")||(t.getDynCaller=function(){m("'getDynCaller' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"dynCall")||(t.dynCall=function(){m("'dynCall' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"callRuntimeCallbacks")||(t.callRuntimeCallbacks=function(){m("'callRuntimeCallbacks' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"runtimeKeepaliveCounter")||(t.runtimeKeepaliveCounter=function(){m("'runtimeKeepaliveCounter' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"keepRuntimeAlive")||(t.keepRuntimeAlive=function(){m("'keepRuntimeAlive' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"runtimeKeepalivePush")||(t.runtimeKeepalivePush=function(){m("'runtimeKeepalivePush' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"runtimeKeepalivePop")||(t.runtimeKeepalivePop=function(){m("'runtimeKeepalivePop' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"callUserCallback")||(t.callUserCallback=function(){m("'callUserCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"maybeExit")||(t.maybeExit=function(){m("'maybeExit' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"asmjsMangle")||(t.asmjsMangle=function(){m("'asmjsMangle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"reallyNegative")||(t.reallyNegative=function(){m("'reallyNegative' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"unSign")||(t.unSign=function(){m("'unSign' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"reSign")||(t.reSign=function(){m("'reSign' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"formatString")||(t.formatString=function(){m("'formatString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"PATH")||(t.PATH=function(){m("'PATH' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"PATH_FS")||(t.PATH_FS=function(){m("'PATH_FS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SYSCALLS")||(t.SYSCALLS=function(){m("'SYSCALLS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"syscallMmap2")||(t.syscallMmap2=function(){m("'syscallMmap2' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"syscallMunmap")||(t.syscallMunmap=function(){m("'syscallMunmap' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getSocketFromFD")||(t.getSocketFromFD=function(){m("'getSocketFromFD' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getSocketAddress")||(t.getSocketAddress=function(){m("'getSocketAddress' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"JSEvents")||(t.JSEvents=function(){m("'JSEvents' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerKeyEventCallback")||(t.registerKeyEventCallback=function(){m("'registerKeyEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"specialHTMLTargets")||(t.specialHTMLTargets=function(){m("'specialHTMLTargets' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"maybeCStringToJsString")||(t.maybeCStringToJsString=function(){m("'maybeCStringToJsString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"findEventTarget")||(t.findEventTarget=function(){m("'findEventTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"findCanvasEventTarget")||(t.findCanvasEventTarget=function(){m("'findCanvasEventTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getBoundingClientRect")||(t.getBoundingClientRect=function(){m("'getBoundingClientRect' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillMouseEventData")||(t.fillMouseEventData=function(){m("'fillMouseEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerMouseEventCallback")||(t.registerMouseEventCallback=function(){m("'registerMouseEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerWheelEventCallback")||(t.registerWheelEventCallback=function(){m("'registerWheelEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerUiEventCallback")||(t.registerUiEventCallback=function(){m("'registerUiEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerFocusEventCallback")||(t.registerFocusEventCallback=function(){m("'registerFocusEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillDeviceOrientationEventData")||(t.fillDeviceOrientationEventData=function(){m("'fillDeviceOrientationEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerDeviceOrientationEventCallback")||(t.registerDeviceOrientationEventCallback=function(){m("'registerDeviceOrientationEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillDeviceMotionEventData")||(t.fillDeviceMotionEventData=function(){m("'fillDeviceMotionEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerDeviceMotionEventCallback")||(t.registerDeviceMotionEventCallback=function(){m("'registerDeviceMotionEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"screenOrientation")||(t.screenOrientation=function(){m("'screenOrientation' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillOrientationChangeEventData")||(t.fillOrientationChangeEventData=function(){m("'fillOrientationChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerOrientationChangeEventCallback")||(t.registerOrientationChangeEventCallback=function(){m("'registerOrientationChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillFullscreenChangeEventData")||(t.fillFullscreenChangeEventData=function(){m("'fillFullscreenChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerFullscreenChangeEventCallback")||(t.registerFullscreenChangeEventCallback=function(){m("'registerFullscreenChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerRestoreOldStyle")||(t.registerRestoreOldStyle=function(){m("'registerRestoreOldStyle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"hideEverythingExceptGivenElement")||(t.hideEverythingExceptGivenElement=function(){m("'hideEverythingExceptGivenElement' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"restoreHiddenElements")||(t.restoreHiddenElements=function(){m("'restoreHiddenElements' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setLetterbox")||(t.setLetterbox=function(){m("'setLetterbox' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"currentFullscreenStrategy")||(t.currentFullscreenStrategy=function(){m("'currentFullscreenStrategy' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"restoreOldWindowedStyle")||(t.restoreOldWindowedStyle=function(){m("'restoreOldWindowedStyle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"softFullscreenResizeWebGLRenderTarget")||(t.softFullscreenResizeWebGLRenderTarget=function(){m("'softFullscreenResizeWebGLRenderTarget' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"doRequestFullscreen")||(t.doRequestFullscreen=function(){m("'doRequestFullscreen' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillPointerlockChangeEventData")||(t.fillPointerlockChangeEventData=function(){m("'fillPointerlockChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerPointerlockChangeEventCallback")||(t.registerPointerlockChangeEventCallback=function(){m("'registerPointerlockChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerPointerlockErrorEventCallback")||(t.registerPointerlockErrorEventCallback=function(){m("'registerPointerlockErrorEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"requestPointerLock")||(t.requestPointerLock=function(){m("'requestPointerLock' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillVisibilityChangeEventData")||(t.fillVisibilityChangeEventData=function(){m("'fillVisibilityChangeEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerVisibilityChangeEventCallback")||(t.registerVisibilityChangeEventCallback=function(){m("'registerVisibilityChangeEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerTouchEventCallback")||(t.registerTouchEventCallback=function(){m("'registerTouchEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillGamepadEventData")||(t.fillGamepadEventData=function(){m("'fillGamepadEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerGamepadEventCallback")||(t.registerGamepadEventCallback=function(){m("'registerGamepadEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerBeforeUnloadEventCallback")||(t.registerBeforeUnloadEventCallback=function(){m("'registerBeforeUnloadEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"fillBatteryEventData")||(t.fillBatteryEventData=function(){m("'fillBatteryEventData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"battery")||(t.battery=function(){m("'battery' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerBatteryEventCallback")||(t.registerBatteryEventCallback=function(){m("'registerBatteryEventCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setCanvasElementSize")||(t.setCanvasElementSize=function(){m("'setCanvasElementSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getCanvasElementSize")||(t.getCanvasElementSize=function(){m("'getCanvasElementSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"polyfillSetImmediate")||(t.polyfillSetImmediate=function(){m("'polyfillSetImmediate' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"demangle")||(t.demangle=function(){m("'demangle' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"demangleAll")||(t.demangleAll=function(){m("'demangleAll' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"jsStackTrace")||(t.jsStackTrace=function(){m("'jsStackTrace' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackTrace")||(t.stackTrace=function(){m("'stackTrace' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getEnvStrings")||(t.getEnvStrings=function(){m("'getEnvStrings' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"checkWasiClock")||(t.checkWasiClock=function(){m("'checkWasiClock' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"flush_NO_FILESYSTEM")||(t.flush_NO_FILESYSTEM=function(){m("'flush_NO_FILESYSTEM' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeI53ToI64")||(t.writeI53ToI64=function(){m("'writeI53ToI64' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeI53ToI64Clamped")||(t.writeI53ToI64Clamped=function(){m("'writeI53ToI64Clamped' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeI53ToI64Signaling")||(t.writeI53ToI64Signaling=function(){m("'writeI53ToI64Signaling' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeI53ToU64Clamped")||(t.writeI53ToU64Clamped=function(){m("'writeI53ToU64Clamped' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeI53ToU64Signaling")||(t.writeI53ToU64Signaling=function(){m("'writeI53ToU64Signaling' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"readI53FromI64")||(t.readI53FromI64=function(){m("'readI53FromI64' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"readI53FromU64")||(t.readI53FromU64=function(){m("'readI53FromU64' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"convertI32PairToI53")||(t.convertI32PairToI53=function(){m("'convertI32PairToI53' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"convertU32PairToI53")||(t.convertU32PairToI53=function(){m("'convertU32PairToI53' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"uncaughtExceptionCount")||(t.uncaughtExceptionCount=function(){m("'uncaughtExceptionCount' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"exceptionLast")||(t.exceptionLast=function(){m("'exceptionLast' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"exceptionCaught")||(t.exceptionCaught=function(){m("'exceptionCaught' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ExceptionInfoAttrs")||(t.ExceptionInfoAttrs=function(){m("'ExceptionInfoAttrs' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"ExceptionInfo")||(t.ExceptionInfo=function(){m("'ExceptionInfo' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"CatchInfo")||(t.CatchInfo=function(){m("'CatchInfo' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"exception_addRef")||(t.exception_addRef=function(){m("'exception_addRef' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"exception_decRef")||(t.exception_decRef=function(){m("'exception_decRef' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"Browser")||(t.Browser=function(){m("'Browser' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"funcWrappers")||(t.funcWrappers=function(){m("'funcWrappers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getFuncWrapper")||(t.getFuncWrapper=function(){m("'getFuncWrapper' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setMainLoop")||(t.setMainLoop=function(){m("'setMainLoop' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"FS")||(t.FS=function(){m("'FS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"mmapAlloc")||(t.mmapAlloc=function(){m("'mmapAlloc' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"MEMFS")||(t.MEMFS=function(){m("'MEMFS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"TTY")||(t.TTY=function(){m("'TTY' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"PIPEFS")||(t.PIPEFS=function(){m("'PIPEFS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SOCKFS")||(t.SOCKFS=function(){m("'SOCKFS' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"_setNetworkCallback")||(t._setNetworkCallback=function(){m("'_setNetworkCallback' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"tempFixedLengthArray")||(t.tempFixedLengthArray=function(){m("'tempFixedLengthArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"miniTempWebGLFloatBuffers")||(t.miniTempWebGLFloatBuffers=function(){m("'miniTempWebGLFloatBuffers' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"heapObjectForWebGLType")||(t.heapObjectForWebGLType=function(){m("'heapObjectForWebGLType' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"heapAccessShiftForWebGLHeap")||(t.heapAccessShiftForWebGLHeap=function(){m("'heapAccessShiftForWebGLHeap' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"GL")||(t.GL=function(){m("'GL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emscriptenWebGLGet")||(t.emscriptenWebGLGet=function(){m("'emscriptenWebGLGet' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"computeUnpackAlignedImageSize")||(t.computeUnpackAlignedImageSize=function(){m("'computeUnpackAlignedImageSize' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emscriptenWebGLGetTexPixelData")||(t.emscriptenWebGLGetTexPixelData=function(){m("'emscriptenWebGLGetTexPixelData' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emscriptenWebGLGetUniform")||(t.emscriptenWebGLGetUniform=function(){m("'emscriptenWebGLGetUniform' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"webglGetUniformLocation")||(t.webglGetUniformLocation=function(){m("'webglGetUniformLocation' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"webglPrepareUniformLocationsBeforeFirstUse")||(t.webglPrepareUniformLocationsBeforeFirstUse=function(){m("'webglPrepareUniformLocationsBeforeFirstUse' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"webglGetLeftBracePos")||(t.webglGetLeftBracePos=function(){m("'webglGetLeftBracePos' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"emscriptenWebGLGetVertexAttrib")||(t.emscriptenWebGLGetVertexAttrib=function(){m("'emscriptenWebGLGetVertexAttrib' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeGLArray")||(t.writeGLArray=function(){m("'writeGLArray' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"AL")||(t.AL=function(){m("'AL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SDL_unicode")||(t.SDL_unicode=function(){m("'SDL_unicode' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SDL_ttfContext")||(t.SDL_ttfContext=function(){m("'SDL_ttfContext' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SDL_audio")||(t.SDL_audio=function(){m("'SDL_audio' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SDL")||(t.SDL=function(){m("'SDL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"SDL_gfx")||(t.SDL_gfx=function(){m("'SDL_gfx' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"GLUT")||(t.GLUT=function(){m("'GLUT' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"EGL")||(t.EGL=function(){m("'EGL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"GLFW_Window")||(t.GLFW_Window=function(){m("'GLFW_Window' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"GLFW")||(t.GLFW=function(){m("'GLFW' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"GLEW")||(t.GLEW=function(){m("'GLEW' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"IDBStore")||(t.IDBStore=function(){m("'IDBStore' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"runAndAbortIfError")||(t.runAndAbortIfError=function(){m("'runAndAbortIfError' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"warnOnce")||(t.warnOnce=function(){m("'warnOnce' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackSave")||(t.stackSave=function(){m("'stackSave' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackRestore")||(t.stackRestore=function(){m("'stackRestore' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackAlloc")||(t.stackAlloc=function(){m("'stackAlloc' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"AsciiToString")||(t.AsciiToString=function(){m("'AsciiToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToAscii")||(t.stringToAscii=function(){m("'stringToAscii' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UTF16ToString")||(t.UTF16ToString=function(){m("'UTF16ToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToUTF16")||(t.stringToUTF16=function(){m("'stringToUTF16' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"lengthBytesUTF16")||(t.lengthBytesUTF16=function(){m("'lengthBytesUTF16' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UTF32ToString")||(t.UTF32ToString=function(){m("'UTF32ToString' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToUTF32")||(t.stringToUTF32=function(){m("'stringToUTF32' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"lengthBytesUTF32")||(t.lengthBytesUTF32=function(){m("'lengthBytesUTF32' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"allocateUTF8")||(t.allocateUTF8=function(){m("'allocateUTF8' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"allocateUTF8OnStack")||(t.allocateUTF8OnStack=function(){m("'allocateUTF8OnStack' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}),t.writeStackCookie=mr,t.checkStackCookie=He,Object.getOwnPropertyDescriptor(t,"ALLOC_NORMAL")||Object.defineProperty(t,"ALLOC_NORMAL",{configurable:!0,get:function(){m("'ALLOC_NORMAL' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(t,"ALLOC_STACK")||Object.defineProperty(t,"ALLOC_STACK",{configurable:!0,get:function(){m("'ALLOC_STACK' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)")}});var st;function Ha(E){this.name="ExitStatus",this.message="Program terminated with exit("+E+")",this.status=E}var Jc=!1;Xe=function E(){st||Vt(),st||(Xe=E)};function Xa(){kr(),mr()}function Vt(E){if(E=E||o,ye>0||(Xa(),ja(),ye>0))return;function y(){st||(st=!0,t.calledRun=!0,!Le&&(la(),n(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),U(!t._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),fa()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),y()},1)):y(),He()}t.run=Vt;function Wa(){var E=D,y=k,M=!1;D=k=function(L){M=!0};try{var x=null;x&&x()}catch{}D=E,k=y,M&&(q("stdio streams had content in them that was not flushed. you should set EXIT_RUNTIME to 1 (see the FAQ), or make sure to emit a newline when you printf etc."),q("(this may also be due to not including full filesystem support - try building with -s FORCE_FILESYSTEM=1)"))}function ed(E,y){if(lr=E,Wa(),!(y&&$r()&&E===0)){if($r()){if(!y){var M="program exited (with status: "+E+"), but EXIT_RUNTIME is not set, so halting execution but not exiting the runtime or preventing further async execution (build with EXIT_RUNTIME=1, if you want a true shutdown)";a(M),k(M)}}else ua(),t.onExit&&t.onExit(E),Le=!0;d(E,new Ha(E))}}if(t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return Vt(),t.ready}}(),mn=xA;var gn="./nurbs-XCWNWOSP.wasm";async function En(){return await mn({locateFile:e=>gn})}function bn(e,r,t,n,a){let s=a-1;var i=e._malloc(8*r.length),o=new Float64Array(e.HEAPF64.buffer,i,r.length);o.set(r);var A=e._malloc(t.length*24),d=new Float64Array(e.HEAPF64.buffer,A,t.length*3),j=new Float64Array(t.length*3);t.forEach((p,h)=>{j[h*3]=p[0],j[h*3+1]=p[1],j[h*3+2]=p[2]}),d.set(j);var l=void 0;if(n!=null&&n.length>0){var u=e._malloc(8*n.length),f=new Float64Array(e.HEAPF64.buffer,u,n.length);f.set(n),l=e._getNurbsCurve3DWithWeights(s,t.length,o.byteOffset,d.byteOffset,f.byteOffset),e._free(f.byteOffset)}else l=e._getNurbsCurve3D(s,t.length,o.byteOffset,d.byteOffset,0);return e._free(o.byteOffset),e._free(d.byteOffset),l}function ct(e,r,t,n,a){let s=a-1;var i=e._malloc(8*r.length),o=new Float64Array(e.HEAPF64.buffer,i,r.length);o.set(r);var A=e._malloc(t.length*16),d=new Float64Array(e.HEAPF64.buffer,A,t.length*2),j=new Float64Array(t.length*2);t.forEach((p,h)=>{j[h*2]=p[0],j[h*2+1]=p[1]}),d.set(j);var l=void 0;if(n!=null&&n.length>0){var u=e._malloc(8*n.length),f=new Float64Array(e.HEAPF64.buffer,u,n.length);f.set(n),l=e._getNurbsCurve2DWithWeights(s,t.length,o.byteOffset,d.byteOffset,f.byteOffset),e._free(f.byteOffset)}else l=e._getNurbsCurve2D(s,t.length,o.byteOffset,d.byteOffset,0);return e._free(o.byteOffset),e._free(d.byteOffset),l}function dt(e,r,t,n,a,s,i,o){let A=i-1,d=o-1;var j=e._malloc(8*r.length),l=new Float64Array(e.HEAPF64.buffer,j,r.length);l.set(r);var u=e._malloc(a.length*24),f=new Float64Array(e.HEAPF64.buffer,u,a.length*3),p=new Float64Array(a.length*3);a.forEach((v,$)=>{p[$*3]=v[0],p[$*3+1]=v[1],p[$*3+2]=v[2]}),f.set(p);var h=void 0;if(s!=null&&s.length>0){var g=e._malloc(8*s.length),b=new Float64Array(e.HEAPF64.buffer,g,s.length);b.set(s),h=e._getNurbsSurfaceWithWeights(A,d,t,n,l.byteOffset,f.byteOffset,b.byteOffset),e._free(b.byteOffset)}else h=e._getNurbsSurface(A,d,t,n,l.byteOffset,f.byteOffset,0);return e._free(l.byteOffset),e._free(f.byteOffset),h}Z.setMatrixArrayType(Array);var Be=T.create(),Ge=T.create(),jd=T.create(),ld=T.create(),jt=class{constructor(r,t,n,a,s,i,o){this.surface=r;this.sense=t;this.loops=n;this.triangulation=a;this.seams=s;this.instanceIndex=i;this.geometryTransformation=o}raytrace(r,t){return!!this.surface.intersect(r,t)}isInside(r){let{loops:t,sense:n}=this,a=Number.MAX_VALUE,s=!0;for(let i of t)for(let o of i){let A=o.project(r);o.eval(A,Be,Ge);let d=T.distance(r,Be);if(d<a){a=d,T.sub(Be,r,Be);let[j,l]=Ge;Ge[0]=l*n,Ge[1]=-j*n,s=T.dot(Ge,Be)<0}}return s}};Z.setMatrixArrayType(Array);var yn=c.create(),lt=class{constructor(r,t){this.origin=r;this.direction=t}eval(r,t){c.scale(r,this.direction,t),c.add(r,r,this.origin)}invert(r){return c.sub(yn,r,this.origin),c.dot(yn,this.direction)}};Z.setMatrixArrayType(Array);var ut=c.create(),Dn=c.create(),$n=c.create(),vn=new lt(Dn,$n);function Mn(e,r,t,n=0){let a=r*r-4*e*t;if(a<0||e==0)return;let s=Math.sign(e)*n?1:-1;return(-r+s*Math.sqrt(a))/(2*e)}function kn(e,r){if(e&&!r)return e;if(!e&&r)return r;if(e&&r)return S.multiply(r,e,r)}function wA(e){if(e==1)return;let r=S.create();return S.fromScaling(r,c.fromValues(e,e,1)),r}var $e=class{constructor(r,t,n,a){this.kind=r;this.sense=n;this.scale=a;let s=t?S.clone(t):S.create(),i=S.fromScaling(S.create(),c.fromValues(this.scale,this.scale,this.scale));S.multiply(s,i,s),this.surfaceToObjectSpaceTransform=s;let o=S.invert(S.create(),this.surfaceToObjectSpaceTransform);this.objectToSurfaceSpaceTransform=o;let A=Y.fromMat4(Y.create(),this.surfaceToObjectSpaceTransform);this.surfaceToObjectSpaceTransformNormal=A;let d=Y.fromMat4(Y.create(),this.objectToSurfaceSpaceTransform);this.objectToSurfaceSpaceTransformNormal=d}surfaceToObjectSpaceTransform;objectToSurfaceSpaceTransform;surfaceToObjectSpaceTransformNormal;objectToSurfaceSpaceTransformNormal;evalPosition(r,t){this.unitEvalPosition(r,t),c.transformMat4(r,r,this.surfaceToObjectSpaceTransform)}evalNormal(r,t){this.unitEvalNormal(r,t),c.scale(r,r,this.sense),c.transformMat3(r,r,this.surfaceToObjectSpaceTransformNormal),c.normalize(r,r)}invert(r,t){c.transformMat4(ut,t,this.objectToSurfaceSpaceTransform),this.unitInvert(r,ut)}intersect(r,t){c.transformMat4(Dn,t.origin,this.objectToSurfaceSpaceTransform),c.transformMat3($n,t.direction,this.objectToSurfaceSpaceTransformNormal);let n=this.unitIntersect(vn);return n?(vn.eval(ut,n),this.unitInvert(r,ut),!0):!1}dispose(){}},ft=class extends $e{constructor(r,t=1,n){super("plane",r,t,n??1)}unitEvalPosition(r,t){c.set(r,t[0],t[1],0)}unitEvalNormal(r,t){c.set(r,0,0,1)}unitInvert(r,t){return T.set(r,t[0],t[1])}unitIntersect(r){if(r.direction[2]*this.sense<0)return-r.origin[2]/r.direction[2]}};var pt=class extends $e{constructor(t=1,n,a=1,s){super("cylinder",kn(n,wA(t)),a*On(n),s??1);this.radius=t}unitEvalPosition(t,n){c.set(t,Math.cos(n[0]),Math.sin(n[0]),n[1])}unitEvalNormal(t,n){c.set(t,Math.cos(n[0]),Math.sin(n[0]),0)}unitInvert(t,n){let[a,s,i]=n,o=Math.atan2(s,a);o<0&&(o+=Math.PI*2),T.set(t,o,i)}unitIntersect(t){let{origin:n,direction:a}=t,[s,i]=n,[o,A]=a,d=o*o+A*A,j=2*(s*o+i*A),l=s*s+i*i-1;return Mn(d,j,l,this.sense>0?0:1)}};function _A(e,r){if(e==1)return;let t=1,n=1/e,a=S.create(),s=S.create(),i=S.create();return S.fromTranslation(s,c.fromValues(0,0,r*Math.sign(e))),S.fromScaling(a,c.fromValues(t,t,n)),S.multiply(i,a,s),i}function On(e){if(!e)return 1;let[r,t,n,a,s,i,o,A,d,j,l,u,f,p,h,g]=e,b=c.fromValues(r,s,d),v=c.fromValues(t,i,j),$=c.fromValues(n,o,l),D=c.create();return c.cross(D,b,v),c.dot(D,$)>=0?1:-1}var ht=class extends $e{constructor(t=1,n=-1,a,s=1,i){super("cone",kn(a,_A(n,t)),s*On(a),i??1);this.radius=t;this.halfAngleTan=n;this.scaleV=n*Math.cos(Math.atan(n))}scaleV;unitEvalPosition(t,n){let[a,s]=n;s=s*this.scaleV+this.radius,c.set(t,Math.cos(a)*s,Math.sin(a)*s,s)}unitEvalNormal(t,n){let[a,s]=n,i=Math.sqrt(.5);c.set(t,Math.cos(a)*i,Math.sin(a)*i,-i)}unitInvert(t,n){let[a,s,i]=n,o=Math.atan2(s,a);o<0&&(o+=Math.PI*2);let A=(i-this.radius)/this.scaleV;T.set(t,o,A)}unitIntersect(t){let{origin:n,direction:a}=t,[s,i,o]=n,[A,d,j]=a,l=A*A+d*d-j*j,u=2*(s*A+i*d-o*j),f=s*s+i*i-o*o;return Mn(l,u,f,this.sense>0?0:1)}},mt=class extends $e{constructor(t=1,n=.5,a,s=1,i){super("torus",a,s,i??1);this.majorRadius=t;this.minorRadius=n}unitEvalPosition(t,n){let[a,s]=n,{majorRadius:i,minorRadius:o}=this,A=i+Math.cos(s)*o;c.set(t,Math.cos(a)*A,Math.sin(a)*A,Math.sin(s)*o)}unitEvalNormal(t,n){let[a,s]=n;c.set(t,Math.cos(a)*Math.cos(s),Math.sin(a)*Math.cos(s),Math.sin(s))}unitInvert(t,n){let[a,s,i]=n,o=Math.atan2(s,a);o<0&&(o+=Math.PI*2);let A=Math.atan2(i,Math.sqrt(a*a+s*s)-this.majorRadius);A<0&&(A+=Math.PI*2),T.set(t,o,A)}unitIntersect(t){return IA(t,this.majorRadius,this.minorRadius)}},gt=class extends $e{constructor(t,n,a,s,i,o,A,d,j){super("nurbs",void 0,o,j??1);this.orders=t;this.dim=n;this.controlPoints=a;this.knots=s;this.weights=i;this.sense=o;this.wasmInstance=A;this.buffer=d}kind="nurbs";ptr=0;dispose(){this.weights?this.wasmInstance._disposeNurbsSurface(this.ptr):this.wasmInstance._disposeNurbsSurfaceWithWeights(this.ptr)}unitEvalPosition(t,n){this.ptr===0&&(this.ptr=dt(this.wasmInstance,this.knots,this.dim[0],this.dim[1],this.controlPoints,this.weights,this.orders[0],this.orders[1])),this.weights?this.wasmInstance._evalNurbsSurfaceWithWeights(this.ptr,n[0],n[1],this.buffer.byteOffset,void 0):this.wasmInstance._evalNurbsSurface(this.ptr,n[0],n[1],this.buffer.byteOffset,void 0);let[a,s,i]=this.buffer.subarray(0,3);c.set(t,a,s,i)}unitEvalNormal(t,n){this.ptr===0&&(this.ptr=dt(this.wasmInstance,this.knots,this.dim[0],this.dim[1],this.controlPoints,this.weights,this.orders[0],this.orders[1])),this.weights?this.wasmInstance._evalNurbsSurfaceWithWeights(this.ptr,n[0],n[1],void 0,this.buffer.byteOffset+24):this.wasmInstance._evalNurbsSurface(this.ptr,n[0],n[1],void 0,this.buffer.byteOffset+24);let[a,s,i]=this.buffer.subarray(3,6);c.set(t,-a,-s,-i)}unitInvert(t,n){this.ptr===0&&(this.ptr=dt(this.wasmInstance,this.knots,this.dim[0],this.dim[1],this.controlPoints,this.weights,this.orders[0],this.orders[1])),this.wasmInstance._invertSurface(this.ptr,n[0],n[1],n[2],this.buffer.byteOffset);let[a,s]=this.buffer.subarray(0,2);T.set(t,a,s)}unitIntersect(t){}};function IA(e,r,t){let{origin:n,direction:a}=e,s=1,i=r*r,o=t*t,A=c.dot(n,n),d=c.dot(n,a);if(d*d-A+(r+t)*(r+t)<0)return;let j=(A-o-i)/2,l=d,u=d*d+i*a[2]*a[2]+j,f=j*d+i*n[2]*a[2],p=j*j+i*n[2]*n[2]-i*o;if(Math.abs(l*(l*l-u)+f)<.01){s=-1;let P=f;f=l,l=P,p=1/p,f=f*p,u=u*p,l=l*p}let h=2*u-3*l*l,g=l*(l*l-u)+f,b=l*(l*(-3*l*l+4*u)-8*f)+4*p;h/=3,g*=2,b/=3;let v=h*h+b,$=3*b*h-h*h*h-g*g,D=$*$-v*v*v,k=0;if(D<0){let P=Math.sqrt(v);k=2*P*Math.cos(Math.acos($/(P*v))/3)}else{let P=Math.pow(Math.sqrt(D)+Math.abs($),.3333333333333333);k=Math.sign($)*Math.abs(P+v/P)}k=h-k;let O=k-3*h,_=k*k-3*b;if(Math.abs(O)<1e-4){if(_<0)return;_=Math.sqrt(_)}else{if(O<0)return;O=Math.sqrt(O/2),_=g/O}let I=Number.MAX_VALUE;if(D=O*O-k+_,D>0){D=Math.sqrt(D);let P=-O-D-l;P=s<0?2/P:P;let w=-O+D-l;w=s<0?2/w:w,P>0&&(I=P),w>0&&(I=Math.min(I,w))}if(D=O*O-k-_,D>0){D=Math.sqrt(D);let P=O-D-l;P=s<0?2/P:P;let w=O+D-l;w=s<0?2/w:w,P>0&&(I=Math.min(I,P)),w>0&&(I=Math.min(I,w))}if(I!=Number.MAX_VALUE)return I}var Et=class{constructor(r,t,n){this.curve=r;this.geometryTransformation=t;this.instanceIndex=n}};Z.setMatrixArrayType(Array);function N(e){return e.transformation!==void 0?S.fromValues(...e.transformation):S.identity(S.create())}var H=SA();function z(e){switch(e){case"mm":return 1/1e3;case"cm":return 1/100;case"in":return .0254;default:return 1}}async function SA(){let e=await En();var r=e._malloc(48),t=new Float64Array(e.HEAPF64.buffer,r,6);return new Gt(e,t)}function ge(e,r,t,n){let a=e.geometries[r.geometry];if(a.shells)for(let s of a.shells){let i=e.shells[s];for(let o of i.faces)n(o)}if(a.solids)for(let s of a.solids){let i=e.solids[s];for(let o of e.shells[i.outerShell].faces)n(o);if(i.innerShells)for(let o of i.innerShells){let A=e.shells[o];for(let d of A.faces)n(d)}}}var Gt=class{constructor(r,t){this.wasmInstance=r;this.buffer=t}getCurve2D(r,t){let n=r.halfEdges[t],[a,s]=n.parameterBounds,i=1;n.direction<0&&(i=-1,[a,s]=[s,a]);let o=r.curves2D[n.curve2D];switch(o.kind){case"line":{let A=T.fromValues(...o.origin),d=T.fromValues(...o.direction);return new $t(A,d,a,s,i)}case"circle":{let A=T.fromValues(...o.origin),{radius:d}=o;return new kt(A,d,a,s,i)}case"nurbs":{let{order:A,controlPoints:d,knots:j,weights:l}=o;return new Mt(A,d,j,l,a,s,i,this.wasmInstance,this.buffer)}default:throw Error("Unsupported curve type!")}}getCurve3D(r,t){let n=r.halfEdges[t];return this.getCurve3DFromEdge(r,n.edge,n.direction)}getHalfEdgeAABB(r,t){let n=this.getCurve2D(r,t),a=[];switch(n.kind){case"line":a.push(T.create()),a.push(T.create()),n.eval(n.beginParam,a[0],void 0),n.eval(n.endParam,a[1],void 0);break;case"arc":a.push(T.create()),a.push(T.create()),n.eval(n.beginParam,a[0],void 0),n.eval(n.endParam,a[1],void 0);let o=n.endParam>2*Math.PI?-Math.PI*2:0;for(let A=1;A<4;++A){let d=Math.PI/2*A+o;if(d>=n.beginParam&&d<=n.endParam){let j=T.create();n.eval(d,j,void 0),a.push(j)}}break;default:return}let s=T.copy(T.create(),a[0]),i=T.copy(T.create(),a[0]);for(let o=1;o<a.length;++o)T.min(s,s,a[o]),T.max(i,i,a[o]);return{min:s,max:i}}getCurve3DFromEdgeOrSegment(r,t){if(t.curve3D!=null){let[n,a]=t.parameterBounds,s=r.curves3D[t.curve3D];switch(s.kind){case"line":{let i=c.fromValues(...s.origin),o=c.fromValues(...s.direction);return new yt(i,o,n,a,1,t.tesselationParameters)}case"circle":{let i=c.fromValues(...s.origin),{radius:o,axisX:A,axisY:d}=s;return new vt(i,A,d,o,n,a,1,t.tesselationParameters)}case"nurbs":{let{order:i,controlPoints:o,knots:A,weights:d}=s;return new Dt(i,o,A,d,n,a,1,t.tesselationParameters,this.wasmInstance,this.buffer)}case"lineStrip":return new bt(s.vertices,n,a,t.tesselationParameters);default:throw Error("Unsupported curve type!")}}}getCurve3DFromSegment(r,t){return this.getCurve3DFromEdgeOrSegment(r,r.curveSegments[t])}getCurve3DFromEdge(r,t,n=1){return this.getCurve3DFromEdgeOrSegment(r,r.edges[t])}getSurface(r,t,n){switch(r.kind){case"plane":{let a=S.fromValues(...r.transform);return new ft(a,t,n)}case"cylinder":{let a=S.fromValues(...r.transform);return new pt(r.radius,a,t,n)}case"cone":{let a=S.fromValues(...r.transform);return new ht(r.radius,r.halfAngleTan,a,t,n)}case"torus":{let a=S.fromValues(...r.transform);return new mt(r.majorRadius,r.minorRadius,a,t,n)}case"nurbs":return new gt(r.orders,r.dim,r.controlPoints,r.knots,r.weights,t,this.wasmInstance,this.buffer,n);default:throw Error("Unsupported surface type!")}}makeFace(r,t,n,a,s){let i=[r.outerLoop,...r.innerLoops??[]],o=new Set,A=i.map(l=>a.loops[l].halfEdges.map(u=>{let p=a.halfEdges[u].edge;return a.edges[p].virtual&&o.add(p),s[u]})),d=[];for(let l of o){let u=a.edges[l],[f,p]=u.halfEdges;if(p!=null){console.assert(a.halfEdges[f].face==a.halfEdges[p].face);let h=a.halfEdges[f].faceVertexIndices,g=a.halfEdges[p].faceVertexIndices;console.assert(h.length==g.length);let b=[];for(let v=0;v<h.length;v++)b.push([h[v],g[v]]);d.push({vertexIndexPairs:b})}}let j=this.getSurface(a.surfaces[r.surface],r.facing);return new jt(j,r.facing,A,r.triangulation,d,n,t.transformation?N(t):void 0)}getFaces(r){let t=r.halfEdges.map((a,s)=>this.getCurve2D(r,s)),n=[];for(let a=0;a<r.instances.length;++a){let s=r.instances[a],i=o=>{n.push(this.makeFace(r.faces[o],s,a,r,t))};typeof s.geometry=="number"&&ge(r,s,!0,i)}return n}getCurvesFromEdges(r,t){let n=new Array;for(let a=0;a<r.edges.length;++a){let s=this.getCurve3DFromEdge(r,a),i=r.edges[a];if(s&&!i.virtual){let o=r.instances[t[a]],A=S.create();o.transformation&&S.mul(A,A,N(o)),n.push(new Et(s,A,t[a]))}else n.push(void 0)}return n}getEdges(r){let t=new Array(r.edges.length);for(let n=0;n<r.instances.length;++n){let a=i=>{let o=r.faces[i],A=[o.outerLoop,...o.innerLoops??[]];for(let d of A){let j=r.loops[d];for(let l of j.halfEdges){let u=r.halfEdges[l];t[u.edge]=n}}},s=r.instances[n];typeof s.geometry=="number"&&ge(r,s,!0,a)}return this.getCurvesFromEdges(r,t)}};Z.setMatrixArrayType(Array);async function Pn(e,r,t,n){let a=e.faces[r],s=e.surfaces[a.surface];if(s.kind=="cylinder"){let i=s,o=N(e.instances[t]),[A,d]=await te(e,a,i,o,"center"),j,l=s.radius,u=async f=>{let p=e.shells[f];for(let h of p.faces)if(h!=r){let g=e.faces[h],b=e.surfaces[g.surface];if(b.kind=="cylinder"&&(n=="outer"&&b.radius>l||n=="inner"&&b.radius<l)){let[v,$]=await te(e,g,b,o,"center");c.dist(v,A)<.01&&c.dist($,d)<.01&&(j=h,l=b.radius)}}};for(let f of e.instances){let p=e.geometries[f.geometry];if(p.shells)for(let h of p.shells)await u(h);if(p.solids)for(let h of p.solids){let g=e.solids[h];await u(g.outerShell)}}return j}}function re(e,r,t,n){let a=c.sub(c.create(),t,r),s=c.sub(c.create(),e,r),i=c.dot(a,s)/c.dot(a,a);return n&&c.lerp(n,r,t,i),i<0?{pos:r,parameter:0}:i>1?{pos:t,parameter:1}:{pos:c.lerp(c.create(),r,t,i),parameter:i}}function Ce(e,r,t){let n=[],a=t?c.transformMat4(c.create(),e[0],t):e[0],s=0;n.push(r?T.fromValues(r[0],a[2]):T.fromValues(s,a[2]));for(let i=1;i<e.length;++i){let o=t?c.transformMat4(c.create(),e[i],t):e[i];r?n.push(T.fromValues(r[i],o[2])):(s+=T.distance(T.fromValues(a[0],a[1]),T.fromValues(o[0],o[1])),n.push(T.fromValues(s,o[2]))),a=o}return n}function Qe(e){let r=[];if(e.length>0){let t=e[0];r.push(t);for(let n=0;n<e.length;++n){let a=e[n];c.distance(t,a)>.005&&r.push(a),t=a}}return r}var Fe=class{constructor(r){this.baseUrl=r}activeDownloads=0;abortController=new AbortController;abort(){this.abortController.abort(),this.abortController=new AbortController}async request(r,t){let n=new URL(r,this.baseUrl);n.search||(n.search=this.baseUrl?.search??"");let a=(t??this.abortController).signal,s=await fetch(n.toString(),{mode:"cors",signal:a});if(!s.ok)throw new Error(`HTTP Error: ${s.status}: ${s.statusText}`);return s}async downloadJson(r,t){try{return this.activeDownloads++,await(await this.request(r,t)).json()}finally{this.activeDownloads--}}async downloadArrayBuffer(r,t){try{return this.activeDownloads++,await(await this.request(r,t)).arrayBuffer()}finally{this.activeDownloads--}}async downloadBlob(r,t){try{return this.activeDownloads++,await(await this.request(r,t)).blob()}finally{this.activeDownloads--}}async downloadImage(r,t){try{if(this.activeDownloads++,Fe.downloadImageFallback){let n=typeof r=="string"?new URL(r,this.baseUrl):r;n.search=this.baseUrl?.search??"";let a=await Fe.downloadImageFallback(n.toString());if(t?.signal.aborted)throw{name:"AbortError",message:""};return a}else{let n=await this.downloadBlob(r,t);return await createImageBitmap(n)}}finally{this.activeDownloads--}}async downloadImageFromBlob(r,t){try{if(this.activeDownloads++,Fe.downloadImageFallback){let n=URL.createObjectURL(r),a=await Fe.downloadImageFallback(n.toString());if(URL.revokeObjectURL(n),t?.signal.aborted)throw{name:"AbortError",message:""};return a}else return await createImageBitmap(r)}finally{this.activeDownloads--}}},Me=Fe;xr(Me,"downloadImageFallback");Z.setMatrixArrayType(Array);function Oe(e,r){let t=c.create(),n=c.create(),a=c.create();e.eval(e.beginParam,t,a),e.eval(e.endParam,n,void 0),c.transformMat4(t,t,r),c.transformMat4(n,n,r);let s=Y.normalFromMat4(Y.create(),r);return c.transformMat3(a,a,s),c.normalize(a,a),{dir:a,start:t,end:n}}var ke=class{dispose(){}},bt=class{constructor(r,t,n,a){this.vertices=r;this.beginParam=t;this.endParam=n;this.tesselationParameters=a}kind="lineStrip";sense=1;eval(r,t,n){let{vertices:a,endParam:s,beginParam:i,tesselationParameters:o}=this,A=0;if(r>=s)A=o.length-1;else if(r<=i)A=0;else for(;r<s&&A<o.length-1&&!(r<o[A+1]);)++A;let d=a[A],j=A<a.length-1?c.subtract(c.create(),a[A+1],d):c.subtract(c.create(),a[A-1],d);if(c.normalize(j,j),t){let l=o[A],u=r-l;c.scale(t,j,u),c.add(t,t,d)}n&&c.copy(n,j)}invert(r){let{vertices:t,tesselationParameters:n}=this,a=Number.MAX_VALUE,s=0;for(let i=0;i<t.length-1;++i){let o=re(r,t[i],t[i+1]),A=c.dist(o.pos,r);if(A<a){a=A;let d=n[i+1]-n[i];s=n[i]+d*o.parameter}}return s}toSegments(r){let{vertices:t,tesselationParameters:n}=this,a=[];for(let s=1;s<n.length;++s){let i=c.transformMat4(c.create(),t[s-1],r),o=c.transformMat4(c.create(),t[s],r),A=c.sub(c.create(),o,i);c.normalize(A,A),a.push({start:i,end:o,dir:A})}return a}toProfile(r){let{vertices:t,tesselationParameters:n}=this;return Ce(t,n,r)}},yt=class extends ke{constructor(t,n,a,s,i,o){super();this.origin=t;this.direction=n;this.beginParam=a;this.endParam=s;this.sense=i;this.tesselationParameters=o}kind="line";eval(t,n,a){let{origin:s,direction:i,sense:o,beginParam:A,endParam:d}=this;n&&(c.scale(n,i,t),c.add(n,n,s)),a&&(o>0?c.copy(a,i):c.negate(a,i))}invert(t){let n=c.create();this.eval(this.beginParam,n,void 0);let a=c.create();this.eval(this.endParam,a,void 0);let s=c.dist(n,a),i=c.create();c.subtract(i,t,n);let A=c.dot(this.direction,i)/s;return this.beginParam+(this.endParam-this.beginParam)*A}},vt=class extends ke{constructor(t,n,a,s,i,o,A,d){super();this.origin=t;this.axisX=n;this.axisY=a;this.radius=s;this.beginParam=i;this.endParam=o;this.sense=A;this.tesselationParameters=d}kind="arc";tmp=c.create();eval(t,n,a){let{sense:s}=this,i=Math.cos(t),o=Math.sin(t);if(n){let{origin:A,radius:d,axisX:j,axisY:l,tmp:u}=this;c.scale(u,j,i*d),c.add(n,A,u),c.scale(u,l,o*d),c.add(n,n,u)}if(a){let{axisX:A,axisY:d,tmp:j}=this;c.scale(a,A,i*s),c.scale(j,d,-o*s),c.add(a,j,a)}}invert(t){let n=Kt(t,this);if(n>this.endParam||n<this.beginParam){let a=n-this.endParam;a<0&&(a+=2*Math.PI);let s=this.beginParam-n;return s<0&&(s+=2*Math.PI),a<s?this.endParam:this.beginParam}return n}};function Kt(e,r){let t=c.cross(c.create(),r.axisX,r.axisY),n=c.sub(c.create(),e,r.origin),a=c.dot(n,t),s=c.scaleAndAdd(c.create(),e,t,-a),i=c.sub(c.create(),s,r.origin);c.normalize(i,i);let o=c.scaleAndAdd(c.create(),r.origin,i,r.radius);c.sub(o,o,r.origin);let A=c.dot(o,r.axisX),d=c.dot(o,r.axisY),j=Math.atan2(d,A);return j<0&&(j+=2*Math.PI),j}var Dt=class extends ke{constructor(t,n,a,s,i,o,A,d,j,l){super();this.order=t;this.controlPoints=n;this.knots=a;this.weights=s;this.beginParam=i;this.endParam=o;this.sense=A;this.tesselationParameters=d;this.wasmInstance=j;this.buffer=l}kind="nurbs";ptr=0;dispose(){this.weights?this.wasmInstance._disposeNurbsCurve3DWithWeights(this.ptr):this.wasmInstance._disposeNurbsCurve3D(this.ptr)}eval(t,n,a){if(this.ptr===0&&(this.ptr=bn(this.wasmInstance,this.knots,this.controlPoints,this.weights,this.order)),this.weights?this.wasmInstance._evalNurbsCurve3DWithWeights(this.ptr,t,n?this.buffer.byteOffset:void 0,a?this.buffer.byteOffset+24:void 0):this.wasmInstance._evalNurbsCurve3D(this.ptr,t,n?this.buffer.byteOffset:void 0,a?this.buffer.byteOffset+24:void 0),n!=null){let[s,i,o]=this.buffer.subarray(0,3);c.set(n,s,i,o)}if(a!=null){let[s,i,o]=this.buffer.subarray(3,6);c.set(a,s,i,o)}}invert(t){if(this.ptr===0){let n=this.controlPoints.map(a=>T.fromValues(a[0]/Math.PI,a[1]/500));this.ptr=ct(this.wasmInstance,this.knots,n,this.weights,this.order)}return this.wasmInstance._invertNurbsCurve3D(this.ptr,t[0],t[1],t[2])}},$t=class extends ke{constructor(t,n,a,s,i){super();this.origin=t;this.direction=n;this.beginParam=a;this.endParam=s;this.sense=i}kind="line";eval(t,n,a){let{origin:s,direction:i}=this;n&&(T.scale(n,i,t),T.add(n,n,s)),a&&(this.sense>0?T.copy(a,i):T.negate(a,i))}project(t){let[n,a]=t,{origin:s,direction:i,beginParam:o,endParam:A}=this,d=n-s[0],j=a-s[1],l=d*i[0]+j*i[1],u=(o+A)/2,f=Math.abs(A-o)/2,p=u-f,h=u+f;return l=Math.max(p,Math.min(h,l)),l}},Mt=class extends ke{constructor(t,n,a,s,i,o,A,d,j){super();this.order=t;this.controlPoints=n;this.knots=a;this.weights=s;this.beginParam=i;this.endParam=o;this.sense=A;this.wasmInstance=d;this.buffer=j}kind="nurbs";ptr=0;eval(t,n,a){if(this.ptr===0){let s=this.controlPoints.map(i=>T.fromValues(i[0]/Math.PI,i[1]/500));this.ptr=ct(this.wasmInstance,this.knots,s,this.weights,this.order)}if(this.weights?this.wasmInstance._evalNurbsCurve2DWithWeights(this.ptr,t,n?this.buffer.byteOffset:void 0,a?this.buffer.byteOffset+24:void 0):this.wasmInstance._evalNurbsCurve2D(this.ptr,t,n?this.buffer.byteOffset:void 0,a?this.buffer.byteOffset+24:void 0),n!=null){let[s,i]=this.buffer.subarray(0,2);T.set(n,s,i)}if(a!=null){let[s,i]=this.buffer.subarray(3,5);T.set(a,s,i)}}project(t){if(this.ptr===0){let n=this.controlPoints.map(a=>T.fromValues(a[0]/Math.PI,a[1]/500));this.ptr=ct(this.wasmInstance,this.knots,n,this.weights,this.order)}return this.wasmInstance._projectNurbsCurve2D(this.ptr,t[0],t[1])}dispose(){this.weights?this.wasmInstance._disposeNurbsCurve2DWithWeights(this.ptr):this.wasmInstance._disposeNurbsCurve2D(this.ptr)}},Qt=Math.PI*2,kt=class{constructor(r,t,n,a,s){this.origin=r;this.radius=t;this.beginParam=n;this.endParam=a;this.sense=s}kind="arc";eval(r,t,n){let a=Math.cos(r),s=Math.sin(r);if(t){let{origin:i,radius:o}=this;t[0]=a*o+i[0],t[1]=s*o+i[1]}if(n){let{sense:i}=this;n[0]=-s*i,n[1]=a*i}}project(r){let[t,n]=r,{origin:a,beginParam:s,endParam:i}=this,o=Math.atan2(n-a[1],t-a[0]);o<0&&(o+=Qt);let A=(s+i)/2,d=Math.abs(i-s)/2,j=A-d,l=A+d;for(;o<A-Math.PI;)o+=Qt;for(;o>A+Math.PI;)o-=Qt;return o=Math.max(j,Math.min(l,o)),o}};Z.setMatrixArrayType(Array);var RA=1e-4;function Zt(e,r,t=0){for(let n=0;n<3;++n)if(e[n]-r.min[n]+t<0||r.max[n]-e[n]+t<0)return!1;return!0}function Jt(e,r,t,n){let a=e.loops[r.outerLoop],s=[];for(let i of a.halfEdges){let o=e.halfEdges[i],A=e.edges[o.edge];if(A.curve3D!==void 0){let d=e.curves3D[A.curve3D];d.kind=="circle"&&s.push(d.origin)}}if(s.length==2){let i=1,o=c.equals(s[0],t)?s[1]:s[0];return c.dot(n,c.sub(c.create(),o,t))<0&&(i=-1),i*c.dist(s[0],s[1])}return 0}function FA(e){let r=Math.abs(e.parameterBounds[1]-e.parameterBounds[0]);return Math.abs(r-2*Math.PI)<RA}function Ee(e,r){let n=e.loops[r.outerLoop].halfEdges.map(s=>e.halfEdges[s]),a=0;for(let s of n){let i=e.edges[s.edge];if(i.curve3D!==void 0&&e.curves3D[i.curve3D].kind=="circle"&&(a++,!FA(i)))return!1}return a==2}async function te(e,r,t,n,a){let s=z(e.units),i=S.fromValues(...t.transform),o=S.getTranslation(c.create(),i),A=c.fromValues(i[8],i[9],i[10]),d=Jt(e,r,o,A),j=c.add(c.create(),o,c.scale(c.create(),A,d));if(c.transformMat4(o,o,n),c.transformMat4(j,j,n),a=="bottom"||a=="top"){let l=c.sub(c.create(),j,o);c.normalize(l,l);let u=Z.equals(Math.abs(c.dot(c.fromValues(0,0,1),l)),1)?c.fromValues(0,1,0):c.fromValues(0,0,1),f=c.cross(c.create(),u,l);c.cross(u,l,f),c.normalize(u,u),a=="top"?(c.scaleAndAdd(o,o,u,t.radius*s),c.scaleAndAdd(j,j,u,t.radius*s)):(c.scaleAndAdd(o,o,u,-t.radius*s),c.scaleAndAdd(j,j,u,-t.radius*s))}return[o,j]}function er(e,r,t,n){let a=c.sub(c.create(),r,e),s=c.len(a);c.normalize(a,a);let i=c.sub(c.create(),n,t);c.normalize(i,i);let o=c.dot(a,i),A=c.len(c.cross(c.create(),a,i));function d(j,l,u,f){let p=c.sub(c.create(),u,j),h=c.dot(p,l),g=c.scaleAndAdd(c.create(),j,l,h),v=c.dist(g,u)*o/A,$=Math.min(f,Math.max(h+v,0));return c.scaleAndAdd(c.create(),j,l,$)}return d(e,a,t,s)}function tr(e,r,t,n){let a=c.create(),s=c.create(),{pos:i}=re(t,e,r),{pos:o}=re(n,e,r),{pos:A}=re(e,t,n),{pos:d}=re(r,t,n),j=c.length(c.sub(c.create(),t,i)),l=c.length(c.sub(c.create(),o,n)),u=c.length(c.sub(c.create(),e,A)),f=c.length(c.sub(c.create(),d,r)),p="a",h=0;if(j<l&&j<u&&j<f?(h=j,a=i,s=t):l<u&&l<f?(h=l,a=o,s=n):u<f?(h=u,a=e,s=A,p="b"):(h=u,a=r,s=d,p="b"),p=="a"){let{pos:g}=re(a,t,n),b=c.dist(g,a);b<h&&(s=g,h=b)}else{let{pos:g}=re(s,e,r),b=c.dist(g,s);b<h&&(a=g,h=b)}return[h,a,s]}function Ye(e,r,t,n,a=!1){let s=N(e.instances[t]),i=Y.normalFromMat4(Y.create(),s),o=T.fromValues(0,0),A=c.create(),d=c.create();return a?(c.add(A,r.aabb.max,r.aabb.min),c.scale(A,A,.5)):n.evalPosition(A,o),n.evalNormal(d,o),c.transformMat4(A,A,s),c.transformMat3(d,d,i),c.normalize(d,d),[A,d]}function Yt(e,r){let t=c.equals(e.dir,r.dir)||c.equals(e.dir,c.negate(r.dir,r.dir)),[n,a,s]=tr(e.start,e.end,r.start,r.end),i=c.sub(c.create(),a,s);if(!t){let o=er(e.start,e.end,r.start,r.end),{pos:A}=re(o,e.start,e.end),{pos:d}=re(o,r.start,r.end);n>c.dist(A,d)&&(a=A,s=d,c.sub(i,d,A))}return{drawKind:"measureResult",distance:c.len(i),distanceX:Math.abs(i[0]),distanceY:Math.abs(i[1]),distanceZ:Math.abs(i[2]),measureInfoA:{point:a},measureInfoB:{point:s}}}function Ke(e,r,t,n){let a=c.subtract(c.create(),e,r);return{drawKind:"measureResult",distance:c.len(a),distanceX:Math.abs(a[0]),distanceY:Math.abs(a[1]),distanceZ:Math.abs(a[2]),measureInfoA:{point:e,parameter:t},measureInfoB:{point:r,parameter:n}}}function xn(e,r,t){let n=c.transformMat4(c.create(),e.origin,r),{pos:a}=re(n,t.start,t.end),s=S.invert(S.create(),r),i=c.transformMat4(c.create(),a,s),o=Kt(i,e),A=c.create(),d=c.create();if(o<=e.endParam&&o>=e.beginParam)e.eval(o,A,void 0),c.transformMat4(A,A,r),c.copy(d,a);else{let j=c.create();e.eval(e.beginParam,j,void 0),c.transformMat4(j,j,r);let l=c.create();e.eval(e.endParam,l,void 0),c.transformMat4(l,l,r);let{pos:u}=re(j,t.start,t.end),{pos:f}=re(l,t.start,t.end),p=c.dist(u,j),h=c.dist(f,l);p<h?(c.copy(A,j),c.copy(d,u)):(c.copy(A,l),c.copy(d,f))}return Ke(A,d)}function zt(e,r,t){let n=S.invert(S.create(),t),a=c.transformMat4(c.create(),e,n),s=r.invert(a),i=c.create();return r.eval(s,i,void 0),c.transformMat4(i,i,t),i}function rr(e,r,t,n,a,s){let i={prouct:e,curve:r,instance:t},o={prouct:n,curve:a,instance:s},A=[i,o];A.sort((u,f)=>u.curve.kind.localeCompare(f.curve.kind)),[i,o]=A;let d=`${i.curve.kind}_${o.curve.kind}`,j=N(i.prouct.instances[i.instance]),l=N(o.prouct.instances[o.instance]);switch(d){case"line_line":return Yt(Oe(i.curve,j),Oe(o.curve,l));case"arc_arc":{let u=i.curve,f=o.curve,p=c.transformMat4(c.create(),u.origin,j),h=c.transformMat4(c.create(),f.origin,l),g=zt(p,f,l),b=zt(h,u,j);return Ke(g,b)}case"arc_line":{let u=i.curve,f=o.curve;return xn(u,j,Oe(f,j))}case"arc_lineStrip":{let u=i.curve,p=o.curve.toSegments(l),h=1e6,g;for(let b of p){let v=xn(u,j,b);v.distance&&v.distance<h&&(g=v,h=v.distance)}return g}case"line_lineStrip":{let u=Oe(i.curve,j),f=o.curve,p=f.toSegments(l),h=1e6,g;for(let b of p){let v=Yt(u,b);v.distance&&v.distance<h&&(g=v,h=v.distance)}if(g&&g.measureInfoA?.point&&g.measureInfoB?.point){let b=f.invert(g.measureInfoB.point);return{...g,measureInfoB:{point:g.measureInfoB.point,parameter:b}}}}case"lineStrip_lineStrip":{let u=i.curve,f=u.toSegments(j),p=o.curve,h=p.toSegments(l),g=1e6,b;for(let v of f)for(let $ of h){let D=Yt(v,$);D.distance&&D.distance<g&&(b=D,g=D.distance)}if(b&&b.measureInfoA?.point&&b.measureInfoB?.point){let v=u.invert(b.measureInfoA.point),$=p.invert(b.measureInfoB.point);return{...b,measureInfoA:{point:b.measureInfoA.point,parameter:v},measureInfoB:{point:b.measureInfoB.point,parameter:$}}}return b}}}async function _n(e,r,t,n,a,s){let i=(await H).getCurve3DFromEdge(e,r),o=(await H).getCurve3DFromEdge(n,a);if(i&&o)return rr(e,i,t,n,o,s)}async function In(e,r,t,n,a,s){let i=e.faces[r],o=e.surfaces[i.surface],A=(await H).getSurface(o,1);if(A){let d=N(e.instances[t]);switch(A.kind){case"plane":{let[j,l]=Ye(e,i,t,A,!1),u=c.dot(l,c.subtract(c.create(),n,j)),f=c.add(c.create(),n,c.scale(c.create(),c.negate(c.create(),l),u));return{drawKind:"measureResult",normalDistance:Math.abs(u),distanceX:0,distanceY:0,distanceZ:0,normalPoints:[n,f]}}case"cylinder":{let j=s?s.cylinderMeasure:"center",l=o,[u,f]=await te(e,i,l,d,j),p=c.create(),{pos:h}=re(n,u,f,p),g=c.sub(c.create(),n,h),b=c.equals(p,h)&&Ee(e,i);return(j=="closest"||j=="furthest")&&b&&(c.normalize(g,g),c.scale(g,g,l.radius*a),j=="closest"?c.add(h,h,g):c.sub(h,h,g),c.sub(g,n,h)),{drawKind:"measureResult",distance:c.length(g),distanceX:Math.abs(g[0]),distanceY:Math.abs(g[1]),distanceZ:Math.abs(g[2]),measureInfoA:{point:n,validMeasureSettings:b},measureInfoB:{point:h,validMeasureSettings:b}}}}}}function Sn(e,r,t,n){let a=N(e.instances[t]);if(r.kind=="line"){let s=r,i=c.create(),o=c.create(),A=c.create();r.eval(s.beginParam,i,A),r.eval(s.endParam,o,void 0),c.transformMat4(i,i,a),c.transformMat4(o,o,a);let d=c.create(),{pos:j}=re(n,i,o,d);return Ke(n,j)}else if(r.kind=="arc"){let s=zt(n,r,a);return Ke(n,s)}else if(r.kind=="lineStrip"){let s=S.invert(S.create(),a),i=c.transformMat4(c.create(),n,s),o=r.invert(i),A=c.create();return r.eval(o,A,void 0),c.transformMat4(A,A,a),Ke(n,A,void 0,o)}}async function Rn(e,r,t,n){let a=(await H).getCurve3DFromEdge(e,r);if(a)return Sn(e,a,t,n)}async function Fn(e,r,t,n){let a=(await H).getCurve3DFromSegment(e,r);if(a)return Sn(e,a,t,n)}function Tn(e,r,t,n,a){let[s,i]=Ye(t,n,a,r),o=c.dist(e.start,e.end),A=c.scaleAndAdd(c.create(),e.start,e.dir,o);if(Math.abs(c.dot(e.dir,i))<.001){let j=c.dot(i,s),l=c.dot(i,A),u=j-l,f=c.add(c.create(),A,c.scale(c.create(),i,u));return{drawKind:"measureResult",distance:Math.abs(u),distanceX:0,distanceY:0,distanceZ:0,normalPoints:[f,A]}}}async function wn(e,r,t,n,a,s,i){let[o,A]=await te(t,n,r,a,i),d=c.sub(c.create(),A,o);c.normalize(d,d);let j=c.equals(d,e.dir)||c.equals(d,c.negate(c.create(),e.dir)),[l,u,f]=tr(o,A,e.start,e.end);if(!j){let g=er(o,A,e.start,e.end),{pos:b}=re(g,o,A),{pos:v}=re(g,e.start,e.end);l>c.dist(b,v)&&(c.copy(u,b),c.copy(f,v))}let p=c.sub(c.create(),f,u),h=j&&Ee(t,n);return(i=="closest"||i=="furthest")&&h&&(c.normalize(p,p),c.scale(p,p,r.radius*s),i=="closest"?c.add(u,u,p):c.sub(u,u,p),c.sub(p,f,u)),{drawKind:"measureResult",distance:c.length(p),distanceX:Math.abs(p[0]),distanceY:Math.abs(p[1]),distanceZ:Math.abs(p[2]),measureInfoA:{point:u,validMeasureSettings:h},measureInfoB:{point:f,validMeasureSettings:h}}}async function Cn(e,r,t,n,a,s,i){let o=n.faces[a],A=n.surfaces[o.surface],d=(await H).getSurface(A,1);if(d)switch(`${e.kind}_${d.kind}`){case"line_plane":{let l=e,u=N(r.instances[t]),f=d;return Tn(Oe(l,u),f,n,o,s)}case"lineStrip_plane":{let l=N(r.instances[t]),f=e.toSegments(l),p=1e6,h,g=d;for(let b of f){let v=Tn(b,g,n,o,s);v&&v.distance&&v.distance<p&&(h=v,p=v.distance)}return h}case"line_cylinder":{let l=e,u=N(r.instances[t]),f=A,p=N(n.instances[s]);return await wn(Oe(l,u),f,n,o,p,z(n.units),i?i.cylinderMeasure:"center")}case"lineStrip_cylinder":{let l=N(r.instances[t]),u=N(n.instances[s]),p=e.toSegments(l),h=1e6,g;for(let b of p){let v=await wn(b,A,n,o,u,z(n.units),i?i.cylinderMeasure:"center");v.distance&&v.distance<h&&(g=v,h=v.distance)}return g}}}async function qn(e,r,t,n,a,s,i){let o=(await H).getCurve3DFromEdge(e,r);if(o)return Cn(o,e,t,n,a,s,i)}async function Nn(e,r,t,n,a,s,i){let o=(await H).getCurve3DFromSegment(e,r);if(o)return Cn(o,e,t,n,a,s,i)}function CA(e,r,t,n,a,s,i,o){let[A,d]=Ye(e,r,t,n,!0),[j,l]=Ye(a,s,i,o);if(Math.abs(c.dot(d,l))>.999){let f=c.dot(d,c.subtract(c.create(),j,A)),p=c.add(c.create(),A,c.scale(c.create(),d,f)),h=c.copy(c.create(),A);return{drawKind:"measureResult",distance:Math.abs(f),distanceX:0,distanceY:0,distanceZ:0,normalPoints:[h,p]}}}async function qA(e,r,t,n,a,s,i,o,A,d,j,l){let[u,f]=await te(t,n,e,r,j),p=c.sub(c.create(),f,u);c.normalize(p,p);let[h,g]=await te(o,A,s,i,l),b=c.sub(c.create(),g,h);c.normalize(b,b);let v=c.equals(p,b)||c.equals(p,c.negate(c.create(),b)),[$,D,k]=tr(u,f,h,g),O=c.sub(c.create(),D,k),_=v&&Ee(t,n)&&Ee(o,A),I;if(v){c.normalize(O,O);let P=c.scale(c.create(),O,e.radius*a*-1),w=c.scale(c.create(),O,s.radius*d);j=="closest"?c.add(D,D,P):j=="furthest"&&c.sub(D,D,P),l=="closest"?c.add(k,k,w):l=="furthest"&&c.sub(k,k,w),c.sub(O,k,D)}else{let P=er(u,f,h,g),{pos:w}=re(P,u,f),{pos:F}=re(P,h,g);if(c.dist(D,k)>c.dist(w,F)&&(c.sub(O,F,w),D=c.clone(w),k=c.clone(F)),c.length(O)<.5){let C=!1;c.dist(D,f)<c.dist(D,u)&&c.negate(p,p),c.dist(k,g)<c.dist(k,h)&&(C=!0,c.negate(b,b));let q=c.angle(p,b);q>Math.PI&&(q=Math.PI*2-q);let R=!1;q>Math.PI/2&&(q=Math.PI-q,C?c.negate(b,b):c.negate(p,p),R=!0);let G=c.add(c.create(),D,k);c.scale(G,G,.5);let J=c.add(c.create(),G,p),ue=c.add(c.create(),G,b);I={radians:q,angleDrawInfo:[G,J,ue],additionalLine:R?[c.clone(G),c.clone(J)]:void 0}}}return{drawKind:"measureResult",distance:c.length(O),distanceX:Math.abs(O[0]),distanceY:Math.abs(O[1]),distanceZ:Math.abs(O[2]),measureInfoA:{point:D,validMeasureSettings:_},measureInfoB:{point:k,validMeasureSettings:_},angle:I}}function NA(e,r,t,n,a,s,i,o,A){let d=Y.normalFromMat4(Y.create(),r),j=S.fromValues(...e.transform),l=S.getTranslation(c.create(),j);c.transformMat4(l,l,r);let u=c.fromValues(j[8],j[9],j[10]);c.transformMat3(u,u,d),c.normalize(u,u);let[f,p]=Ye(n,a,s,t),h=c.dot(u,p);if(h<1e-6&&h>-1e-4){let b=c.dot(p,f),$=c.dot(p,l)-b;A=="closest"?$=$>0?$-e.radius*i:$+e.radius*i:A=="furthest"&&($=$>0?$+e.radius*i:$-e.radius*i);let D=c.add(c.create(),f,c.scale(c.create(),p,$));return{drawKind:"measureResult",normalDistance:Math.abs($),distanceX:0,distanceY:0,distanceZ:0,normalPoints:[f,D],measureInfoA:{validMeasureSettings:o},measureInfoB:{validMeasureSettings:o}}}}async function Un(e,r,t,n,a,s){let i=(await H).getCurve3DFromSegment(e,r),o=(await H).getCurve3DFromSegment(n,a);if(i&&o)return rr(e,i,t,n,o,s)}async function Ln(e,r,t,n,a,s){let i=(await H).getCurve3DFromSegment(e,r),o=(await H).getCurve3DFromEdge(n,a);if(i&&o)return rr(e,i,t,n,o,s)}async function Vn(e,r,t,n,a,s,i,o){let A=e.faces[r],d=e.surfaces[A.surface],j={surf:(await H).getSurface(d,1),instanceIdx:t,faceData:A,data:d,product:e,setting:i},l=n.faces[a],u=n.surfaces[l.surface],f={surf:(await H).getSurface(u,1),instanceIdx:s,faceData:l,data:u,product:n,setting:o};if(j.surf&&f.surf){let p=[j,f];switch(p.sort((g,b)=>g.surf.kind.localeCompare(b.surf.kind)),[j,f]=p,`${j.surf.kind}_${f.surf.kind}`){case"plane_plane":return CA(j.product,j.faceData,j.instanceIdx,j.surf,f.product,f.faceData,f.instanceIdx,f.surf);case"cylinder_cylinder":{let g=j.data,b=N(j.product.instances[j.instanceIdx]),v=f.data,$=N(f.product.instances[f.instanceIdx]);return qA(g,b,j.product,j.faceData,z(j.product.units),v,$,f.product,f.faceData,z(f.product.units),j.setting?j.setting.cylinderMeasure:"center",f.setting?f.setting.cylinderMeasure:"center")}case"cylinder_plane":{let g=j.data,b=N(j.product.instances[j.instanceIdx]),v=Ee(j.product,j.faceData),$=f.surf;return NA(g,b,$,f.product,f.faceData,f.instanceIdx,z(j.product.units),v,j.setting&&v?j.setting.cylinderMeasure:"center")}}}}async function Hn(e,r,t,n,a){let s=a=="edge"?(await H).getCurve3DFromEdge(e,r):(await H).getCurve3DFromSegment(e,r);if(s){n/=z(e.units);let i=c.create(),o=c.create();s.eval(n,i,o);let A=N(e.instances[t]),d=Y.normalFromMat4(Y.create(),A);return c.transformMat3(o,o,d),c.transformMat4(i,i,A),c.normalize(o,o),c.negate(o,o),[i,o]}}Z.setMatrixArrayType(Array);var ce=1e-4;function UA(e,r){return e>r&&([r,e]=[e,r]),BigInt(e)|BigInt(r)<<32n}function LA(e,r,t){let n=[],a=t?Y.normalFromMat4(Y.create(),t):void 0;for(let s=0;s<r.vertices.length;s+=2){let i=T.fromValues(r.vertices[s],r.vertices[s+1]),o=c.create(),A=c.create();e.evalPosition(o,i),e.evalNormal(A,i),t&&a&&(c.transformMat4(o,o,t),c.transformMat3(A,A,a),c.normalize(A,A)),n.push({pos:o,uv:i,normal:A})}return n}function Xn(e,r){let t=[],n=Y.normalFromMat4(Y.create(),r);for(let a of e.tesselationParameters){let s=c.create(),i=c.create();e.eval(a,s,i),c.transformMat4(s,s,r),c.transformMat3(i,i,n),c.normalize(i,i),t.push({pos:s,t:a,tangent:i})}return t}function VA(e){let r=[],t=new Map,n=[],{surface:a,triangulation:s}=e,i=LA(a,s,e.geometryTransformation),o=i.map((j,l)=>l);for(let j of e.seams)for(let[l,u]of j.vertexIndexPairs)o[u]=l,console.assert(c.distance(i[l].pos,i[u].pos)<1e-4);let{indices:A}=s;for(let j=0;j<A.length;j+=3){let D=function(C,q){let R=UA(C,q),G=t.get(R);if(G===void 0)G=r.length,t.set(R,G),r.push({vertices:[C,q],triangles:[l]});else{let{triangles:J}=r[G];console.assert(J.length==1),r[G].triangles.push(l),G=G}return G};var d=D;let l=n.length,u=A.slice(j,j+3).map(C=>o[C]);e.sense==-1&&u.reverse();let[f,p,h]=u,g=c.subtract(c.create(),i[p].pos,i[f].pos),b=c.subtract(c.create(),i[h].pos,i[f].pos),v=c.create();if(c.cross(v,g,b),c.dot(v,v)==0)continue;c.normalize(v,v),console.assert(c.dot(v,i[f].normal)>0),console.assert(c.dot(v,i[p].normal)>0),console.assert(c.dot(v,i[h].normal)>0);let k=D(f,p),O=D(p,h),_=D(h,f),I=i[f].pos,P=i[p].pos,w=i[h].pos,F={vertices:[f,p,h],edges:[k,O,_],normal:v};n.push(F)}return{triangles:n,vertices:i,edges:r}}function HA(e,r){let[t,n,a]=e,s=r[t][2],i=r[n][2],o=r[a][2];return s>ce&&i>ce&&o>ce?1:s<ce&&i<ce&&o<ce?-1:0}function XA(e,r){let[t,n]=e,a=r[t][2],s=r[n][2];return a>ce&&s>ce||a<ce&&s<ce?0:Math.sign(a-s)}function WA(e,r){let[t,n]=e,a=r[t][2],s=r[n][2];return a>ce&&s>ce?1:a<ce&&s<ce?-1:0}function BA(e,r){let[t,n]=e,a=r[t][2],s=r[n][2],i=(a-ce)/(a-s);return i<0?0:i>1?1:i}function qe(e,r){let t=Xn(e.curve,e.geometryTransformation).map(n=>n.pos);return r>0?t:t.reverse()}function nr(e,r){let t=[];for(let n=0;n<e.length;++n){let a=e[n];if(!a)continue;let s=Xn(a.curve,a.geometryTransformation),i=s.map(l=>c.transformMat4(c.create(),l.pos,r)),o=[],[A,d]=i[0];o.push(`M ${A} ${d}`);for(let l=1;l<s.length;++l)[A,d]=i[l],o.push(`L ${A} ${d}`);let j=o.join(" ");t.push({path:j,centerDepth:0,originalIndex:n,instanceIndex:a.instanceIndex,kind:"edge"})}return t}function ar(e,r){let t=[];for(let s=0;s<e.length;++s){let l=function(p){let h=0;for(let g=0;g<p.length;++g){let b=p[g],v=p[(g+1)%p.length];h+=(v[0]-b[0])*(v[1]+b[1])}return console.assert(h!=0),Math.sign(h)},u=function(){let p=j.join(" "),h=(A+d)/2;t.push({path:p,centerDepth:h,originalIndex:s,instanceIndex:i.instanceIndex,kind:"face"})};var n=l,a=u;let i=e[s],{loops:o}=zA(i,r),A=Number.MAX_VALUE,d=Number.MIN_VALUE,j=[],f=[];for(let p of o){let h=p.map($=>c.transformMat4(c.create(),$,r)),g=-l(h);f.push(g);for(let $ of h){let D=$[2];A>D&&(A=D),d<D&&(d=D)}let[b,v]=h[h.length-1];j.push(`M ${b} ${v}`);for(let $ of h){let[D,k]=$;j.push(`L ${D} ${k}`)}}u()}return t}function GA(e,r){let{edges:t,triangles:n,vertices:a}=e,s=t.map(h=>XA(h.vertices,r)),i=n.map((h,g)=>g).filter(h=>HA(n[h].vertices,r)==0),o=new Set(i),A=t.map((h,g)=>{if(s[g]==0)return;let b=BA(h.vertices,r),v=a[h.vertices[0]],$=a[h.vertices[1]];return c.lerp(c.create(),v.pos,$.pos,b)});function d(h){let g=[];g.push(h);let b=h,v=!0;for(;v;){v=!1;for(let $ of t[b].triangles)if(o.delete($)){let k=n[$].edges.filter(O=>s[O]!=0&&O!=b);console.assert(k.length==1),b=k[0],g.push(b),v=!0;break}}return g}function j(h,g){let b=t[h].triangles,v=t[g].triangles;return b.some($=>v.some(D=>D==$))}function l(h){let g=[];for(let b of h)g.push(A[b]);return g}let u=[],f=[];for(;o.size>0;){let h=[...o.keys()],g=o.keys().next().value;o.delete(g);let $=n[g].edges.filter(_=>s[_]!=0);$.sort((_,I)=>s[_]-s[I]);let D=d($[0]),O=[...d($[1]).reverse(),...D];j(O[0],O[O.length-1])?f.push(l(O)):u.push(O)}let p=u.map(h=>({startEdge:h[0],endEdge:h[h.length-1],strip:h.map(g=>A[g])}));return{loops:f,contourStrips:p}}function Wn(e,r,t=1){let{edges:n}=e,a=n.map(o=>WA(o.vertices,r));return n.map((o,A)=>A).filter(o=>n[o].triangles.length===1&&a[o]*t>=0)}function QA(e,r){let{edges:t,vertices:n}=e,a=Wn(e,r),s=new Map,i=new Array(t.length).fill(0);for(let l of a){let u=t[l],[f,p]=u.vertices;console.assert(!s.has(f)),++i[f],--i[p],s.set(f,[p,l])}let o=i.map((l,u)=>({index:u,count:l})).filter(l=>l.count==1),A=[],d=[];function j(l){let u=[],f=l,p=s.get(f),h=p[1],g=p[1];do{u.push(n[f].pos);let b=f,v=s.get(b);if(s.delete(b),v===void 0)break;f=v[0],g=v[1],console.assert(u.length<1e5)}while(f!=l);return f==l?(g=h,{kind:"loop",strip:u}):(u=u.slice(1,u.length-1),{kind:"strip",startEdge:h,endEdge:g,strip:u})}for(let l of o){let u=j(l.index);u.kind==="strip"?d.push(u):console.assert(!1)}for(;s.size>0;){let l=s.keys().next().value,{kind:u,strip:f}=j(l);A.push(f),console.assert(u=="loop")}return{trimLoops:A,trimStrips:d}}function*KA(e){for(;e.length>0;){let r=[],t=e.pop(),n=t.startEdge;for(r.push(...t.strip);;){let a;for(let s=0;s<e.length;++s){let{startEdge:i}=e[s];if(i==t.endEdge){a=s;break}}if(a!==void 0)t=e[a],r.push(...t.strip),e.splice(a,1);else break}n===t.endEdge?yield r:console.error("Unable to join to loop")}}function YA(e,r){let{vertices:t}=e,n=new Array(t.length);for(let o=0;o<t.length;o++)n[o]=c.create(),c.transformMat4(n[o],t[o].pos,r);let a=new Array(t.length),s=Y.normalFromMat4(Y.create(),r);for(let o=0;o<t.length;o++)a[o]=c.create(),c.transformMat3(a[o],t[o].normal,s);let i=c.fromValues(0,0,1);return c.transformMat3(i,i,s),{positionsVS:n,normalsVS:a}}function zA(e,r){let t=VA(e),{normalsVS:n,positionsVS:a}=YA(t,r),s=[],{trimLoops:i,trimStrips:o}=QA(t,n);s.push(...i);let{loops:A,contourStrips:d}=GA(t,n);s.push(...A);let j=[...d,...o];s.push(...KA(j));let{vertices:l,triangles:u,edges:f}=t,p=Wn(t,n,0).map(h=>f[h].vertices);return{loops:s,trimLoops:i,contourLoops:A,trimEdges:p,vertices:l,positionsVS:a}}async function ze(e,r,t,n){let a=c.create(),s=c.create(),i=n=="edge"?e.edges[r]:e.curveSegments[r];if(i.curve3D!=null){let o=e.curves3D[i.curve3D];switch(o.kind){case"line":{let A=N(e.instances[t]),d=n=="edge"?(await H).getCurve3DFromEdge(e,r):(await H).getCurve3DFromSegment(e,r);d?.eval(i.parameterBounds[0],a,void 0),d?.eval(i.parameterBounds[1],s,void 0);let j=c.subtract(c.create(),s,a);c.transformMat4(a,a,A),c.transformMat4(s,s,A);let l=c.len(j);return l*=z(e.units),c.normalize(j,j),{kind:"line",distance:l,gradient:j,start:a,end:s}}case"circle":{let A=i.parameterBounds[1]-i.parameterBounds[0];return{kind:"arc",radius:o.radius*z(e.units),totalAngle:A}}case"lineStrip":{let A=c.equals(o.vertices[0],o.vertices[o.vertices.length-1]);return{kind:"lineStrip",totalLength:A?void 0:(i.parameterBounds[1]-i.parameterBounds[0])*z(e.units)}}}}}async function Ze(e,r,t,n,a,s,i){function o(P,w){T.min(P.min,P.min,w.min),T.max(P.max,P.max,w.max)}let A=async P=>{let w=!0,F=0,C=[];for(let q of P.halfEdges){let R=t.halfEdges[q],G=await ze(t,R.edge,n,"edge");G&&(w&&(G.kind!="arc"?(w=!1,F=void 0):F=Math.max(G.radius,F)*i),C.push(G))}return{edges:C,useRadius:w,radius:F}},d=N(t.instances[n]);function j(P,w){let F=c.clone(t.vertices[w].position);c.transformMat4(F,F,d),P.push(F)}let l=!0,u=t.loops[a.outerLoop],f={min:T.fromValues(Number.MAX_VALUE,Number.MAX_VALUE),max:T.fromValues(-Number.MAX_VALUE,-Number.MAX_VALUE)},p=[];for(let P of u.halfEdges){let w=(await H).getHalfEdgeAABB(t,P);if(!w)break;o(f,w);let F=t.halfEdges[P],C=t.edges[F.edge];C.vertices&&(F.direction===1?j(p,C.vertices[0]):j(p,C.vertices[1]))}let h=c.create(),g=Y.normalFromMat4(Y.create(),d);s.evalNormal(h,[0,0]),c.transformMat3(h,h,g);let b=c.fromValues(0,0,1),v=Math.abs(c.dot(h,b)),$;if(1-v<Gn){let P=c.create();s.evalPosition(P,[0,0]),c.scale(P,P,1/i),c.transformMat4(P,P,d),$=P[2]}let D=await A(u),k=[],O;if(a.innerLoops){let P=!0;O=0;for(let w of a.innerLoops){let F=t.loops[w],C=await A(F);k.push(C.edges),P=C.useRadius&&P,C.radius&&(O=Math.max(O,C.radius))}P||(O=void 0)}let _,I;return D.useRadius||(_=(f.max[0]-f.min[0])*i,I=(f.max[1]-f.min[1])*i),{kind:"plane",width:_,height:I,outerRadius:D.radius,innerRadius:O,normal:h,area:a.area?a.area*i*i:void 0,vertices:p,outerEdges:D.edges,innerEdges:k,heightAboveXyPlane:$,entity:{ObjectId:e,drawKind:"face",pathIndex:r,instanceIndex:n}}}async function Ot(e,r,t,n,a,s,i,o){let A=N(t.instances[n]),[d,j]=await te(t,a,s,A,o?o.cylinderMeasure:"center");return{kind:"cylinder",radius:s.radius*i,centerLineStart:d,centerLineEnd:j,entity:{ObjectId:e,drawKind:"face",pathIndex:r,instanceIndex:n}}}async function Pt(e,r,t,n,a){let s=r.faces[t],i=z(r.units),o=r.surfaces[s.surface],A=(await H).getSurface(o,s.facing,i);switch(A.kind){case"plane":return await Ze(e,t,r,n,s,A,i);case"cylinder":return await Ot(e,t,r,n,s,o,i,a)}}async function Bn(e,r,t,n,a){let s=e.faces[r],i=e.surfaces[s.surface];switch(i.kind){case"cylinder":{let o=i,A=N(e.instances[t]),[d,j]=await te(e,s,o,A,a?a.cylinderMeasure:"center"),l=c.sub(c.create(),j,d);c.normalize(l,l);let u=c.dot(n,l);if(Math.abs(u)>.8){let _;return u<0?_=j:(c.negate(l,l),_=d),{normal:l,position:_}}let f=c.lerp(c.create(),d,j,.5),p=c.cross(c.create(),l,c.fromValues(1,0,0)),h=c.dot(n,p),g=Math.abs(h),b=c.cross(c.create(),l,c.fromValues(0,1,0)),v=c.dot(n,b),$=Math.abs(v),D=c.cross(c.create(),l,c.fromValues(0,0,1)),k=c.dot(n,D),O=Math.abs(k);return g>$&&g>O?(h>0&&c.negate(p,p),{normal:p,position:f}):$>O?(v>0&&c.negate(b,b),{normal:b,position:f}):(k>0&&c.negate(D,D),{normal:D,position:f})}}}async function Qn(e,r){let t=async(s,i)=>{let o=[];for(let A of s.halfEdges){let d=r.halfEdges[A];o.push({index:d.edge,values:await ze(r,d.edge,i,"edge")})}return o},n=async(s,i)=>{let o=[];for(let A of s.faces){let d=r.faces[A],j=await t(r.loops[d.outerLoop],i);if(j==null)return;let l;if(d.innerLoops){l=[];for(let u of d.innerLoops){let f=await t(r.loops[u],i);if(f==null)return;l.push(f)}}return o.push({index:A,outerLoop:j,innerLoops:l,values:await Pt(e,r,A,i)}),o}},a=[];for(let s=0;s<r.instances.length;++s){let i=r.instances[s],o=N(i),A=r.geometries[i.geometry],d=[],j=0;if(A.shells)for(let l of A.shells){let u=r.shells[l];u.volume&&(j+=u.volume);let f=await n(u,s);if(f)d.push({volume:j==0?void 0:j,outerShell:f});else return}if(A.solids)for(let l of A.solids){let u=r.solids[l],f=r.shells[u.outerShell];f.volume&&(j+=f.volume);let p=await n(f,s);if(p==null)return;let h;if(u.innerShells){h=[];for(let g of u.innerShells){let b=r.shells[g];b.volume&&(j-=b.volume);let v=await n(b,s);if(v==null)return;h.push(v)}}d.push({volume:j==0?void 0:j,outerShell:p,innerShells:h})}a.push({index:s,solids:d})}return{geometries:a}}function Kn(e){let r=[];if(e.length>0)for(let t=1;t<e.length;++t){let n=e[t-1],a=e[t],s=a[0]-n[0],i=a[1]-n[1];r.push(i/s)}return r}function sr(e){let r=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER;for(let n of e)r=Math.max(r,n[1]),t=Math.min(t,n[1]);return{top:r,bottom:t}}function ir(e){let t=[],n=[];var a=sr(e);let s=0,i=0;if(s=e[0][1],i=e[e.length-1][1],e.length>1){let o=0;n.push(e[0]),t.push(o);for(let A=1;A<e.length;++A){let d=e[A-1],j=e[A],l=j[0]-d[0],f=(j[1]-d[1])/l;Math.abs(f-o)>1e-4&&(t.push(o),n.push(d)),o=f}n.push(e[e.length-1]),t.push(o)}return{profilePoints:n,slopes:t,startElevation:s,endElevation:i,top:a.top,bottom:a.bottom}}function Yn(e,r,t){if(r&&r.kind=="lineStrip"){let a=r,s=N(e.instances[t]),i=a.toProfile(s);return ir(i)}if(r&&r.kind=="nurbs"){let a=r,s=[],i=[];if(a.order==2){for(let d=1;d<a.knots.length;++d)i.push(a.knots[d]);s.push(...a.controlPoints)}else{i=a.tesselationParameters;for(let d of a.tesselationParameters){let j=c.create();a.eval(d,j,void 0),s.push(j)}}let o=N(e.instances[t]),A=Ce(Qe(s),i,o);var n=sr(A);return{profilePoints:A,slopes:Kn(A),startElevation:A[0][1],endElevation:A[A.length-1][1],top:n.top,bottom:n.bottom}}}async function zn(e,r,t,n){let a=e.faces[r],s=e.surfaces[a.surface];if(s.kind=="cylinder"){let o=N(e.instances[t]),[A,d]=await te(e,a,s,o,n?n.cylinderMeasure:"center"),j=[T.fromValues(0,A[2]),T.fromValues(T.distance(T.fromValues(A[0],A[1]),T.fromValues(d[0],d[1])),d[2])];var i=sr(j);return{profilePoints:j,slopes:Kn(j),top:i.top,bottom:i.bottom,startElevation:j[0][1],endElevation:j[j.length-1][1]}}}async function or(e,r,t,n){let a=[],s=new Array(e.instances.length);for(let A=0;A<e.instances.length;++A){let l=function(u){j.push(u)};var o=l;let d=e.instances[A],j=new Array;typeof d.geometry=="number"&&ge(e,d,!1,l),s[A]=j}let i=n?n.cylinderMeasure:"center";for(let A=0;A<s.length;++A){let d=N(e.instances[A]);for(let j of s[A]){let l=e.faces[j],u=e.surfaces[l.surface];if(u.kind=="cylinder"){let[f,p]=await te(e,l,u,d,i),h=u.radius*t,g=!0,b=c.dist(f,p)<h;for(let v of b?a:r){let $=Math.abs(v.radius-h)+.15;if(c.distance(f,v.start)<$&&c.distance(p,v.end)<$){g=!1,i==="top"?v.radius<h&&(v.radius=h,v.start=f,v.end=p):v.radius>h&&(v.radius=h,v.start=f,v.end=p);break}}g&&(b?a.push({start:f,end:p,radius:h,checked:!1}):r.push({start:f,end:p,radius:h,next:void 0,prev:void 0}))}}}for(let A=0;A<a.length;++A){let d=a[A],j=!1;if(!d.checked){for(let l=A+1;l<a.length;++l){if(a[l].checked)continue;let u=c.dist(a[l].start,d.end),f=c.dist(a[l].end,d.end);if(u<d.radius&&u<f){c.copy(d.end,a[l].end),a[l].checked=!0,l=A+1,j=!0;continue}if(f<d.radius){c.copy(d.end,a[l].start),a[l].checked=!0,l=A+1,j=!0;continue}}j&&r.push({start:d.start,end:d.end,radius:d.radius,next:void 0,prev:void 0})}}}function Ar(e){let r=(a,s,i,o)=>c.distance(a,i)<(s+o)/2,t;for(let a=0;a<e.length;++a){let s=e[a],i=s.next==null,o=s.prev==null;for(let A=a+1;A<e.length&&!(!o&&!i);++A){let d=e[A];o&&r(s.start,s.radius,d.end,d.radius)&&(d.next=a,s.prev=A,o=!1),i&&r(s.end,s.radius,d.start,d.radius)&&(d.prev=a,s.next=A,i=!1)}if(i&&a!=e.length-1)for(let A=a+1;A<e.length;++A){let d=e[A];if(r(s.end,s.radius,d.end,d.radius)){let j=d.start;d.start=d.end,d.end=j,d.prev=a,s.next=A;break}}if(o&&a!=e.length-1)for(let A=a+1;A<e.length;++A){let d=e[A];if(r(s.start,s.radius,d.start,d.radius)){let j=d.start;d.start=d.end,d.end=j,d.next=a,s.prev=A;break}}if(o){if(s.next===void 0||t!=null&&t.prev===void 0)continue;t=s}}let n=[];if(t&&t.next===void 0){let a=c.distance(t.start,t.end);n.push(c.clone(t.start)),n.push(c.clone(t.end))}else if(t&&t.next!==void 0){let a=t;n.push(c.clone(t.start)),n.push(c.clone(t.end));let s=t.end;for(;a.next!==void 0;)a=e[a.next],s=a.end,n.push(c.clone(a.end))}return n}async function Zn(e,r){let t,n,a,s,i,o=[];for(let p=0;p<e.instances.length;++p){let b=function(v){if(e){let $=e.faces[v],D,k=e.loops[$.outerLoop];if(k.halfEdges.length==1){let _=e.halfEdges[k.halfEdges[0]],I=e.edges[_.edge];if(I.curve3D!=null){let P=e.curves3D[I.curve3D];P.kind=="circle"&&(D=P.radius)}}let O=e.surfaces[$.surface];if(O.kind=="plane"){let _=S.fromValues(...O.transform);S.multiply(_,g,_);let I=c.fromValues(_[8],_[9],_[10]);if(Math.abs(c.dot(I,c.fromValues(0,0,1)))<.8)return;let P=c.fromValues(0,0,0);if(c.transformMat4(P,P,_),t===void 0||n===void 0||a===void 0)t={elevation:P[2],entity:{faceData:$,instanceIdx:p,planeData:O,faceIdx:v}},n={elevation:P[2],radius:D,entity:{faceData:$,instanceIdx:p,planeData:O,faceIdx:v}},a={elevation:P[2],radius:D,entity:{faceData:$,instanceIdx:p,planeData:O,faceIdx:v}};else if(t.elevation<P[2])t={elevation:P[2],entity:{faceData:$,instanceIdx:p,planeData:O,faceIdx:v}};else{let w=!1;D===void 0||a.radius==null?w=a.elevation>P[2]:w=D>a.radius||a.radius===D&&a.elevation>P[2],w&&(a={elevation:P[2],radius:D,entity:{faceData:$,instanceIdx:p,planeData:O,faceIdx:v}}),D!=null&&o.push({elevation:P[2],radius:D,entity:{faceData:$,instanceIdx:p,planeData:O,faceIdx:v}})}}}};var u=b;let h=e.instances[p],g=N(h);typeof h.geometry=="number"&&(ge(e,h,!1,b),o.forEach(v=>{let{radius:$,elevation:D}=v;if(n&&a&&$){let k=!1;n.radius==null?k=$!=null||a.elevation>D:k=a.radius!=null&&a.radius>=$&&n.elevation>D&&D>a.elevation,k&&(n=v)}}))}if(t=t,a=a,!t||!a||t.elevation==a.elevation)return;let A=t.elevation-a.elevation,d=z(e.units);if(A*d<.1)return;let j=(p,h,g,b)=>{let v=h[2]<=0,$=c.scaleAndAdd(c.create(),p,h,v?g*-1:g);return $[2]>p[2]?[$[2]+b,p[2]+b]:[p[2]+b,$[2]+b]},l;for(let p=0;p<e.instances.length;++p){let g=function(b){if(e){let v=e.faces[b],$=e.surfaces[v.surface];if($.kind=="cylinder"){let D=S.fromValues(...$.transform),k=S.getTranslation(c.create(),D),O=c.fromValues(D[8],D[9],D[10]);if(Math.abs(c.dot(O,c.fromValues(0,0,1)))<.8)return;let _=h.transformation?h.transformation[14]:0,I=Math.abs(Jt(e,v,k,O));I>A/3&&(s==null||i==null?(s={radius:$.radius,entity:{faceData:v,instanceIdx:p,cylinderData:$,faceIdx:b}},i={radius:$.radius,entity:{faceData:v,instanceIdx:p,cylinderData:$,faceIdx:b}},l=j(k,O,I,_)):s.radius<$.radius?s={radius:$.radius,entity:{faceData:v,instanceIdx:p,cylinderData:$,faceIdx:b}}:i.radius>$.radius&&(i={radius:$.radius,entity:{faceData:v,instanceIdx:p,cylinderData:$,faceIdx:b}},l=j(k,O,I,_)))}}};var f=g;let h=e.instances[p];typeof h.geometry=="number"&&ge(e,h,!1,g)}if(t&&a&&s&&i&&n){let p=z(e.units);t=t;let h=(await H).getSurface(t.entity.planeData,t.entity.faceData.facing,p);a=a,n=n,i=i,s=s;let g=i.radius===s.radius;(g||l&&n.elevation>=l[0])&&(n=void 0);let b=(await H).getSurface(a.entity.planeData,a.entity.faceData.facing,p),v=n?(await H).getSurface(n.entity.planeData,n.entity.faceData.facing,p):void 0;return{drawKind:"manhole",ObjectId:r,top:await Ze(r,t.entity.faceIdx,e,t.entity.instanceIdx,t.entity.faceData,h,p),topElevation:t.elevation,bottomOuter:await Ze(r,a.entity.faceIdx,e,a.entity.instanceIdx,a.entity.faceData,b,p),bottomOuterElevation:a.elevation,bottomInner:n?await Ze(r,n.entity.faceIdx,e,n.entity.instanceIdx,n.entity.faceData,v,p):void 0,bottomInnerElevation:n?n.elevation:l?l[1]:void 0,inner:g?void 0:await Ot(r,i.entity.faceIdx,e,i.entity.instanceIdx,i.entity.faceData,i.entity.cylinderData,p),innerRadius:g?void 0:i.radius,outer:await Ot(r,s.entity.faceIdx,e,s.entity.instanceIdx,s.entity.faceData,s.entity.cylinderData,p),outerRadius:s.radius,internal:{top:t.entity.faceData,bottomOuter:a.entity.faceData,bottomInner:n?n.entity.faceData:void 0,inner:g?void 0:i.entity.faceData,outer:s.entity.faceData}}}}async function xt(e,r,t,n,a){let s=[],i=e.loops[n.outerLoop],o=N(e.instances[r]),[A,d]=await te(e,n,t,o,a?a.cylinderMeasure:"center"),j=c.sub(c.create(),d,A),l=c.length(j),u=T.len(T.fromValues(j[0],j[1])),f=.001,p=c.normalize(c.create(),j),h=Math.abs(Math.abs(p[2])-1)<f;s.push({vertices3D:[A,d],drawType:"lines",elevation:{from:A[2],to:d[2],horizontalDisplay:j[2]<u},text:[[`L ${l.toFixed(3)}m   \u2300 ${(t.radius*2).toFixed(3)}m   ${h?"":`% ${(Math.abs(j[2]/u)*100).toFixed(2)}`}`]]});for(let g of i.halfEdges){let b=e.halfEdges[g];if(e.edges[b.edge].virtual)continue;let $=(await H).getCurve3DFromEdge(e,b.edge);if($){let D={curve:$,geometryTransformation:N(e.instances[r]),instanceIndex:r};s.push({vertices3D:qe(D,1),drawType:"lines"})}}return s.push({drawType:"text",vertices3D:[d],text:`Z: ${d[2].toFixed(3)}m`}),s.push({drawType:"text",vertices3D:[A],text:`Z: ${A[2].toFixed(3)}m`}),s}async function Je(e,r,t){let n=e.loops[t.outerLoop],a=[];async function s(j){let l=[],u=[];if(e){let f=!0;for(let p of j.halfEdges){let h=e.halfEdges[p],g=(await H).getCurve3DFromEdge(e,h.edge);if(g){let b=g.kind=="line"||g.kind=="lineStrip"||g.kind=="nurbs",v={curve:g,geometryTransformation:N(e.instances[r]),instanceIndex:r},$=qe(v,h.direction),D=f?0:1,k=f?0:l.length-1;for(f=!1;D<$.length;++D)l.push($[D]),!(D==0&&k==0)&&(b?u.push(c.dist(l[k+D-1],l[k+D]).toFixed(3)):u.push(""))}}}return{vertices:l,text:u}}let i=[],{vertices:o,text:A}=await s(n);i.push(A);let d=[];if(t.innerLoops)for(let j of t.innerLoops){let l=e.loops[j],{vertices:u,text:f}=await s(l);i.push(f),d.push({vertices3D:u})}return a.push({vertices3D:o,drawType:"filled",voids:d,text:i.length>0?i:void 0}),a}async function Jn(e,r){let t=[];t.push({kind:"plane",parts:await Je(e,r.top.entity.instanceIndex,r.internal.top)}),t.push({kind:"plane",parts:await Je(e,r.bottomOuter.entity.instanceIndex,r.internal.bottomOuter)}),r.bottomInner&&r.internal.bottomInner&&t.push({kind:"plane",parts:await Je(e,r.bottomInner.entity.instanceIndex,r.internal.bottomInner)});let n=e.surfaces[r.internal.outer.surface];if(t.push({kind:"plane",parts:await xt(e,r.outer.entity.instanceIndex,n,r.internal.outer)}),r.internal.inner&&r.inner){let a=e.surfaces[r.internal.inner.surface];t.push({kind:"plane",parts:await xt(e,r.inner.entity.instanceIndex,a,r.internal.inner)})}return t}async function ea(e,r,t,n,a,s,i){let o=e.faces[r],A=e.surfaces[o.surface],d={surf:(await H).getSurface(A,1),instanceIdx:t,faceData:o,data:A,product:e},j=n.faces[a],l=n.surfaces[j.surface],u={surf:(await H).getSurface(l,1),instanceIdx:s,faceData:j,data:l,product:n};if(d.surf&&u.surf&&d.surf.kind=="cylinder"&&u.surf.kind=="cylinder"){if(!Ee(e,o)||!Ee(n,j))return;let f=d.data,p=N(d.product.instances[d.instanceIdx]),h=u.data,g=N(u.product.instances[u.instanceIdx]);return JA(f,p,d.product,d.faceData,z(d.product.units),h,g,u.product,u.faceData,z(u.product.units),i)}}function ZA(e,r,t,n){if(c.equals(e.dir,t))return;let s=c.sub(c.create(),e.start,r),i=c.cross(c.create(),e.dir,t),o=c.len(i);c.normalize(i,i);let A=Math.abs(c.dot(s,i));if(A<=n){let d=c.cross(c.create(),s,t),j=-c.dot(d,i)/o,l=c.cross(c.create(),i,t);c.normalize(l,l);let u=Math.abs(Math.sqrt(n*n-A*A)/c.dot(e.dir,l)),f=j-u,p=j+u,h=f<p?f:p;return c.scaleAndAdd(c.create(),e.start,e.dir,h)}}async function JA(e,r,t,n,a,s,i,o,A,d,j){let[u,f]=await te(t,n,e,r),p=c.sub(c.create(),f,u);c.normalize(p,p);let[h,g]=await te(o,A,s,i),b=c.sub(c.create(),g,h);c.normalize(b,b);let v=s.radius*d,$=e.radius*a,D={start:u,dir:p};if(c.dist(D.start,h)<c.dist(f,h)&&(D.start=f,c.negate(D.dir,D.dir)),Math.abs(c.dot(D.dir,b))>.99)return;let k=ZA(D,h,b,v);if(k){let O=c.dist(u,f)+.5,_=Re.fromValues(D.dir[0],D.dir[1],D.dir[2],-c.dot(k,D.dir));if(Math.abs(Re.dot(_,Re.fromValues(D.start[0],D.start[1],D.start[2],1)))>O)return;if(!j||j?.cylinderMeasure==="center")return{point:k};let I=c.fromValues(1,0,0);c.dot(D.dir,I)===1&&(I=c.fromValues(0,0,1));let P=c.cross(c.create(),D.dir,I);c.normalize(P,P);let w=1/Math.abs(c.dot(P,b));return j.cylinderMeasure==="top"?{point:c.scaleAndAdd(c.create(),k,b,$*w)}:{point:c.scaleAndAdd(c.create(),k,b,-$*w)}}}async function ta(e,r){let t=new Array(e.instances.length),n=new Array(e.instances.length),a=new Array(e.instances.length);for(let d=0;d<e.instances.length;++d){let f=function(h){if(u.push(h),e){let g=e.faces[h],b=[g.outerLoop,...g.innerLoops??[]];for(let v of b){let $=e.loops[v];for(let D of $.halfEdges){let k=e.halfEdges[D];l.push(k.edge)}}}};var A=f;let j=e.instances[d],l=new Array,u=new Array;typeof j.geometry=="number"&&ge(e,j,!1,f);let p=e.geometries[j.geometry];p.compoundCurve?a[d]=p.compoundCurve:a[d]=[],t[d]=l,n[d]=u}let s=[];for(let d=0;d<a.length;++d){let j=e.instances[d],l=N(j),u=S.invert(S.create(),l),f=[];for(let p of a[d]){let h=(await H).getCurve3DFromSegment(e,p);h&&f.push({idx:p,curve:h})}f.length>0&&s.push({segments:f,instanceIdx:d,worldToObject:u})}let i=[];for(let d=0;d<t.length;++d){let j=e.instances[d],l=N(j),u=S.invert(S.create(),l),f=[];for(let p of t[d]){let h=e.edges[p];if(h.virtual)continue;let g=(await H).getCurve3DFromEdge(e,p,1);g&&f.push({data:h,idx:p,curve:g})}f.length>0&&i.push({instanceIdx:d,worldToObject:u,instanceMat:l,edges:f})}let o=[];for(let d=0;d<n.length;++d){let j=e.instances[d],l=N(j),u=S.invert(S.create(),l),f=[];for(let p of n[d]){let h=e.faces[p],g=e.surfaces[h.surface],b=(await H).getSurface(g,1);f.push({aabb:h.aabb,idx:p,surface:b})}o.push({instanceIdx:d,worldToObject:u,faces:f,instanceMat:l})}return{objectId:r,edges:i,segments:s,faces:o,unitScale:z(e.units)}}function cr(e,r,t){let n=c.copy(c.create(),r),a=t.edge?t.edge/e.unitScale:void 0,s=t.segment?t.segment/e.unitScale:void 0,i=t.face?t.face/e.unitScale:void 0,o=t.point?t.point/e.unitScale:void 0;if(s)for(let l of e.segments){let u=c.transformMat4(c.create(),n,l.worldToObject);for(let f of l.segments){let p=f.curve.invert(u),h=c.create();if(f.curve.eval(p,h,void 0),c.dist(h,u)<s)return{entity:{ObjectId:e.objectId,drawKind:"curveSegment",pathIndex:f.idx,instanceIndex:l.instanceIdx,parameter:p},connectionPoint:h}}}let A,d=Number.MAX_VALUE,j=!1;if(a||o){let l=0;a&&o?l=o>a?o:a:l=a||o||0;for(let u of e.edges){let f=c.transformMat4(c.create(),n,u.worldToObject);for(let p of u.edges)if(Zt(f,p.data.aabb,l)){let h=p.curve.invert(f),g=c.create();if(p.data.vertices&&p.curve.kind!="arc"&&o){let b=Math.abs(p.data.parameterBounds[0]-h);if(b<o&&b<d){p.curve.eval(p.data.parameterBounds[0],g,void 0);let v=c.dist(g,f);v<o&&v<d&&(j=!0,d=v,c.transformMat4(g,g,u.instanceMat),A={entity:{ObjectId:e.objectId,drawKind:"vertex",pathIndex:p.data.vertices[0],instanceIndex:u.instanceIdx,parameter:c.clone(g)},connectionPoint:c.clone(g)});let $=Math.abs(p.data.parameterBounds[1]-h);if($<o&&$<d){p.curve.eval(p.data.parameterBounds[1],g,void 0);let D=c.dist(g,f);D<o&&D<d&&(j=!0,d=D,c.transformMat4(g,g,u.instanceMat),A={entity:{ObjectId:e.objectId,drawKind:"vertex",pathIndex:p.data.vertices[1],instanceIndex:u.instanceIdx,parameter:c.clone(g)},connectionPoint:c.clone(g)})}}}if(!j&&a){p.curve.eval(h,g,void 0);let b=c.dist(g,f);b<a&&b<d&&(d=b,c.transformMat4(g,g,u.instanceMat),A={entity:{ObjectId:e.objectId,drawKind:"edge",pathIndex:p.idx,instanceIndex:u.instanceIdx,parameter:h},connectionPoint:g})}}}}if(A)return A;if(i)for(let l of e.faces){let u=c.transformMat4(c.create(),n,l.worldToObject);for(let f of l.faces)if(Zt(u,f.aabb,i)){let p=T.create();f.surface.invert(p,u);let h=c.create();f.surface.evalPosition(h,p);let g=c.dist(h,u);g<d&&g<i&&(c.transformMat4(h,h,l.instanceMat),A={entity:{ObjectId:e.objectId,drawKind:"face",pathIndex:f.idx,instanceIndex:l.instanceIdx,parameter:p},connectionPoint:h},d=g)}}return A}var Tt=class{constructor(r){this.baseUrl=r;let t=r;t.pathname+="road/",this.downloader=new Me(t)}data=new Map;downloader;findShoulderIndex(r){let t=0,n=0,a=!0;for(let s=0;s<r.length;++s){let i=r[s];if(i==10&&(a=!1),i==2)if(a)t=s;else{n=s;break}}return{leftShoulder:t,rightShoulder:n}}async downloadSections(r){try{return await this.downloader.downloadJson(r)}catch{return null}}async getCrossSections(r){this.data.size>20&&this.data.clear();let t=this.data.get(r);return t===void 0&&(t=await this.downloadSections(`${r}.json`),this.data.set(r,t)),t??void 0}async getCrossSection(r,t){let n=await this.getCrossSections(r);if(n){let{intervals:a,sections:s,labels:i,codes:o}=n,A=0,d=a.length-1,j=l=>{if(l!==0&&i[s[l-1].l].length===1)return;let u,f,p=s[l],h=n.codes[p.l].findIndex(ae=>ae==10),g=p.p[h];if(l==0){u=p.p;let ae=s[l+1],oe=ae.l==p.l?h:n.codes[ae.l].findIndex(Pe=>Pe==10),et=ae.p[oe];f=c.sub(c.create(),et,g),c.normalize(f,f)}else{let ae=Math.abs(t-a[l-1]);if(ae>10)return;let oe=s[l-1],et=oe.l==p.l?h:n.codes[oe.l].findIndex(Ne=>Ne==10),Pe=oe.p[et];f=c.sub(c.create(),g,Pe),c.normalize(f,f),u=oe.l==p.l?oe.p.map((Ne,jr)=>{let be=p.p[jr],Ue=c.sub(c.create(),be,Ne);return c.normalize(Ue,Ue),c.scaleAndAdd(c.create(),Ne,Ue,ae)}):p.p}let b=c.fromValues(0,0,1),v=c.cross(c.create(),b,f);c.normalize(v,v),c.cross(f,v,b),c.normalize(f,f);let $=Y.fromValues(v[0],v[1],v[2],b[0],b[1],b[2],f[0],f[1],f[2]),D=u.map(ae=>{let oe=c.transformMat3(c.create(),ae,$);return T.fromValues(oe[0],oe[1])}),k=u.map(ae=>c.clone(ae)),O=o[p.l],{leftShoulder:_,rightShoulder:I}=this.findShoulderIndex(O),P=c.clone(u[h]),w=c.clone(u[_]),F=c.clone(u[I]),C=T.fromValues(P[0],P[1]),q=T.fromValues(w[0],w[1]),R=T.fromValues(F[0],F[1]),G=Math.abs(P[2]-w[2])/T.dist(C,q),J=Math.abs(P[2]-F[2])/T.dist(C,R),ue={left:{slope:G,start:w,end:P},right:{slope:J,start:P,end:F}};return{points:k,labels:i[p.l],points2D:D,slopes:ue,codes:O}};for(;A<=d;){let l=Math.floor((A+d)/2),u=a[l];if(l===a.length-1)return u<t?j(l):void 0;if(Math.abs(u-t)<.001)return j(l);if(t<u)d=l-1;else{let f=a[l+1];if(t<f)return j(l+1);A=l+1}}}}async getRoadProfiles(r){let t=await this.getCrossSections(r);if(t&&t.heightmaps.length!=0){let n=[];n.push({name:t.name,elevations:t.centerLine.map(a=>a[2])});for(let a of t.heightmaps)n.push(a)}}async getCrossSlope(r){let t=await this.getCrossSections(r);if(t){let n=[],a=[];return t.sections.forEach(s=>{let i=t.codes[s.l],{leftShoulder:o,rightShoulder:A}=this.findShoulderIndex(i),d=i.findIndex(g=>g==10),j=c.clone(s.p[d]),l=c.clone(s.p[o]),u=c.clone(s.p[A]),f=T.fromValues(j[0],j[1]),p=T.fromValues(l[0],l[1]),h=T.fromValues(u[0],u[1]);n.push(j[2]-l[2]/T.dist(f,p)),a.push(j[2]-u[2]/T.dist(f,h))}),{intervals:t.intervals,left:n,right:a}}}};Z.setMatrixArrayType(Array);var Gn=1e-4,wt=class{constructor(r){this.baseUrl=r;let t=new URL(r);t.pathname+="brep/",this.downloader=new Me(t),this.crossSectionTool=new Tt(r)}downloader;crossSectionTool;data=new Map;snapObjects=new Array;nextSnapIdx=0;async getSnapInterface(r,t){for(let n of this.snapObjects)if(n.objectId==r)return n;if(t){this.nextSnapIdx==6&&(this.nextSnapIdx=0);let n=await ta(t,r);return this.snapObjects[this.nextSnapIdx++]=n,n}}async downloadBrep(r){try{return await this.downloader.downloadJson(r)}catch{return null}}async getProduct(r){let t=this.data.get(r);if(t===void 0){if(t=await this.downloadBrep(`${r}.json`),t&&t.instances===void 0){this.data.set(r,null);return}this.data.set(r,t)}return t??void 0}async getCameraValuesFromFace(r,t,n,a){let s=await this.getProduct(r);if(s)return Bn(s,t,n,a)}async getFaces(r,t){let n=await this.getProduct(r);if(n){let a=S.create();S.invert(a,t);let s=(await H).getFaces(n),i=ar(s,a).filter(o=>o.path.length>0);return i.sort((o,A)=>o.centerDepth-A.centerDepth),i}return[]}async getProductObject(r){let t=await this.getProduct(r);if(t)return Qn(r,t)}async getSnaps(r){let t=await this.getProduct(r)}async getParameterBoundsForCurve(r,t,n){let a=await this.getProduct(r);if(a){let s=n=="edge"?a.edges[t]:a.curveSegments[t],i=z(a.units);return{start:s.parameterBounds[0]*i,end:s.parameterBounds[1]*i}}}async evalCurve(r,t,n,a,s){let i=await this.getProduct(r);if(i)return Hn(i,t,n,a,s)}async getCylinderCurve(r,t,n,a){let s=await this.getProduct(r);if(s){let i=s.faces[t],o=z(s.units),A=s.surfaces[i.surface];if((await H).getSurface(A,i.facing,o).kind=="cylinder"){let j=A,l=N(s.instances[n]),[u,f]=await te(s,i,j,l,a?a.cylinderMeasure:"center");return[{start:0,end:c.dist(u,f)},[u,f]]}}}async pickEntity(r,t,n){let a=await this.getProduct(r);if(a){let s=await this.getSnapInterface(r,a);if(s){let o=cr(s,t,n??{edge:.032,segment:.12,face:.07,point:.032});if(o)return{entity:o.entity,status:"loaded",connectionPoint:o.connectionPoint}}}return{entity:{ObjectId:r,parameter:t,drawKind:"vertex"},status:"missing"}}async pickEntityOnCurrentObject(r,t,n){if(this.data.get(r)===null)return{entity:void 0,status:"missing"};let s=await this.getSnapInterface(r,void 0);if(s){let i=cr(s,t,n);return{entity:i?.entity,status:"loaded",connectionPoint:i?.connectionPoint}}return{entity:void 0,status:"unknown"}}async getEdges(r,t){let n=await this.getProduct(r);if(n){let a=S.create();S.invert(a,t);let s=(await H).getEdges(n);return nr(s,a).filter(o=>o.path.length>0)}return[]}async getPaths(r,t){let n=await this.getProduct(r);if(n){let a=(await H).getFaces(n),s=ar(a,t).filter(A=>A.path.length>0);s.sort((A,d)=>A.centerDepth-d.centerDepth);let i=(await H).getEdges(n),o=nr(i,t).filter(A=>A.path.length>0);return[...s,...o]}return[]}async viableFollowPathEntity(r){let t=await this.getProduct(r);if(t&&t.curveSegments&&t.curveSegments.length>0&&t.curveSegments.length===1)return{ObjectId:r,drawKind:"curveSegment",pathIndex:0,instanceIndex:0,parameter:0}}async getTesselatedEdge(r,t,n){let a=await this.getProduct(r);if(a){let s=(await H).getCurve3DFromEdge(a,t);if(s){let i={curve:s,geometryTransformation:N(a.instances[n]),instanceIndex:n};return qe(i,1)}}return[]}async tesselateCurveSegment(r,t,n){let a=await this.getProduct(r);if(a){let s=(await H).getCurve3DFromSegment(a,t);if(s){let i={curve:s,geometryTransformation:N(a.instances[n]),instanceIndex:n};return qe(i,1)}}return[]}async curveSegmentProfile(r,t,n){let a=await this.getProduct(r);if(a){let s=(await H).getCurve3DFromSegment(a,t);if(s)return Yn(a,s,n)}}async cylinderProfile(r,t,n,a){let s=await this.getProduct(r);if(s)return await zn(s,t,n,a)}async multiSelectProfile(r,t){let n=[];for(let s of r){let i=await this.getProduct(s);if(i){if(i.curveSegments&&i.curveSegments.length>0)if(i.curveSegments.length===1&&r.length===1){let o=await this.curveSegmentProfile(s,0,0);if(o)return o}else return"Multiple segments in profile";await or(i,n,z(i.units),t)}}let a=Qe(Ar(n));if(a.length>1){let s=Ce(a,void 0,void 0);return ir(s)}}async getLineStripFromCylinders(r,t){let n=await this.cylindersToLinestrip(r,t);for(let a of n);return n}async cylindersToLinestrip(r,t){let n=[];for(let a of r){let s=await this.getProduct(a);s&&await or(s,n,z(s.units),t)}return Qe(Ar(n))}async getFaceDrawObject(r,t,n,a){let s=await this.getProduct(r);if(s){let i=s.faces[t],o=s.surfaces[i.surface],A=[],d=o.kind=="cylinder"?"cylinder":"plane";return o.kind=="cylinder"?A=await xt(s,n,o,i,a):A=await Je(s,n,i),{kind:d,parts:A}}}async edgeToEdgeMeasure(r,t,n,a,s,i){let o=await this.getProduct(r),A=await this.getProduct(a);if(o&&A)return await _n(o,t,n,A,s,i)}async edgeToPointMeasure(r,t,n,a){let s=await this.getProduct(r);if(s)return await Rn(s,t,n,a)}async segmentToPointMeasure(r,t,n,a){let s=await this.getProduct(r);if(s)return await Fn(s,t,n,a)}async faceToPointMeasure(r,t,n,a,s){let i=await this.getProduct(r);if(i)return await In(i,t,n,a,z(i.units),s)}async edgeToFaceMeasure(r,t,n,a,s,i,o){let A=await this.getProduct(r),d=await this.getProduct(a);if(A&&d)return await qn(A,t,n,d,s,i,o)}async faceToFaceMeasure(r,t,n,a,s,i,o,A){let d=await this.getProduct(r),j=await this.getProduct(a);if(d&&j)return await Vn(d,t,n,j,s,i,o,A)}async segmentToSegmentMeasure(r,t,n,a,s,i){let o=await this.getProduct(r),A=await this.getProduct(a);if(o&&A)return await Un(o,t,n,A,s,i)}async segmentToEdgeMeasure(r,t,n,a,s,i){let o=await this.getProduct(r),A=await this.getProduct(a);if(o&&A)return await Ln(o,t,n,A,s,i)}async segmentToFaceMeasure(r,t,n,a,s,i,o){let A=await this.getProduct(r),d=await this.getProduct(a);if(A&&d)return await Nn(A,t,n,d,s,i,o)}async getCurveValues(r,t,n,a){let s=await this.getProduct(r);if(s)return ze(s,t,n,a)}async getFaceValues(r,t,n,a){let s=await this.getProduct(r);if(s)return Pt(r,s,t,n,a)}async getManholeValues(r){let t=await this.getProduct(r);if(t)return Zn(t,r)}async getManholeDrawObject(r){let t=await this.getProduct(r.ObjectId);return t?Jn(t,r):[]}async swapCylinder(r,t,n,a){let s=await this.getProduct(r);if(s)return Pn(s,t,n,a)}async faceToFaceCollision(r,t,n,a,s,i,o){let A=await this.getProduct(r),d=await this.getProduct(a);if(A&&d)return await ea(A,t,n,d,s,i,o)}async getRoadProfile(r){return await this.crossSectionTool.getRoadProfiles(r)}async getRoadCrossSlope(r){return await this.crossSectionTool.getCrossSlope(r)}async getCrossSection(r,t){return await this.crossSectionTool.getCrossSection(r,t)}};var dr=class{scriptUrl;initialize(r){this.scriptUrl=r}terminate(){"DedicatedWorkerGlobalScope"in self&&self.close()}createMeasureTool(r){let t=new wt(new URL(r,this.scriptUrl));return Wt(t)}},ec=new dr;At(ec);
